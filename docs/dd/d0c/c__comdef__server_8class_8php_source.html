<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BMLT Root Server: /Volumes/Development/webroot/web_projects/BMLT-Root-Server/main_server/server/c_comdef_server.class.php Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BMLT Root Server
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_26d822986ba68053f2c860363e4e8d8e.html">main_server</a></li><li class="navelem"><a class="el" href="../../dir_d65a204f80f93074ee826db2f7dc2d00.html">server</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">c_comdef_server.class.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../dd/d0c/c__comdef__server_8class_8php.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?php<span class="comment"></span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">    \file c_comdef_server.class.php</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">    \brief The main server (Model) class for the Basic Meeting List Toolbox MVC system.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">    The server is a SINGLETON. There can only be one. Upon instantiation, it creates a bunch of format objects, in its own</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">    localization. The formats are all read in and kept local, but the meetings are supplied upon demand. The same goes for the</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">    change tracking.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">    This series of classes interfaces with the server, using PHP&#39;s PDO database abstraction layer} (http://us3.php.net/pdo),</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">    so this system should work for multiple databases.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">    This file is part of the Basic Meeting List Toolbox (BMLT).</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">    Find out more at: https://bmlt.app</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">    BMLT is free software: you can redistribute it and/or modify</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">    it under the terms of the MIT License.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">    BMLT is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">    MIT License for more details.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">    You should have received a copy of the MIT License along with this code.</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">    If not, see &lt;https://opensource.org/licenses/MIT&gt;.</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<a class="code" href="../../d5/d1d/client__interface_2html_2index_8php.html#a9fbaf120043298ee46edd0722ca2d570">defined</a>(<span class="stringliteral">&#39;BMLT_EXEC&#39;</span>) or die(&#39;Cannot Execute Directly&#39;);    <span class="comment">// Makes sure that this file is in the correct context.</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;require_once(dirname(__FILE__).&quot;/classes/<a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html">c_comdef_dbsingleton</a>.class.php&quot;);</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;require_once(dirname(__FILE__).&quot;/classes/<a class="code" href="../../da/dd0/classc__comdef__formats.html">c_comdef_formats</a>.class.php&quot;);</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;require_once(dirname(__FILE__).&quot;/classes/<a class="code" href="../../d2/d64/classc__comdef__meetings.html">c_comdef_meetings</a>.class.php&quot;);</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;require_once(dirname(__FILE__).&quot;/classes/<a class="code" href="../../d2/d5a/classc__comdef__changes.html">c_comdef_changes</a>.class.php&quot;);</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;require_once(dirname(__FILE__).&quot;/classes/<a class="code" href="../../d4/d47/classc__comdef__users.html">c_comdef_users</a>.class.php&quot;);</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;require_once(dirname(__FILE__).&quot;/classes/<a class="code" href="../../d1/d1b/classc__comdef__service__bodies.html">c_comdef_service_bodies</a>.class.php&quot;);</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;require_once(dirname(__FILE__).&quot;/shared/classes/base_templates.inc.php&quot;);</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">/******************************************************************/</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">/** \brief This class is the main server class. It instantiates a</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">    PDO database object, and is the starting point for everything</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">    done and managed by the CoMDEF server system.</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">// phpcs:disable PSR1.Classes.ClassDeclaration.MissingNamespace</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">// phpcs:disable Squiz.Classes.ValidClassName.NotCamelCaps</span></div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html">   47</a></span>&#160;class <a class="code" href="../../dd/d45/classc__comdef__server.html">c_comdef_server</a></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// phpcs:enable PSR1.Classes.ClassDeclaration.MissingNamespace</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// phpcs:enable Squiz.Classes.ValidClassName.NotCamelCaps</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;{<span class="comment"></span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">    ///This is the SINGLETON server instance. There can only be one...</span></div><div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a7073ca56e0726d945109906c13707559">   52</a></span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">static</span> $server_instance = null;<span class="comment"></span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">    /// This contains a cache of the local strings.</span></div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">   54</a></span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">static</span> $server_local_strings = null;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment"></span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">    /// This is the name of the Formats table in the database.</span></div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ab3d94ac4034f6a0ea9217dc5a3deaff8">   57</a></span>&#160;<span class="comment"></span>    <span class="keyword">private</span> $_format_table_name = null;<span class="comment"></span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">    /// This is the name of the Meetings table in the database.</span></div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a8bcbc0f8a5007a50e0cccd0547693928">   59</a></span>&#160;<span class="comment"></span>    <span class="keyword">private</span> $_meeting_table_name = null;<span class="comment"></span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">    /// This is the name of the Changes table in the database.</span></div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a44bb697ecc787e0e57d7dcb309f4ff6f">   61</a></span>&#160;<span class="comment"></span>    <span class="keyword">private</span> $_changes_table_name = null;<span class="comment"></span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">    /// This is the name of the user table in the database.</span></div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#aa00f0c49e77b651ad9cb5a7e5162e2ea">   63</a></span>&#160;<span class="comment"></span>    <span class="keyword">private</span> $_user_table_name = null;<span class="comment"></span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">    /// This is the name of the database version table in the database.</span></div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a0ae756983d1736bb17479bcda8af394b">   65</a></span>&#160;<span class="comment"></span>    <span class="keyword">private</span> $_db_version_table_name = null;<span class="comment"></span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">    /// This is the name of the Service Bodies table in the database.</span></div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a95b0a6901542dd8061874a88e7a3ea53">   67</a></span>&#160;<span class="comment"></span>    <span class="keyword">private</span> $_service_bodies_table_name = null;<span class="comment"></span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">    /// This is the container for the loaded formats.</span></div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a11d8587543a4415d0d97aafffc800d8a">   69</a></span>&#160;<span class="comment"></span>    <span class="keyword">private</span> $_formats_obj = null;<span class="comment"></span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">    /// This is the container for the loaded formats that are actually used in the meetings. Each element is a format shared ID.</span></div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ac38ac1f08cbea7fb4862a3df4f3205bc">   71</a></span>&#160;<span class="comment"></span>    <span class="keyword">private</span> $_used_format_ids = null;<span class="comment"></span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">    /// This is the container for the loaded users.</span></div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a4c4e1850ce34f9fcc02b975a992e2024">   73</a></span>&#160;<span class="comment"></span>    <span class="keyword">private</span> $_users_obj = null;<span class="comment"></span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">    /// This has the IDs of all the Service entities that &quot;own&quot; meetings on the server.</span></div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#aa3c9ad0a70c246e633a3f2b5c132eb9b">   75</a></span>&#160;<span class="comment"></span>    <span class="keyword">private</span> $_service_ids = null;<span class="comment"></span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">    /// This contains the names of the server languages, in their languages. It is an associative array, based on the language enums.</span></div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ac3a89418daa7fa6e585708b66bdf64eb">   77</a></span>&#160;<span class="comment"></span>    <span class="keyword">private</span> $_server_lang_names = null;<span class="comment"></span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">    /// This contains the names of additional languages for which formats are defined, in the main language of the server. It is an associative array, based on the language enums.</span></div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ab92ba9a70fcf8ac4e9e998bf9f8b9ab7">   79</a></span>&#160;<span class="comment"></span>    <span class="keyword">private</span> $_format_lang_names = null;<span class="comment"></span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">    /// This contains the server namespace, which is used to uniquely identify data from this server. The default is the server URI, with &quot;/CoMDEF&quot; appended.</span></div><div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#adb79ac59ce1039c353a6696f263ef360">   81</a></span>&#160;<span class="comment"></span>    <span class="keyword">private</span> $_server_namespace = null;<span class="comment"></span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">    /// This contains the actual Service Body objects as a simple array.</span></div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a5723963d88652c5d0c66f63bc6b0f94a">   83</a></span>&#160;<span class="comment"></span>    <span class="keyword">private</span> $_service_obj_array = null;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    </div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">    /** \brief  This is the factory for the server instantiation.</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">                It makes sure that only one instance exists.</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">        \returns the Server instance. Either a new one, or the existing one.</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a00dcaf66374f7850e53a3864b4854cfc">   92</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a00dcaf66374f7850e53a3864b4854cfc">MakeServer</a>()</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">if</span> (!(self::$server_instance instanceof <a class="code" href="../../dd/d45/classc__comdef__server.html">c_comdef_server</a>)) {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            self::$server_instance = <span class="keyword">new</span> <a class="code" href="../../dd/d45/classc__comdef__server.html">c_comdef_server</a>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        }</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        </div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordflow">return</span> self::$server_instance;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    </div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">    /** \returns the Server instance.</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a73c17efb58fc8625e47b151164c67ad4">  106</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a73c17efb58fc8625e47b151164c67ad4">GetServer</a>()</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">return</span> self::$server_instance;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    </div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">    /** \brief Sets the server instance.</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ab5510edc86f4e4dc164986ccce6e923b">  116</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#ab5510edc86f4e4dc164986ccce6e923b">SetServer</a>($in_server_instance)</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordflow">if</span> ($in_server_instance != self::GetServer()) {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keywordflow">if</span> (null !== self::GetServer()) {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                self::$server_instance = null;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            self::$server_instance = $in_server_instance;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    </div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">    /** \brief The initial setup call for the class. Part of setting up</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">        the server is establishing the database connection, and reading</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">        in all of the formats, which will be available in the</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">        GetFormatsObj() member function afterwards.</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#aed8397ba5518d190232d5abf39336c5d">  134</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#aed8397ba5518d190232d5abf39336c5d">__construct</a>(</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        $in_lang_enum = null  <span class="comment">///&lt; It is possible to force a different language via this parameter.</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        global  <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a>;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            </div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">try</span> {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            self::SetServer($this);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            include(dirname(__FILE__).<span class="stringliteral">&quot;/config/get-config.php&quot;</span>);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    </div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="keywordflow">if</span> (!isset($dbType)) {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                $dbType = <span class="stringliteral">&#39;mysql&#39;</span>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    </div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordflow">if</span> (!isset($dbServer)) {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                $dbServer = <span class="stringliteral">&#39;localhost&#39;</span>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    </div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <span class="keywordflow">if</span> (!isset($dbPrefix)) {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                $dbPrefix = <span class="stringliteral">&#39;na&#39;</span>;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a7769dc278479099e18c31f131e81efd3">c_comdef_dbsingleton::init</a>($dbType, $dbServer, $dbName, $dbUser, $dbPassword, <span class="stringliteral">&#39;utf8&#39;</span>);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            </div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="comment">// These are all the base names of the SQL tables.</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            $this-&gt;_format_table_name = $dbPrefix.<span class="stringliteral">&quot;_comdef_formats&quot;</span>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            $this-&gt;_meeting_table_name = $dbPrefix.<span class="stringliteral">&quot;_comdef_meetings&quot;</span>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            $this-&gt;_changes_table_name = $dbPrefix.<span class="stringliteral">&quot;_comdef_changes&quot;</span>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            $this-&gt;_service_bodies_table_name = $dbPrefix.<span class="stringliteral">&quot;_comdef_service_bodies&quot;</span>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            $this-&gt;_user_table_name = $dbPrefix.<span class="stringliteral">&quot;_comdef_users&quot;</span>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            $this-&gt;_db_version_table_name = $dbPrefix.<span class="stringliteral">&quot;_comdef_db_version&quot;</span>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="keywordflow">if</span> (isset($serverNamespace) &amp;&amp; (null !== $serverNamespace)) {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                $this-&gt;_server_namespace = $serverNamespace;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                $this-&gt;_server_namespace = <span class="stringliteral">&quot;http://&quot;</span>.$_SERVER[<span class="stringliteral">&#39;SERVER_NAME&#39;</span>].<span class="stringliteral">&quot;/CoMDEF&quot;</span>;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            }</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            </div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="comment">// Brute-force protection against selecting a language that isn&#39;t supported by the resources at hand.</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="keywordflow">if</span> (!file_exists(dirname(__FILE__).<span class="stringliteral">&quot;/../local_server/server_admin/lang/&quot;</span>.<a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a>.<span class="stringliteral">&quot;/name.txt&quot;</span>)) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a> = <span class="stringliteral">&quot;en&quot;</span>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            </div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            global  <a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            </div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">if</span> (isset($in_lang_enum) &amp;&amp; $in_lang_enum) { <span class="comment">// If a different language was specified, we force that into place now.</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                <span class="keywordflow">if</span> (isset(<a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>) &amp;&amp; is_array(<a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>)) {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                    <a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>[<span class="stringliteral">&#39;lang_enum&#39;</span>] = $in_lang_enum;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                </div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                <span class="keywordflow">if</span> (file_exists(dirname(__FILE__).<span class="stringliteral">&quot;/../local_server/server_admin/lang/&quot;</span>.$in_lang_enum.<span class="stringliteral">&quot;/name.txt&quot;</span>)) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                    <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a> = $in_lang_enum;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            } elseif (isset(<a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>) &amp;&amp; is_array(<a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>) &amp;&amp; count(<a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>) &amp;&amp; isset(<a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>[<span class="stringliteral">&#39;lang_enum&#39;</span>])) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                $lang_name = <a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>[<span class="stringliteral">&#39;lang_enum&#39;</span>];</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                </div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                <span class="keywordflow">if</span> (file_exists(dirname(__FILE__).<span class="stringliteral">&quot;/../local_server/server_admin/lang/&quot;</span>.$lang_name.<span class="stringliteral">&quot;/name.txt&quot;</span>)) {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                    <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a> = $lang_name;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            } elseif (isset($_SESSION) &amp;&amp; is_array($_SESSION) &amp;&amp; isset($_SESSION[<span class="stringliteral">&#39;lang_enum&#39;</span>])) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                $lang_name = $_SESSION[<span class="stringliteral">&#39;lang_enum&#39;</span>];</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                </div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                <span class="keywordflow">if</span> (isset(<a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>) &amp;&amp; is_array(<a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>)) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    <a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>[<span class="stringliteral">&#39;lang_enum&#39;</span>] = $in_lang_enum;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                </div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                <span class="keywordflow">if</span> (file_exists(dirname(__FILE__).<span class="stringliteral">&quot;/../local_server/server_admin/lang/&quot;</span>.$lang_name.<span class="stringliteral">&quot;/name.txt&quot;</span>)) {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                    <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a> = $lang_name;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            </div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <span class="keywordflow">if</span> (isset($_SESSION) &amp;&amp; is_array($_SESSION)) {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                $_SESSION[<span class="stringliteral">&#39;lang_enum&#39;</span>] = <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            </div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            $this-&gt;_local_type_lang_enum = <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            $dh = opendir(dirname(__FILE__).<span class="stringliteral">&#39;/../local_server/server_admin/lang/&#39;</span>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            $server_lang_names = array();</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            </div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">if</span> ($dh) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                <span class="keywordflow">while</span> (<span class="keyword">false</span> !== ($enum = readdir($dh))) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    $file_path = dirname(dirname(__FILE__)).<span class="stringliteral">&quot;/local_server/server_admin/lang/$enum/name.txt&quot;</span>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                    <span class="keywordflow">if</span> (file_exists($file_path)) {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                        $server_lang_names[$enum] = trim(file_get_contents($file_path));</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                    }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                    </div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                closedir($dh);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            </div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            uksort($server_lang_names, <span class="stringliteral">&#39;c_comdef_server::ServerLangSortCallback&#39;</span>);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            </div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            $this-&gt;_server_lang_names = $server_lang_names;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="keywordflow">if</span> (isset($format_lang_names) &amp;&amp; is_array($format_lang_names)) {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                $this-&gt;_format_lang_names = $format_lang_names;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                $this-&gt;_format_lang_names = [];</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            $this-&gt;Initialize();</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        } <span class="keywordflow">catch</span> (Exception $err) {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <span class="keywordflow">throw</span> ( $err );</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    </div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">    /** \brief This is a callback to sort the server languages.</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">               The default server language will always be first, and</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">               the rest will be sorted alphabetically.</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">        \returns an integer. -1 if goes before b, 1 if otherwise, 0 if neither.</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a5ea3da3a6c0ad16e5a181f4677482088">  245</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a5ea3da3a6c0ad16e5a181f4677482088">ServerLangSortCallback</a>(</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        $in_lang_a,</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        $in_lang_b</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    ) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        $server_lang = <a class="code" href="../../dd/d45/classc__comdef__server.html#a73c17efb58fc8625e47b151164c67ad4">c_comdef_server::GetServer</a>()-&gt;GetLocalLang();</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = 0;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        </div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">if</span> ($in_lang_a == $server_lang) {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = -1;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        } elseif ($in_lang_b == $server_lang) {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = 1;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = strncasecmp($in_lang_a, $in_lang_b, 3);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            </div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    </div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">    /** \brief This reads the Formats, Meeting and Service Entity IDs.</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a87b5e80080e1cf9c1d87023a79579f79">  268</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a87b5e80080e1cf9c1d87023a79579f79">Initialize</a>()</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        $this-&gt;ReadUsers();</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        $this-&gt;ReadServiceBodies();</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        $this-&gt;ReadServiceIDs();</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    </div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">    /** \brief Returns the Server Local Language.</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">        \returns a string, with the language enum.</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ae616da4fd0cf424470a521890cdd43db">  282</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#ae616da4fd0cf424470a521890cdd43db">GetLocalLang</a>()</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a> = $this-&gt;_local_type_lang_enum;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        </div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a>) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            global  <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a> = <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        </div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="comment">// Should never happen.</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a>) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a> = <span class="stringliteral">&quot;en&quot;</span>;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        </div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a>;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    </div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">    /** \brief This is an internal function that reads in all of the</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">        stored formats, in all provided languages, and instantiates</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">        local objects for them.</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">        Access them with the GetFormatsObj() member function afterwards.</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a12295360c25567f939adf541515d606b">  307</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a12295360c25567f939adf541515d606b">ReadFormats</a>()</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        $this-&gt;_used_format_ids = array ();</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.self::GetFormatTableName_obj().<span class="stringliteral">&quot;` ORDER BY shared_id_bigint, lang_enum&quot;</span>;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        </div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        </div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">if</span> (is_array($rows) &amp;&amp; count($rows)) {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            $obj_array = array();<span class="comment"></span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">            /// Read in all the formats, and instantiate an array of objects.</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"></span>            <span class="keywordflow">foreach</span> ($rows as $rs) {<span class="comment"></span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">                /// We aren&#39;t allowed to have two formats for the same language, and the same shared ID.</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment"></span>                <span class="keywordflow">if</span> (!isset($rs[<span class="stringliteral">&#39;lang_enum&#39;</span>]) || !isset($obj_array[$rs[<span class="stringliteral">&#39;lang_enum&#39;</span>]]) || !isset($obj_array[$rs[<span class="stringliteral">&#39;lang_enum&#39;</span>]][$rs[<span class="stringliteral">&#39;shared_id_bigint&#39;</span>]]) || !is_object($obj_array[$rs[<span class="stringliteral">&#39;lang_enum&#39;</span>]][$rs[<span class="stringliteral">&#39;shared_id_bigint&#39;</span>]])) {<span class="comment"></span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">                    /// We use a combination of the language and the shared ID as the keys, which allows us to sort better.</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment"></span>                    $obj_array[$rs[<span class="stringliteral">&#39;lang_enum&#39;</span>]][$rs[<span class="stringliteral">&#39;shared_id_bigint&#39;</span>]] = <span class="keyword">new</span> <a class="code" href="../../d9/db6/classc__comdef__format.html">c_comdef_format</a>(</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                        $this,</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                        $rs[<span class="stringliteral">&#39;shared_id_bigint&#39;</span>],</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                        $rs[<span class="stringliteral">&#39;format_type_enum&#39;</span>],</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                        $rs[<span class="stringliteral">&#39;key_string&#39;</span>],</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                        $rs[<span class="stringliteral">&#39;icon_blob&#39;</span>],</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                        $rs[<span class="stringliteral">&#39;worldid_mixed&#39;</span>],</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                        $rs[<span class="stringliteral">&#39;lang_enum&#39;</span>],</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                        $rs[<span class="stringliteral">&#39;name_string&#39;</span>],</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                        $rs[<span class="stringliteral">&#39;description_string&#39;</span>]</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                    );</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <span class="comment"></span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">            /// Create our internal container, and give it the array.</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment"></span>            $this-&gt;_formats_obj = <span class="keyword">new</span> <a class="code" href="../../da/dd0/classc__comdef__formats.html">c_comdef_formats</a>($this, $obj_array);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            </div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <span class="comment">// Now that we have all our formats, we quickly read in the formats from all the meetings, and filter out just the ones that are actually used.</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            $sql = <span class="stringliteral">&quot;SELECT `formats` FROM `&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main`&quot;</span>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        </div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        </div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            <span class="keywordflow">if</span> (is_array($rows) &amp;&amp; count($rows)) {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                $format_codes = array();</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <span class="comment">// Read each of the format CSV lists, split the list, and then check each one in our tracker.</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                <span class="keywordflow">foreach</span> ($rows as $row) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                    $codes = explode(<span class="charliteral">&#39;,&#39;</span>, $row[<span class="stringliteral">&#39;formats&#39;</span>]);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                    <span class="keywordflow">foreach</span> ($codes as $code) {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                        $index = <span class="stringliteral">&quot;ID-$code&quot;</span>; <span class="comment">// We do this, because some PHP processors refuse to allow pure ints to be associative properties.</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                        <span class="keywordflow">if</span> (!isset($format_codes[$index])) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                            $format_codes[$index] = 1;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                            $format_codes[$index] = intval($format_codes[$index]) + 1; <span class="comment">// Do it this way, just in case the PHP interpreter gets funny about interpreting as int.</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                        }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                    }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                }</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                </div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                <span class="comment">// At this point format_codes is an associative array with only the formats actually used. The format code is in the key. We sort them so that the most frequent ones are at the beginning.</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <span class="comment">// We go through that, and extract our codes.</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                </div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                arsort($format_codes);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                $format_codes = array_keys($format_codes);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                </div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                <span class="keywordflow">foreach</span> ($format_codes as $format_id) {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                    $format_id_num = intval(preg_replace(<span class="stringliteral">&quot;|ID\-(.*)|&quot;</span>, <span class="stringliteral">&quot;$1&quot;</span>, $format_id));</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                    <span class="keywordflow">if</span> ($format_id_num) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                        array_push($this-&gt;_used_format_ids, $format_id_num);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                    }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    }</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    </div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">    /** \brief This is an internal function that reads in all of the</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">        stored users and instantiates local objects for them.</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">        Access them with the GetUsersObj() member function afterwards.</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a4ef4d7a8cf51c219a19dcbecb5a5925a">  381</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a4ef4d7a8cf51c219a19dcbecb5a5925a">ReadUsers</a>()</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="comment">// First, we make sure we explicitly delete any old ones.</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        </div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;_users_obj instanceof <a class="code" href="../../d4/d47/classc__comdef__users.html">c_comdef_users</a>) {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            $ar = $this-&gt;_users_obj-&gt;GetUsersArray();</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            </div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="keywordflow">foreach</span> ($ar as &amp;$u) {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                $u = null;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            }</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            </div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            $this-&gt;_users_obj = null;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        </div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.self::GetUserTableName_obj().<span class="stringliteral">&quot;` ORDER BY id_bigint&quot;</span>;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        </div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        </div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">if</span> (is_array($rows) &amp;&amp; count($rows)) {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            $obj_array = array();<span class="comment"></span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">            /// Read in all the users, and instantiate an array of objects.</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment"></span>            <span class="keywordflow">foreach</span> ($rows as $row) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                $time = explode(<span class="stringliteral">&quot; &quot;</span>, $row[<span class="stringliteral">&#39;last_access_datetime&#39;</span>]);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                $t0 = explode(<span class="stringliteral">&quot;-&quot;</span>, $time[0]);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                $t1 = explode(<span class="stringliteral">&quot;:&quot;</span>, $time[1]);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                $obj_array[$row[<span class="stringliteral">&#39;id_bigint&#39;</span>]] = <span class="keyword">new</span> <a class="code" href="../../d4/de6/classc__comdef__user.html">c_comdef_user</a>(</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                    $this,</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                    $row[<span class="stringliteral">&#39;id_bigint&#39;</span>],</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                    $row[<span class="stringliteral">&#39;user_level_tinyint&#39;</span>],</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                    $row[<span class="stringliteral">&#39;email_address_string&#39;</span>],</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                    $row[<span class="stringliteral">&#39;login_string&#39;</span>],</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                    $row[<span class="stringliteral">&#39;password_string&#39;</span>],</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                    $row[<span class="stringliteral">&#39;lang_enum&#39;</span>],</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                    $row[<span class="stringliteral">&#39;name_string&#39;</span>],</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                    $row[<span class="stringliteral">&#39;description_string&#39;</span>],</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                    $row[<span class="stringliteral">&#39;owner_id_bigint&#39;</span>],</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                    mktime($t1[0], $t1[1], $t1[2], $t0[1], $t0[2], $t0[0])</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                );</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="comment"></span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">            /// Create our internal container, and give it the array.</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment"></span>            $this-&gt;_users_obj = <span class="keyword">new</span> <a class="code" href="../../d4/d47/classc__comdef__users.html">c_comdef_users</a>($this, $obj_array);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    </div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">    /** \brief This is an internal function that reads in all of the</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">        stored service bodies and instantiates local objects for them.</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">        Access them with the GetServiceObj() member function afterwards.</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00433"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ab64625208195edc6469b9f0263ccf998">  433</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#ab64625208195edc6469b9f0263ccf998">ReadServiceBodies</a>()</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        $this-&gt;_service_obj_array = array();</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        </div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.self::GetServiceBodiesTableName_obj().<span class="stringliteral">&quot;` ORDER BY id_bigint&quot;</span>;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        </div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        </div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">if</span> (is_array($rows) &amp;&amp; count($rows)) {<span class="comment"></span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">            /// Read in all the service bodies, and instantiate an array of objects.</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment"></span>            <span class="keywordflow">foreach</span> ($rows as $row) {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                array_push($this-&gt;_service_obj_array, <span class="keyword">new</span> <a class="code" href="../../d1/dff/classc__comdef__service__body.html">c_comdef_service_body</a>(</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                    $this,</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                    $row[<span class="stringliteral">&#39;id_bigint&#39;</span>],</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                    $row[<span class="stringliteral">&#39;principal_user_bigint&#39;</span>],</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                    $row[<span class="stringliteral">&#39;editors_string&#39;</span>],</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                    $row[<span class="stringliteral">&#39;kml_file_uri_string&#39;</span>],</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                    $row[<span class="stringliteral">&#39;uri_string&#39;</span>],</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                    $row[<span class="stringliteral">&#39;name_string&#39;</span>],</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                    $row[<span class="stringliteral">&#39;description_string&#39;</span>],</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                    $row[<span class="stringliteral">&#39;lang_enum&#39;</span>],</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                    $row[<span class="stringliteral">&#39;worldid_mixed&#39;</span>],</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                    $row[<span class="stringliteral">&#39;sb_type&#39;</span>],</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                    $row[<span class="stringliteral">&#39;sb_owner&#39;</span>],</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                    $row[<span class="stringliteral">&#39;sb_owner_2&#39;</span>],</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                    $row[<span class="stringliteral">&#39;sb_meeting_email&#39;</span>]</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                ));</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            </div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="comment">// What we do here, is look for orphans, and assign them a parent ID of 0.</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="keywordflow">for</span> ($c = 0; $c &lt; count($this-&gt;_service_obj_array); $c++) {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                $parent_id = $this-&gt;_service_obj_array[$c]-&gt;GetOwnerID();</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                $found = <span class="keyword">false</span>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                <span class="keywordflow">for</span> ($i = 0; $i &lt; count($this-&gt;_service_obj_array); $i++) {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                    $id = $this-&gt;_service_obj_array[$i]-&gt;GetID();</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                    <span class="keywordflow">if</span> ($id == $parent_id) {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                        $found = <span class="keyword">true</span>;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                    }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                }</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                </div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                <span class="keywordflow">if</span> (!$found) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                    $this-&gt;_service_obj_array[$c]-&gt;SetOwnerID(0);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        }</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    </div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">    /** \brief This gathers the IDs of all the Service bodies that appear</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">        in meeting records. It is NOT a dump of the Service Bodies table.</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a1efa247dfce1d78a2fbb1d1578b4ddd5">  487</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a1efa247dfce1d78a2fbb1d1578b4ddd5">ReadServiceIDs</a>()</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    {</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT service_body_bigint FROM `&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main` ORDER BY service_body_bigint&quot;</span>;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        </div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        </div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="comment">// Just makes sure that old allocations are explicitly gone.</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        $this-&gt;_service_ids = null;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        $this-&gt;_service_ids = array();</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        </div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="keywordflow">if</span> (is_array($rows) &amp;&amp; count($rows)) {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            <span class="keywordflow">foreach</span> ($rows as $rs) {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                $key = $rs[<span class="stringliteral">&#39;service_body_bigint&#39;</span>];</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                $value = $key;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                $obj = self::GetServiceBodyByIDObj($key);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                <span class="keywordflow">if</span> ($obj instanceof <a class="code" href="../../d1/dff/classc__comdef__service__body.html">c_comdef_service_body</a>) {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                    $name = trim($obj-&gt;GetLocalName());</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                    <span class="keywordflow">if</span> ($name) {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                        $key = $name;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                    }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                $this-&gt;_service_ids[$key] = $value;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            }</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    }</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    </div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">    /** \brief Simply returns a reference to the contained Service Body</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">        array.</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">        \returns A reference to an array of c_comdef_service_body objects.</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00521"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a780b4ee113c0cedcffb626cf47c58e26">  521</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a780b4ee113c0cedcffb626cf47c58e26">GetServiceBodyArray</a>()</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    {</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">return</span> $this-&gt;_service_obj_array;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    </div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">    /** \brief Returns the Service Body objects in a nested, hierarchical</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">        array, with &quot;parents&quot; containing &quot;children.&quot;</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">        \returns A nested associative array of references to</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">        c_comdef_service_body objects.</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a90d9b02d24a84dd98a82a4ac05724030">  535</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a90d9b02d24a84dd98a82a4ac05724030">GetServiceBodyArrayHierarchical</a>()</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        $ret_array = $this-&gt;GetNestedServiceBodyArray(0);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">return</span> $ret_array;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    </div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">    /** \brief  This reads the Service bodies in hierarchical order, and</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">                returns them in a multi-dimensional array that reflects</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">                the hierarchy.</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">        \returns    A multidimensional associative array, containing the</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">                    Service bodies, as references, and structured in a manner</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">                    that reflects the hierarchical arrangement of the Service</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">                    bodies.</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">                    The &#39;object&#39; element contains a reference to the object itself,</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">                    and the &#39;dependents&#39; element (if it exists), reflects the</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">                    Service bodies that are &quot;owned&quot; by this one.</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a855ffc907cbf902c46d7066c1c7c1c08">  556</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a855ffc907cbf902c46d7066c1c7c1c08">GetNestedServiceBodyArray</a>( $in_id = 0 <span class="comment">///&lt; The ID of the &quot;top&quot; Service body. If not supplied, we start at the top.</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment"></span>                                        )</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        $ret_array = null;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        </div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keywordflow">if</span> ($in_id) {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            $sb = $this-&gt;GetServiceBodyByIDObj($in_id);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <span class="keywordflow">if</span> ($sb instanceof <a class="code" href="../../d1/dff/classc__comdef__service__body.html">c_comdef_service_body</a>) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                $id = $sb-&gt;GetID();</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                $ret_array[<span class="stringliteral">&#39;object&#39;</span>] = $sb;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordflow">foreach</span> ($this-&gt;_service_obj_array as &amp;$sb) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            <span class="keywordflow">if</span> ($sb instanceof <a class="code" href="../../d1/dff/classc__comdef__service__body.html">c_comdef_service_body</a>) {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                $id = $sb-&gt;GetID();</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                $sb_parent = intval($sb-&gt;GetOwnerID());</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                </div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                <span class="keywordflow">if</span> ($sb_parent == $in_id) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                    $ret_array[<span class="stringliteral">&#39;dependents&#39;</span>][$id] = $this-&gt;GetNestedServiceBodyArray($id);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            }</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        }</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        </div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keywordflow">return</span> $ret_array;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    </div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">    /** \brief Simply returns a reference to the formats container.</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">        \returns A reference to the formats container object.</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00591"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a4f7cef36fdf0503354da638f43522a02">  591</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a4f7cef36fdf0503354da638f43522a02">GetFormatsObj</a>()</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="keywordflow">if</span> (!$this-&gt;_formats_obj) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            $this-&gt;ReadFormats();</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        </div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="keywordflow">return</span> $this-&gt;_formats_obj;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    </div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">    /** \brief Simply returns an array of the format objects.</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">        \returns An array of c_comdef_format objects.</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00607"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a44224133d26aad5202737edf11c29c71">  607</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a44224133d26aad5202737edf11c29c71">GetFormatsArray</a>()</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="keywordflow">return</span> ($this-&gt;GetFormatsObj() instanceof <a class="code" href="../../da/dd0/classc__comdef__formats.html">c_comdef_formats</a>) ? $this-&gt;GetFormatsObj()-&gt;GetFormatsArray() : null;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    }</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    </div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">    /** \brief Simply returns an array of the format objects used by the meetings (no unused ones).</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">        \returns An array of c_comdef_format objects.</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00619"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a6c7ba55e9fcb3e85dc686c66c64bf89f">  619</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a6c7ba55e9fcb3e85dc686c66c64bf89f">GetUsedFormatsArray</a>()</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        $formats_array = $this-&gt;GetFormatsArray();</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        $all_formats = $formats_array[$this-&gt;GetLocalLang()];</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        </div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keywordflow">if</span> (is_array($all_formats) &amp;&amp; count($all_formats) &amp;&amp; is_array($this-&gt;GetUsedFormatIDs()) &amp;&amp; count($this-&gt;GetUsedFormatIDs())) {</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = array();</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            </div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            <span class="keywordflow">foreach</span> ($all_formats as $format) {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                <span class="keywordflow">if</span> (in_array($format-&gt;GetSharedID(), $this-&gt;GetUsedFormatIDs())) {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                    <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>[$format-&gt;GetSharedID()] = $format;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            }</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        }</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            </div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    }</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    </div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">    /** \brief Return the shared IDs of the formats actually used by the contained meetings.</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">               This can be used to avoid showing format codes that are not relevant to the database.</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">        \returns an array of Int, with the ones most frequently represented at the top.</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00646"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a94da03d7e33a277d01058ffae0e5ce64">  646</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a94da03d7e33a277d01058ffae0e5ce64">GetUsedFormatIDs</a>()</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    {</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordflow">if</span> (!$this-&gt;_used_format_ids) {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            $this-&gt;ReadFormats();</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        </div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordflow">return</span> $this-&gt;_used_format_ids;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    }</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    </div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">    /** \brief Simply returns the stored service IDs.</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">        \returns a reference to the array containing all the Service entity IDs.</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">        NOTE: These are IDs that appear in meetings, and may not reflect those in the Server.</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00663"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#afa62ec86de9ac0144631b0a9a1a2a70f">  663</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#afa62ec86de9ac0144631b0a9a1a2a70f">GetServiceIDs</a>()</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">return</span> $this-&gt;_service_ids;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    </div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">    /** \brief Simply returns the stored service IDs for ALL Service Bodies.</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">        \returns a reference to the array containing all the Service entity IDs. Null if none.</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">        NOTE: These are ALL IDs that appear (even ones not used for meetings).</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00676"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a1525bb88596daf3163f1422b4e36bd9e">  676</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a1525bb88596daf3163f1422b4e36bd9e">GetAllServiceIDs</a>()</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        $ar = $this-&gt;GetServiceBodyArray();</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        </div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="keywordflow">if</span> (is_array($ar) &amp;&amp; count($ar)) {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            <span class="keywordflow">foreach</span> ($ar as &amp;$sb) {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                <span class="keywordflow">if</span> ($sb instanceof <a class="code" href="../../d1/dff/classc__comdef__service__body.html">c_comdef_service_body</a>) {</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                    $key = $sb-&gt;GetID();</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                    $value = $key;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                    $name = trim($sb-&gt;GetLocalName());</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                    <span class="keywordflow">if</span> ($name) {</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                        $key = $name;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                    }</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                        </div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                    <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>[$key] = $value;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                }</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        }</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        </div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    </div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">    /** \brief This creates a new meeting that is an exact duplicate of</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">        the object for the meeting whose ID is passed in. The new meeting</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">        has a new ID, and is unpublished.</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">        \returns an integer, with the ID of the new meeting. 0 If it fails.</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00709"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a9c42a3248fd6e18a65fed16449286c02">  709</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a9c42a3248fd6e18a65fed16449286c02">DuplicateMeetingID</a>( $in_meeting_id <span class="comment">///&lt; The ID of the meeting to be copied.</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment"></span>                                        )</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = 0;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        </div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        $meeting_to_copy = self::GetOneMeeting($in_meeting_id);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        </div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="keywordflow">if</span> ($meeting_to_copy instanceof <a class="code" href="../../d9/dcc/classc__comdef__meeting.html">c_comdef_meeting</a>) {</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            $copy = self::DuplicateMeetingObj($meeting_to_copy);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            </div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            <span class="keywordflow">if</span> ($copy instanceof <a class="code" href="../../d9/dcc/classc__comdef__meeting.html">c_comdef_meeting</a>) {</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = $copy-&gt;GetID();</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            }</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        }</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        </div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    }</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    </div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment">    /** \brief This creates a new meeting that is an exact duplicate of</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">        the object passed in. The new meeting has a new ID, and is unpublished.</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">        \returns a reference to a c_comdef_meeting object, representing the new meeting. Null if it fails.</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00735"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a1d1e28b48bff6d5f002b613e2463178d">  735</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a1d1e28b48bff6d5f002b613e2463178d">DuplicateMeetingObj</a>( $in_meeting_obj   <span class="comment">///&lt; A reference to the meeting object to be copied.</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment"></span>                                        )</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        $new_meeting =  null;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        </div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keywordflow">if</span> ($in_meeting_obj instanceof <a class="code" href="../../d9/dcc/classc__comdef__meeting.html">c_comdef_meeting</a>) {</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            $meeting_data = $in_meeting_obj-&gt;GetMeetingData();</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            $meeting_data[<span class="stringliteral">&#39;id_bigint&#39;</span>] = 0;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            $meeting_data[<span class="stringliteral">&#39;published&#39;</span>] = 0;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            $meeting_data[<span class="stringliteral">&#39;copy&#39;</span>] = $in_meeting_obj-&gt;GetID();</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;            </div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            $new_meeting = <span class="keyword">new</span> <a class="code" href="../../d9/dcc/classc__comdef__meeting.html">c_comdef_meeting</a>(self::GetServer(), $meeting_data);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            </div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            <span class="keywordflow">if</span> ($new_meeting instanceof <a class="code" href="../../d9/dcc/classc__comdef__meeting.html">c_comdef_meeting</a>) {</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                $new_meeting-&gt;UpdateToDB();</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            }</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        }</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        </div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="keywordflow">return</span> $new_meeting;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    }</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    </div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">    /** \brief Gets an unused ID from the end of the table and</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">        returns it. It also sets that ID into the table AUTO_INCREMENT,</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">        so it can&#39;t get re-used.</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">        \returns an integer, containing that ID.</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00765"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a60704182248446d64b9f8d55954ea733">  765</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a60704182248446d64b9f8d55954ea733">GetNewMeetingID</a>()</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        include(dirname(__FILE__).<span class="stringliteral">&quot;/config/get-config.php&quot;</span>);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        </div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="keywordflow">try</span> {</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            $sql = <span class="stringliteral">&quot;SHOW TABLE STATUS LIKE &#39;&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main&#39;&quot;</span>;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql, array());</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <span class="keywordflow">if</span> (is_array($rows) &amp;&amp; count($rows)) {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                $table_row = <span class="stringliteral">&#39;auto_increment&#39;</span>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                </div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                <span class="keywordflow">if</span> (!isset($rows[0][$table_row])) {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                    $table_row = <span class="stringliteral">&#39;Auto_increment&#39;</span>;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                }</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                </div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                $max_id = intval($rows[0][$table_row]) + 1;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            }</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            </div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            $sql = <span class="stringliteral">&quot;ALTER TABLE `&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main` AUTO_INCREMENT=&quot;</span>. intval($max_id);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    </div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a703536f3e137679639f4687b45dd115c">c_comdef_dbsingleton::preparedExec</a>($sql);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        } <span class="keywordflow">catch</span> (Exception $ex) {</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            global  <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a03be16d09ad380de768c427fd6862ce2">$_COMDEF_DEBUG</a>;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            </div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a03be16d09ad380de768c427fd6862ce2">$_COMDEF_DEBUG</a>) {</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                echo <span class="stringliteral">&quot;Exception Thrown in c_comdef_server::GetNewMeetingID()!&lt;br /&gt;&quot;</span>;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                var_dump($ex);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            }</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <span class="keywordflow">throw</span> ( $ex );</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        }</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        </div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="keywordflow">return</span> --$max_id;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    }</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    </div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment">    /** \brief Creates a new, relatively empty meeting in the database,</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">        with no data fields and minimal information.</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">        \returns the ID of the meeting. Null is it failed.</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00806"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a6f7213b38b189bdfdf39248f1f64190a">  806</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a6f7213b38b189bdfdf39248f1f64190a">AddNewMeeting</a>(</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        $in_service_body_bigint,    <span class="comment">///&lt; The ID of the Service Body that &quot;owns&quot; this meeting.</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment"></span>        $in_weekday_tinyint,        <span class="comment">///&lt; The index of the weekday on which the meeting is held (0 = Sunday, 6 = Saturday).</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment"></span>        $in_start_time_int,         <span class="comment">///&lt; The time, in standard PHP Epoch time, at which the meeting starts.</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment"></span>        $in_lang_enum               <span class="comment">///&lt; The language for the meeting.</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        $id = null;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        </div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keywordflow">if</span> (!$in_lang_enum) {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            $in_lang_enum = self::GetServer()-&gt;GetLocalLang();</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        }</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        </div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <span class="keywordflow">if</span> (!$in_lang_enum) {</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            global  <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a>;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            $in_lang_enum = <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a>;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        }</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        </div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        <span class="comment">// Should never happen.</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <span class="keywordflow">if</span> (!$in_lang_enum) {</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            $in_lang_enum = <span class="stringliteral">&quot;en&quot;</span>;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        }</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        $meeting_data = array ( <span class="stringliteral">&#39;service_body_bigint&#39;</span>=&gt;intval($in_service_body_bigint), <span class="stringliteral">&#39;weekday_tinyint&#39;</span>=&gt;intval($in_weekday_tinyint), <span class="stringliteral">&#39;start_time&#39;</span>=&gt;intval($in_start_time_int), <span class="stringliteral">&#39;lang_enum&#39;</span>=&gt;$in_lang_enum );</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        </div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        $new_meeting = <span class="keyword">new</span> <a class="code" href="../../d9/dcc/classc__comdef__meeting.html">c_comdef_meeting</a>(self::GetServer(), $meeting_data);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        </div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="keywordflow">if</span> ($new_meeting instanceof <a class="code" href="../../d9/dcc/classc__comdef__meeting.html">c_comdef_meeting</a>) {</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            $my_localized_strings = self::GetServer()-&gt;GetLocalStrings();</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            $data =&amp; $new_meeting-&gt;GetMeetingData();</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            $data[<span class="stringliteral">&#39;longitude&#39;</span>] = floatval($my_localized_strings[<span class="stringliteral">&#39;search_spec_map_center&#39;</span>][<span class="stringliteral">&#39;longitude&#39;</span>]);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            $data[<span class="stringliteral">&#39;latitude&#39;</span>] = floatval($my_localized_strings[<span class="stringliteral">&#39;search_spec_map_center&#39;</span>][<span class="stringliteral">&#39;latitude&#39;</span>]);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            </div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            $new_meeting-&gt;UpdateToDB();</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            $id = $new_meeting-&gt;GetID();</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        }</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        </div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="keywordflow">return</span> $id;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    }</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    </div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment">    /** \brief Creates a new Service Body in the Database.</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">        \returns the ID of the Service Body. Null is it failed.</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00852"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a9152c50f77c3404c843cae960a2f0dfe">  852</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a9152c50f77c3404c843cae960a2f0dfe">AddNewServiceBody</a>(</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        $in_name_string,                <span class="comment">///&lt; The Service Body&#39;s Name</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment"></span>        $in_lang_enum,                  <span class="comment">///&lt; The language for the Service Body</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment"></span>        $in_principal_user_bigint,      <span class="comment">///&lt; The ID of the principal Service Body Administrator</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment"></span>        $in_description_string = null,  <span class="comment">///&lt; The description of the Service Body (Optional)</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment"></span>        $in_editors_string = null,      <span class="comment">///&lt; The IDs of the editors, as a CSV string (Optional)</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment"></span>        $in_uri_string = null,          <span class="comment">///&lt; The Service Body Web Site URI (Optional)</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment"></span>        $in_kml_uri_string = null,      <span class="comment">///&lt; The URI of a KML file that contains the Service Boundaries of the Service Body (Optional)</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment"></span>        $in_worldid_mixed = null,       <span class="comment">///&lt; The World ID (if one is available) (Optional)</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment"></span>        $in_sb_type = null,</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        <span class="comment">// An enum string, containing the Service Body type.</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="comment">// It can be one of the following:</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <span class="comment">//   - &#39;GR&#39;  Individual NA Group</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="comment">//   - &#39;AS&#39;  Area Service Committee</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="comment">//   - &#39;RS&#39;  Regional Service Committee</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <span class="comment">//   - &#39;MA&#39;  Metro Area</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <span class="comment">//   - &#39;ZF&#39;  Zonal Forum</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        <span class="comment">//   - &#39;WS&#39;  World Service Committee</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        $in_sb_owner = null             <span class="comment">///&lt; An integer. The ID of the Service Body that &quot;owns&quot; this Service Body.</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        $id = null;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        </div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="keywordflow">if</span> (!$in_lang_enum) {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            $in_lang_enum = self::GetServer()-&gt;GetLocalLang();</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        }</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        </div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="keywordflow">if</span> (!$in_lang_enum) {</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            global  <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a>;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            $in_lang_enum = <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a>;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        }</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        </div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="comment">// Should never happen.</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="keywordflow">if</span> (!$in_lang_enum) {</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            $in_lang_enum = <span class="stringliteral">&quot;en&quot;</span>;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        }</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        $service_body = <span class="keyword">new</span> <a class="code" href="../../d1/dff/classc__comdef__service__body.html">c_comdef_service_body</a>(self::GetServer(), null, $in_principal_user_bigint, $in_editors_string, $in_kml_uri_string, $in_uri_string, $in_name_string, $in_description_string, $in_lang_enum, $in_worldid_mixed, $in_sb_type, $in_sb_owner);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        </div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="keywordflow">if</span> ($service_body instanceof <a class="code" href="../../d1/dff/classc__comdef__service__body.html">c_comdef_service_body</a>) {</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                $service_body-&gt;UpdateToDB();</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                $id = $service_body-&gt;GetID();</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                $service_body = null;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                </div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                self::GetServer()-&gt;ReadServiceBodies();</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            } <span class="keywordflow">catch</span> (Exception $e) {  <span class="comment">// We just eat the exception and return null.</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                $id = null;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            }</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        }</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        </div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="keywordflow">return</span> $id;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    }</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    </div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">    /** \brief Creates a new user in the Database.</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">        \returns the ID of the user. Null is it failed.</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00912"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a59de00bcc3927d0a9dcff23a243e413e">  912</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a59de00bcc3927d0a9dcff23a243e413e">AddNewUser</a>(</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        $in_user_login,                 <span class="comment">///&lt; The login for this user</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment"></span>        $in_user_unencrypted_password,  <span class="comment">///&lt; The unencrypted password for this user</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment"></span>        $in_user_level,                 <span class="comment">///&lt; The level of this user</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment"></span>        $in_user_email,                 <span class="comment">///&lt; The email address for this user</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment"></span>        $in_name_string = null,         <span class="comment">///&lt; The user&#39;s Name (Optional)</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment"></span>        $in_description_string = null,  <span class="comment">///&lt; The description of the user (Optional)</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment"></span>        $in_lang_enum = null,           <span class="comment">///&lt; The language for the user (Optional -If not supplied, the server default will be used)</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment"></span>        $in_owner_id = -1               <span class="comment">///&lt; The id of the user that owns this user</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        $id = null;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        </div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="keywordflow">if</span> (!$in_lang_enum) {</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;            $in_lang_enum = self::GetServer()-&gt;GetLocalLang();</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        }</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        </div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="keywordflow">if</span> (!$in_lang_enum) {</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            global  <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a>;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            $in_lang_enum = <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a>;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        }</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        </div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="comment">// Should never happen.</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="keywordflow">if</span> (!$in_lang_enum) {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            $in_lang_enum = <span class="stringliteral">&quot;en&quot;</span>;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        }</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        </div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        $encrypted_password = <a class="code" href="../../d0/d45/comdef__utilityclasses_8inc_8php.html#a8b365331a60660a48fd7b9facc05b3e6">FullCrypt</a>(trim($in_user_unencrypted_password));</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        </div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        $user_obj = <span class="keyword">new</span> <a class="code" href="../../d4/de6/classc__comdef__user.html">c_comdef_user</a>(self::GetServer(), null, $in_user_level, $in_user_email, $in_user_login, $encrypted_password, $in_lang_enum, $in_name_string, $in_description_string, $in_owner_id);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        </div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <span class="keywordflow">if</span> ($user_obj instanceof <a class="code" href="../../d4/de6/classc__comdef__user.html">c_comdef_user</a>) {</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                $user_obj-&gt;UpdateToDB();</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                $id = $user_obj-&gt;GetID();</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                $user_obj = null;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;            </div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                self::GetServer()-&gt;ReadUsers();</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            } <span class="keywordflow">catch</span> (Exception $e) {  <span class="comment">// We just eat the exception and return null.</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                $id = null;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            }</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        }</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        </div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="keywordflow">return</span> $id;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    }</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    </div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">    /** \brief trims the changes for the given item.</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00962"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a1edde2490ac9c2562acb9d9286e56a09">  962</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a1edde2490ac9c2562acb9d9286e56a09">TrimChanges</a>(</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        $in_type,   <span class="comment">//</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="comment">// This is a string that contains the class of the change record.</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="comment">// - It can be:</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <span class="comment">//  - c_comdef_meeting</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        <span class="comment">//  - c_comdef_format</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <span class="comment">//  - c_comdef_user</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <span class="comment">//  - c_comdef_service_body</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        $in_id      <span class="comment">//&lt; The ID (an integer) for the item to be &quot;trimmed.&quot;</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    ) {</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        include(dirname(__FILE__).<span class="stringliteral">&quot;/config/get-config.php&quot;</span>);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        </div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        $change_limit = 0;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        </div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="keywordflow">if</span> ($in_type == <span class="stringliteral">&#39;c_comdef_meeting&#39;</span>) {</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            $change_limit = $change_depth_for_meetings;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        }</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        </div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <span class="keywordflow">if</span> ($change_limit) {</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            <span class="comment">// Get rid of oldest change first.</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            $changes = self::GetChangesFromIDAndType($in_type, $in_id);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            <span class="keywordflow">if</span> ($changes instanceof <a class="code" href="../../d2/d5a/classc__comdef__changes.html">c_comdef_changes</a>) {</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                $ch_objs = $changes-&gt;GetChangesObjects();</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                </div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                <span class="keywordflow">if</span> (is_array($ch_objs)) {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                    $counted = count($ch_objs);</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                    </div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                    <span class="keywordflow">while</span> ($counted-- &gt; $change_limit) {</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                        $ch_objs[$counted]-&gt;DeleteFromDB();</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                    }</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                </div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                $changes = null;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            }</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        }</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    }</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    </div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">    /** \brief Creates a new change record in the Database.</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment">        \returns the ID of the user. Null is it failed.</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01007"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ad136bfcff844a71802399e7fee064bf7"> 1007</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#ad136bfcff844a71802399e7fee064bf7">AddNewChange</a>(</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        $in_user_id_bigint,             <span class="comment">///&lt; Integer. The ID of the user making the change.</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment"></span>        $in_change_type,</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <span class="comment">// Enum. The type of change.</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <span class="comment">// Can be:</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="comment">//  - &#39;comdef_change_type_new&#39; - New object</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <span class="comment">//  - &#39;comdef_change_type_delete&#39; - Deleted the object</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <span class="comment">//  - &#39;comdef_change_type_change&#39; - Changed existing object</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <span class="comment">//  - &#39;comdef_change_type_rollback&#39; - Rolled existing object back to a previous version</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        $in_service_body_id_bigint,     <span class="comment">///&lt; Integer. The ID of the Service body for which the user was acting.</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="comment"></span>        $in_before_string,              <span class="comment">///&lt; Serialized object string. The &quot;before&quot; object, in serialized form.</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment"></span>        $in_after_string,               <span class="comment">///&lt; Serialized object string. The &quot;after&quot; object, in serialized form.</span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment"></span>        $in_object_class_string,        <span class="comment">///&lt; The class of the objects.</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment"></span>        $in_before_obj_id_bigint,       <span class="comment">///&lt; Integer, The ID of the Before Object.</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment"></span>        $in_after_obj_id_bigint,        <span class="comment">///&lt; Integer, The ID of the After Object.</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment"></span>        $in_before_obj_lang_enum = null,<span class="comment">///&lt; Enum, the language of the Before Object.</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment"></span>        $in_after_obj_lang_enum = null, <span class="comment">///&lt; Enum. The language of the After Object.</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment"></span>        $in_name_string = null,         <span class="comment">///&lt; The change&#39;s Name (Optional)</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment"></span>        $in_description_string = null,  <span class="comment">///&lt; The description of the change (Optional)</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment"></span>        $in_lang_enum = null            <span class="comment">///&lt; The language for the change (Optional -If not supplied, the server default will be used)</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        $id = null;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        </div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <span class="keywordflow">if</span> (!$in_lang_enum) {</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            $in_lang_enum = self::GetServer()-&gt;GetLocalLang();</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        }</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        </div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <span class="keywordflow">if</span> (!$in_lang_enum) {</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            global  <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a>;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            $in_lang_enum = <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a>;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        }</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        </div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        <span class="comment">// Should never happen.</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <span class="keywordflow">if</span> (!$in_lang_enum) {</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            $in_lang_enum = <span class="stringliteral">&quot;en&quot;</span>;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        }</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        </div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        $change_obj = <span class="keyword">new</span> <a class="code" href="../../d5/d79/classc__comdef__change.html">c_comdef_change</a>(self::GetServer(), $in_change_type, $in_user_id_bigint, $in_service_body_id_bigint, $in_before_string, $in_after_string, $in_object_class_string, $in_before_obj_id_bigint, $in_after_obj_id_bigint, $in_before_obj_lang_enum, $in_after_obj_lang_enum, null, $in_name_string, $in_description_string, $in_lang_enum);</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        </div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <span class="keywordflow">if</span> ($change_obj instanceof <a class="code" href="../../d5/d79/classc__comdef__change.html">c_comdef_change</a>) {</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                $change_obj-&gt;UpdateToDB();</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                $id = $change_obj-&gt;GetID();</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            } <span class="keywordflow">catch</span> (Exception $e) {  <span class="comment">// We just eat the exception and return null.</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                $id = null;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            }</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        </div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        $cid = $in_before_obj_id_bigint;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="keywordflow">if</span> (!$cid) {</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            $cid = $in_after_obj_id_bigint;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        }</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        </div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        self::TrimChanges($in_object_class_string, $cid);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        </div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        <span class="keywordflow">return</span> $id;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    }</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    </div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">    /** \brief Simply returns the namespace of this server.</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment">        \returns A string, with the namespace. The default is the server URI, with &quot;/CoMDEF&quot; appended.</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01073"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a4eb4438f20448c0224ae8a604dbb5be8"> 1073</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a4eb4438f20448c0224ae8a604dbb5be8">GetNamespace</a>()</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    {</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="keywordflow">return</span> self::$server_instance-&gt;_server_namespace;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    }</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    </div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment">    /** \brief Simply returns the name of the format table.</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment">        \returns A string, containing the name of the format table.</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01085"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#afe7b612404b54c38f1bc6494b8e97e89"> 1085</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#afe7b612404b54c38f1bc6494b8e97e89">GetFormatTableName_obj</a>()</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    {</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="keywordflow">return</span> self::$server_instance-&gt;_format_table_name;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    }</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    </div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment">    /** \brief Simply returns the name of the meetings table.</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment">        \returns A string, containing the name of the meetings table.</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01097"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a8450c4fe3bceec7693bac28220e90414"> 1097</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a8450c4fe3bceec7693bac28220e90414">GetMeetingTableName_obj</a>()</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    {</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <span class="keywordflow">return</span> self::$server_instance-&gt;_meeting_table_name;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    }</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    </div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment">    /** \brief Simply returns the name of the changes table.</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment">        \returns A string, containing the name of the changes table.</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01109"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ae337a189da53a17f62d1c4a506660837"> 1109</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#ae337a189da53a17f62d1c4a506660837">GetChangesTableName_obj</a>()</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    {</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <span class="keywordflow">return</span> self::$server_instance-&gt;_changes_table_name;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    }</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    </div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">    /** \brief Simply returns the name of the service bodies table.</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">        \returns A string, containing the name of the table.</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01121"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#acc69eb0964a73c37dae54ec241a806d8"> 1121</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#acc69eb0964a73c37dae54ec241a806d8">GetServiceBodiesTableName_obj</a>()</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    {</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        <span class="keywordflow">return</span> self::$server_instance-&gt;_service_bodies_table_name;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    }</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    </div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">    /** \brief Simply returns the name of the user table.</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment">        \returns A string, containing the name of the table.</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01133"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a5c2aec84c4db19d68e68eff6f071d272"> 1133</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a5c2aec84c4db19d68e68eff6f071d272">GetUserTableName_obj</a>()</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    {</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        <span class="keywordflow">return</span> self::$server_instance-&gt;_user_table_name;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    }</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01140"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ae9aaaaf8cd923665375b2e8d3ba91d2d"> 1140</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#ae9aaaaf8cd923665375b2e8d3ba91d2d">GetDatabaseVersionTableName_obj</a>()</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    {</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <span class="keywordflow">return</span> self::$server_instance-&gt;_db_version_table_name;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    }</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    </div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment">    /** \brief Get the local readable string for the server languages.</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="comment">        \returns a reference to the array of strings, containing the server languages in human-readable, local form.</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01152"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ab4668a6b078b8c9a6453d41a87672063"> 1152</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#ab4668a6b078b8c9a6453d41a87672063">GetServerLangs</a>()</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    {</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <span class="keywordflow">return</span> self::GetServer()-&gt;_server_lang_names;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    }</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01158"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a841c3c0994ca83f2eff19b0f19e20519"> 1158</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a841c3c0994ca83f2eff19b0f19e20519">GetFormatLangs</a>()</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    {</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keywordflow">return</span> array_merge(self::GetServer()-&gt;_server_lang_names, self::GetServer()-&gt;_format_lang_names);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    }</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment">    /** \brief Get the object list for the server&#39;s registered users.</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="comment">        \returns a reference to the internal c_comdef_users object.</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01168"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a5c44596d37933c7cf4fbfe99783bc75d"> 1168</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a5c44596d37933c7cf4fbfe99783bc75d">GetServerUsersObj</a>()</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    {</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        <span class="keywordflow">return</span> self::GetServer()-&gt;_users_obj;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    }</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    </div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment">    /** \brief Get the object for a single user, given an ID</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment">        \returns a reference to the internal c_comdef_user object for the user. Null if not found.</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01180"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ac3680235988649b237ff82be9541e3f3"> 1180</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#ac3680235988649b237ff82be9541e3f3">GetUserByIDObj</a>(</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        $in_user_id_bigint  <span class="comment">///&lt; An integer, containing the user ID.</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        <span class="keywordflow">if</span> (0 &lt; intval($in_user_id_bigint)) {</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;            $users_obj = self::GetServer()-&gt;_users_obj;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            </div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            <span class="keywordflow">if</span> ($users_obj instanceof <a class="code" href="../../d4/d47/classc__comdef__users.html">c_comdef_users</a>) {</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = $users_obj-&gt;GetUserByID($in_user_id_bigint);</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            }</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        }</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        </div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    }</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment">    /** \brief Given a login, looks up the user, and returns</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment">        a reference to that user object.</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment">        \returns a reference to a c_comdef_user object. Null if none.</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01204"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a71aa8f01938540d2cc5f512fdd167349"> 1204</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a71aa8f01938540d2cc5f512fdd167349">GetUserByLogin</a>(    $in_login      <span class="comment">///&lt; A string. The login ID.</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment"></span>                                    )</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    {</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        </div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        $users_obj = self::GetServer()-&gt;_users_obj;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        </div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <span class="keywordflow">if</span> ($users_obj instanceof <a class="code" href="../../d4/d47/classc__comdef__users.html">c_comdef_users</a>) {</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = $users_obj-&gt;GetUserByLogin($in_login);</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        }</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        </div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    }</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="comment">    /** \brief Given a login and password, looks up the user, and returns</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment">        a reference to that user object.</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="comment">        \returns a reference to a c_comdef_user object. Null if none.</span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01226"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a807aaf134d2579c752fd563906180a01"> 1226</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a807aaf134d2579c752fd563906180a01">GetUserByLoginCredentials</a>(</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        $in_login,      <span class="comment">///&lt; A string. The login ID.</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment"></span>        $in_password    <span class="comment">///&lt; A string. the ENCRYPTED password for the user.</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        </div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        $users_obj = self::GetServer()-&gt;_users_obj;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        </div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <span class="keywordflow">if</span> ($users_obj instanceof <a class="code" href="../../d4/d47/classc__comdef__users.html">c_comdef_users</a>) {</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = $users_obj-&gt;GetUserByLoginCredentials($in_login, $in_password);</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        }</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        </div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    }</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    </div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="comment">    /** \brief Get the current logged-in user, as a c_comdef_user instance.</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment">        \returns a reference to a c_comdef_user object, containing the user.</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment">        Null if it failed.</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01249"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a87b22d99b0f1ee81c5f35c339804536a"> 1249</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a87b22d99b0f1ee81c5f35c339804536a">GetCurrentUserObj</a>($in_is_ajax = <span class="keyword">false</span>  <span class="comment">///&lt; If it&#39;s an AJAX handler, this is true.</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment"></span>                                        )</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    {</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        include(dirname(__FILE__).<span class="stringliteral">&#39;/config/get-config.php&#39;</span>);</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    </div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        <span class="keywordflow">if</span> (!isset($_SESSION)) {</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            session_start();</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        }</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    </div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        <span class="keywordflow">if</span> (isset($_SESSION[$admin_session_name])) {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            list ( $login_id, $encrypted_password ) = explode(<span class="stringliteral">&quot;\t&quot;</span>, $_SESSION[$admin_session_name]);</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = self::GetUserByLoginCredentials($login_id, $encrypted_password);</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        }</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    }</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    </div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment">    /** \brief Find out if the user is a server admin.</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment">        \returns a boolean. True if the user is a server admin.</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01275"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#aa02af64499b8fb92bd8ce1b9eb671f87"> 1275</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#aa02af64499b8fb92bd8ce1b9eb671f87">IsUserServerAdmin</a>(</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        $in_user_obj = null,    <span class="comment">///&lt; A reference to a c_comdef_user object instance. If null, the current user will be checked.</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;<span class="comment"></span>        $in_is_ajax = <span class="keyword">false</span>     <span class="comment">///&lt; If it&#39;s an AJAX handler, we don&#39;t regenerate the session. Some browsers seem antsy about that.</span></div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    </div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        <span class="keywordflow">if</span> (!($in_user_obj instanceof <a class="code" href="../../d4/de6/classc__comdef__user.html">c_comdef_user</a>)) {</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;            $in_user_obj = self::GetCurrentUserObj($in_is_ajax);</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        }</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    </div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        <span class="keywordflow">if</span> ($in_user_obj instanceof <a class="code" href="../../d4/de6/classc__comdef__user.html">c_comdef_user</a>) {</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = ($in_user_obj-&gt;GetUserLevel() == <a class="code" href="../../df/d40/c__comdef__user_8class_8php.html#a45f118b0120941c6f0099e0467bea854">_USER_LEVEL_SERVER_ADMIN</a>);</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        }</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    </div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    }</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="comment">    /** \brief Find out if the user is a service body admin.</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="comment">    \returns a boolean. True if the user is a service body admin.</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01300"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a2df951b5c38081b5ab325298063f7c04"> 1300</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a2df951b5c38081b5ab325298063f7c04">IsUserServiceBodyAdmin</a>(</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        $in_user_obj = null,    <span class="comment">///&lt; A reference to a c_comdef_user object instance. If null, the current user will be checked.</span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="comment"></span>        $in_is_ajax = <span class="keyword">false</span>     <span class="comment">///&lt; If it&#39;s an AJAX handler, we don&#39;t regenerate the session. Some browsers seem antsy about that.</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        <span class="keywordflow">if</span> (!($in_user_obj instanceof <a class="code" href="../../d4/de6/classc__comdef__user.html">c_comdef_user</a>)) {</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;            $in_user_obj = self::GetCurrentUserObj($in_is_ajax);</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        }</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <span class="keywordflow">if</span> ($in_user_obj instanceof <a class="code" href="../../d4/de6/classc__comdef__user.html">c_comdef_user</a>) {</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = ($in_user_obj-&gt;GetUserLevel() == <a class="code" href="../../df/d40/c__comdef__user_8class_8php.html#a813a0d07af6641590beaf373222f51a2">_USER_LEVEL_SERVICE_BODY_ADMIN</a>);</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        }</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    }</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment">    /** \brief Given a login and password, looks up the user, and returns</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="comment">        an encrypted password for that user.</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="comment">        \returns a string, with the encrypted password. Null if none.</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01324"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a86c69c2d1310c2f67b4ca19c0c5cabd2"> 1324</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a86c69c2d1310c2f67b4ca19c0c5cabd2">GetEncryptedPW</a>(</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        $in_login,      <span class="comment">///&lt; A string. The login ID.</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment"></span>        $in_password    <span class="comment">///&lt; A string. the UNENCRYPTED password for the user.</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    </div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        $users_obj = self::GetServer()-&gt;_users_obj;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    </div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        <span class="keywordflow">if</span> ($users_obj instanceof <a class="code" href="../../d4/d47/classc__comdef__users.html">c_comdef_users</a>) {</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = $users_obj-&gt;GetEncryptedPW($in_login, $in_password);</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        }</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        </div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    }</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    </div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;<span class="comment">    /** \brief Get the objects for all users of a certain user level.</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment">        \returns an associative array, with references to the c_comdef_user objects for the relevant users as values, and the user IDs as keys. Null if not found.</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01346"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a187bca7f75b1f35fc086ea89c33edd54"> 1346</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a187bca7f75b1f35fc086ea89c33edd54">GetUsersByLevelObj</a>(</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        $in_user_level_bigint,  <span class="comment">///&lt; An integer, containing the user level.</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment"></span>        $in_or_higher = <span class="keyword">false</span>,  <span class="comment">///&lt; A Boolean. Set this to true to get all users of the given level or higher (numerically lower). Default is false, so only users of the exact level are given.</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="comment"></span>        $in_include_disabled = <span class="keyword">false</span>    <span class="comment">///&lt; A Boolean. Set this to true to allow disabled users to be included.</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        $ret_array = null;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            </div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        $users_obj = self::GetServer()-&gt;_users_obj;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        </div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        <span class="keywordflow">if</span> ($users_obj instanceof <a class="code" href="../../d4/d47/classc__comdef__users.html">c_comdef_users</a>) {</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            $user_array = $users_obj-&gt;GetUsersArray();</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;            </div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;            <span class="keywordflow">foreach</span> ($user_array as &amp;$user_obj) {</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                <span class="keywordflow">if</span> (($user_obj-&gt;GetUserLevel() &gt; 0) &amp;&amp; ($in_include_disabled || ($user_obj-&gt;GetUserLevel() != <a class="code" href="../../df/d40/c__comdef__user_8class_8php.html#a65106dc8c1c3bcd5c97f95a66caccf51">_USER_LEVEL_DISABLED</a>)) &amp;&amp; (($user_obj-&gt;GetUserLevel() == $in_user_level_bigint) || ($in_or_higher &amp;&amp; ($user_obj-&gt;GetUserLevel() &lt; $in_user_level_bigint)))) {</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;                    $ret_array[$user_obj-&gt;GetID()] = $user_obj;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                }</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            }</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        }</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        </div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        <span class="keywordflow">return</span> $ret_array;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    }</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    </div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">    /** \brief Get the object for a single service body, given an ID</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">        \returns a reference to the internal c_comdef_service_body object for the service body. Null if not found.</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01375"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#aac85daa361f03562762940c543139cc5"> 1375</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#aac85daa361f03562762940c543139cc5">GetServiceBodyByIDObj</a>(</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        $in_service_body_id_bigint  <span class="comment">///&lt; An integer, containing the service body ID.</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        <a class="code" href="../../d4/dae/config-bmlt-basic_8inc_8php.html#ad135cc8a47e55f0829949cf62214170f">$server</a> = self::GetServer();</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/dae/config-bmlt-basic_8inc_8php.html#ad135cc8a47e55f0829949cf62214170f">$server</a> instanceof <a class="code" href="../../dd/d45/classc__comdef__server.html">c_comdef_server</a>) {</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;            $array_obj = <a class="code" href="../../d4/dae/config-bmlt-basic_8inc_8php.html#ad135cc8a47e55f0829949cf62214170f">$server</a>-&gt;GetServiceBodyArray();</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;            <span class="keywordflow">if</span> (is_array($array_obj) &amp;&amp; count($array_obj)) {</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;                <span class="keywordflow">foreach</span> ($array_obj as &amp;$sb) {</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                    <span class="keywordflow">if</span> ($sb instanceof <a class="code" href="../../d1/dff/classc__comdef__service__body.html">c_comdef_service_body</a>) {</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                        $id = $sb-&gt;GetID();</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                        <span class="keywordflow">if</span> (intval($in_service_body_id_bigint) == intval($id)) {</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = $sb;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                        }</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                    }</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                }</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;            }</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        }</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    }</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    </div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment">    /** \brief Return the IDs of an entire Service body hierarchy.</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="comment">        \returns an array of integers. These are the Service body IDs.</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01404"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a23a30d1a55f8c04c958814222461d3eb"> 1404</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a23a30d1a55f8c04c958814222461d3eb">GetServiceBodyHierarchyIDs</a>(</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        $in_service_body_id_bigint  <span class="comment">///&lt; An integer, containing the service body ID.</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = array();</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        <a class="code" href="../../d4/dae/config-bmlt-basic_8inc_8php.html#ad135cc8a47e55f0829949cf62214170f">$server</a> = self::GetServer();</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/dae/config-bmlt-basic_8inc_8php.html#ad135cc8a47e55f0829949cf62214170f">$server</a> instanceof <a class="code" href="../../dd/d45/classc__comdef__server.html">c_comdef_server</a>) {</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;            $array_obj = <a class="code" href="../../d4/dae/config-bmlt-basic_8inc_8php.html#ad135cc8a47e55f0829949cf62214170f">$server</a>-&gt;GetServiceBodyArray();</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;            <span class="keywordflow">if</span> (is_array($array_obj) &amp;&amp; count($array_obj)) {</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                <span class="keywordflow">foreach</span> ($array_obj as &amp;$sb) {</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                    <span class="keywordflow">if</span> ($sb instanceof <a class="code" href="../../d1/dff/classc__comdef__service__body.html">c_comdef_service_body</a>) {</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                        $id = $sb-&gt;GetID();</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                        $parent_id = $sb-&gt;GetOwnerID();</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                        <span class="keywordflow">if</span> (intval($in_service_body_id_bigint) == intval($id)) {</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                            array_push(<a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>, $id);</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;                        } elseif (intval($in_service_body_id_bigint) == intval($parent_id)) {</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = array_merge(<a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>, self::GetServiceBodyHierarchyIDs($id));</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                        }</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                    }</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                }</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;            }</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        }</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    }</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    </div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment">    /** \brief Given an ID and a language for a format, as well as a code,</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="comment">        returns true if the code does NOT appear in the DB.</span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="comment">        \returns true, if the format key is unique for the language.</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="comment">        \throws an exception if the SQL query fails.</span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01439"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a9ae05141cae3c27651231e9f801e3d54"> 1439</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a9ae05141cae3c27651231e9f801e3d54">IsFormatKeyUnique</a>(</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        $in_key_string, <span class="comment">///&lt; A string. The key for which to search.</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="comment"></span>        $in_lang_enum   <span class="comment">///&lt; The language for the format.</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.self::GetFormatTableName_obj().<span class="stringliteral">&quot;` WHERE key_string=? AND lang_enum=?&quot;</span>;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        </div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql, array ( $in_key_string, $in_lang_enum ));</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <span class="keywordflow">if</span> (is_array($rows) &amp;&amp; count($rows)) {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        }</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        </div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    }</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    </div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;<span class="comment">    /** \brief Given an ID and a language for a format, it returns one instance.</span></div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment">        This will return one c_comdef_format object, with the parent this server</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment">        (Not a c_comdef_formats object).</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="comment">        \returns a new c_comdef_format object.Null if it failed.</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="comment">        \throws an exception if the SQL query fails.</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01465"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ade513497fc1b54fe69e3df738f5d330b"> 1465</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#ade513497fc1b54fe69e3df738f5d330b">GetOneFormat</a>(</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        $in_id_bigint,  <span class="comment">///&lt; The ID of the formatShared  (An integer)</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="comment"></span>        $in_lang_enum   <span class="comment">///&lt; The language for the format.</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.self::GetFormatTableName_obj().<span class="stringliteral">&quot;` WHERE shared_id_bigint=? AND lang_enum=? LIMIT 1&quot;</span>;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        </div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql, array ( $in_id_bigint, $in_lang_enum ));</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        <span class="keywordflow">if</span> (is_array($rows) &amp;&amp; count($rows)) {</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;            $rs = $rows[0];</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;            <span class="comment">// We use the static function in the c_comdef_meeting class to process the data for the meeting.</span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="../../d9/db6/classc__comdef__format.html">c_comdef_format</a>(</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;                self::GetServer(),</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                $rs[<span class="stringliteral">&#39;shared_id_bigint&#39;</span>],</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;                $rs[<span class="stringliteral">&#39;format_type_enum&#39;</span>],</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                $rs[<span class="stringliteral">&#39;key_string&#39;</span>],</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                $rs[<span class="stringliteral">&#39;icon_blob&#39;</span>],</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;                $rs[<span class="stringliteral">&#39;worldid_mixed&#39;</span>],</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                $rs[<span class="stringliteral">&#39;lang_enum&#39;</span>],</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;                $rs[<span class="stringliteral">&#39;name_string&#39;</span>],</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;                $rs[<span class="stringliteral">&#39;description_string&#39;</span>]</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;            );</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        }</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        </div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <span class="keywordflow">return</span> null;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    }</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    </div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;<span class="comment">    /** \brief Given an ID for a meeting, it returns true if the meeting currently exists.</span></div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;<span class="comment">        \returns true if the meeting exists; false, otherwise.</span></div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;<span class="comment">        \throws an exception if the SQL query fails.</span></div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01500"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a8a10eb8ac23c4a2ddbc46a1a89dade3e"> 1500</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a8a10eb8ac23c4a2ddbc46a1a89dade3e">DoesMeetingExist</a>(</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        $in_id_bigint   <span class="comment">///&lt; The ID of the meeting (An integer)</span></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT id_bigint FROM `&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main` WHERE &quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main.id_bigint=? LIMIT 1&quot;</span>;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        </div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        </div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql, array ( $in_id_bigint ));</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        <span class="keywordflow">if</span> (is_array($rows) &amp;&amp; count($rows)) {</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        }</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        </div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    }</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    </div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;<span class="comment">    /** \brief Given an ID for a meeting, it returns one instance.</span></div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;<span class="comment">        This will return one c_comdef_meeting object, with the parent this server</span></div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<span class="comment">        (Not a c_comdef_meetings object).</span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<span class="comment">        \returns a new c_comdef_meeting object.Null if it failed.</span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;<span class="comment">        \throws an exception if the SQL query fails.</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01527"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a1ed8d51fee14cd90a6bd9915580317b1"> 1527</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a1ed8d51fee14cd90a6bd9915580317b1">GetOneMeeting</a>(</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        $in_id_bigint,      <span class="comment">///&lt; The ID of the meeting (An integer)</span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;<span class="comment"></span>        $test_only = <span class="keyword">false</span>  <span class="comment">///&lt; If true, then this function will only return Boolean true or false (true if the meeting exists)</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main` WHERE &quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main.id_bigint=? LIMIT 1&quot;</span>;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        </div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql, array ( $in_id_bigint ));</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        <span class="keywordflow">if</span> (is_array($rows) &amp;&amp; count($rows)) {</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;            <span class="keywordflow">if</span> ($test_only) {</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;            }</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;            </div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;            <span class="keywordflow">foreach</span> ($rows as $row) {</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                <span class="comment">// We use the static function in the c_comdef_meeting class to process the data for the meeting.</span></div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                $meeting_row = <a class="code" href="../../d9/dcc/classc__comdef__meeting.html#a58d88c38c074ec1bcfd23a56510b4352">c_comdef_meeting::process_meeting_row</a>($row);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                <span class="comment">// One difference between this type of meeting and others, is that the parent is the server, not a c_comdef_meetngs object.</span></div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="../../d9/dcc/classc__comdef__meeting.html">c_comdef_meeting</a>(self::GetServer(), $meeting_row);</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;            }</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        }</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        </div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        <span class="keywordflow">if</span> ($test_only) {</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        }</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        </div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;        <span class="keywordflow">return</span> null;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    }</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    </div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;<span class="comment">    /** \brief Given an ID for a change, it returns one instance.</span></div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;<span class="comment">        This will return one c_comdef_change object, with the parent this server</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="comment">        (Not a c_comdef_changes object).</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;<span class="comment">        \returns a new c_comdef_change object.Null if it failed.</span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;<span class="comment">        \throws an exception if the SQL query fails.</span></div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01566"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ac92458278e876f92f802b14456dc950c"> 1566</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#ac92458278e876f92f802b14456dc950c">GetOneChange</a>(</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        $in_id_bigint   <span class="comment">///&lt; The ID of the change (An integer)</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        </div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.self::GetChangesTableName_obj().<span class="stringliteral">&quot;` WHERE id_bigint=? LIMIT 1&quot;</span>;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        </div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        $changes = self::GetServer()-&gt;GetChangesFromSQL($sql, array ( $in_id_bigint ));</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;        </div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;        <span class="keywordflow">if</span> ($changes instanceof <a class="code" href="../../d2/d5a/classc__comdef__changes.html">c_comdef_changes</a>) {</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;            $c_array = $changes-&gt;GetChangesObjects();</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;            </div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;            <span class="keywordflow">if</span> (is_array($c_array) &amp;&amp; count($c_array)) {</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                <span class="comment">// Just to spike an associative-only array. Silly, I know, but I&#39;ve had problems in the past. PHP is wacky.</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                <span class="keywordflow">foreach</span> ($c_array as $change) {</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;                    <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = $change;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                }</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;            }</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        }</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        </div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    }</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    </div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;<span class="comment">    /** \brief Given an ID for a user, it returns one instance.</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;<span class="comment">        This will return one c_comdef_user object, with the parent this server</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;<span class="comment">        (Not a c_comdef_users object).</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;<span class="comment">        \returns a new c_comdef_user object.Null if it failed.</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01600"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a6b5ef0901b88fe2542312fcc002c7ca0"> 1600</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a6b5ef0901b88fe2542312fcc002c7ca0">GetOneUser</a>(</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        $in_id_bigint   <span class="comment">///&lt; The ID of the user (An integer)</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        </div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.self::GetUserTableName_obj().<span class="stringliteral">&quot;` WHERE id_bigint=? LIMIT 1&quot;</span>;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        </div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql, array ( $in_id_bigint ));</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <span class="keywordflow">if</span> (is_array($rows) &amp;&amp; count($rows)) {</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;            <span class="keywordflow">foreach</span> ($rows as $row) {</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = <span class="keyword">new</span> <a class="code" href="../../d4/de6/classc__comdef__user.html">c_comdef_user</a>(</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                    <a class="code" href="../../dd/d45/classc__comdef__server.html#a73c17efb58fc8625e47b151164c67ad4">c_comdef_server::GetServer</a>(),</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;                    $row[<span class="stringliteral">&#39;id_bigint&#39;</span>],</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;                    $row[<span class="stringliteral">&#39;user_level_tinyint&#39;</span>],</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                    $row[<span class="stringliteral">&#39;email_address_string&#39;</span>],</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                    $row[<span class="stringliteral">&#39;login_string&#39;</span>],</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;                    $row[<span class="stringliteral">&#39;password_string&#39;</span>],</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;                    $row[<span class="stringliteral">&#39;lang_enum&#39;</span>],</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;                    $row[<span class="stringliteral">&#39;name_string&#39;</span>],</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                    $row[<span class="stringliteral">&#39;description_string&#39;</span>],</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;                    $row[<span class="stringliteral">&#39;owner_id_bigint&#39;</span>],</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;                    $row[<span class="stringliteral">&#39;last_access_datetime&#39;</span>]</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;                );</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;            }</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        }</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        </div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    }</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    </div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;<span class="comment">    /** \brief Get a series of meetings, each identified by an ID. This does</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="comment">        not filter by any of the other major criteria. It is designed to</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;<span class="comment">        facilitate direct access to meeting objects.</span></div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="comment">        \returns a new c_comdef_meetings object, containing the meetings. Null if it failed.</span></div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01638"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a11a015e9f4fcf09893c17d8a3e6504b3"> 1638</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a11a015e9f4fcf09893c17d8a3e6504b3">GetMeetingsByID</a>(</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;        $in_id_bigint_array <span class="comment">///&lt; The ID of the meetings (An array of integers)</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main` WHERE &quot;</span>;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        </div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        $first = <span class="keyword">true</span>;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;        </div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;        <span class="comment">// We don&#39;t actually care what the array contains. We&#39;re just counting them out.</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        <span class="keywordflow">foreach</span> ($in_id_bigint_array as $in_id_bigint) {</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;            <span class="keywordflow">if</span> (!$first) {</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;                $sql .= <span class="stringliteral">&quot; OR &quot;</span>;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;                $first = <span class="keyword">false</span>;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;            }</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;            </div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;            $sql .= <span class="stringliteral">&quot;(&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main.id_bigint=?)&quot;</span>;</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        }</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        </div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        <span class="keywordflow">return</span> self::GetMeetingsFromSQL($sql, $in_id_bigint_array);</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    }</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    </div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;<span class="comment">    /** \brief Given a set of one or more main criteria, returns a new</span></div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;<span class="comment">        c_comdef_meetings object with instances of those meetings, loaded</span></div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;<span class="comment">        from the database.</span></div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="comment">        This is the big kahuna. Meeting searches will all use this function</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;<span class="comment">        as a fulcrum for their searches.</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;<span class="comment">        NOTE TO UPTIGHT PROGRAMMERS: Yeah, it&#39;s a big, massive function</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;<span class="comment">        with a gazillion multi-purpose parameters.</span></div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;<span class="comment">        Learn to live with it. It works fine, and makes sense for the context.</span></div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;<span class="comment">        I could break it into a bunch of smaller functions, but that would</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;<span class="comment">        increase the complexity and reduce performance.</span></div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;<span class="comment">        \returns a new c_comdef_meetings object, containing the meetings.</span></div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;<span class="comment">        Null if it failed.</span></div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;<span class="comment">        \throws an exception if the SQL query fails.</span></div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01681"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a0eb6b57ebbcc37e85417f9dbbceaf549"> 1681</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a0eb6b57ebbcc37e85417f9dbbceaf549">GetMeetings</a>(</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;        $in_service_body_id_bigint_array = null,</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        <span class="comment">// An array of integers. Unlike the formats criteria, these do an OR function, as each record only has</span></div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;        <span class="comment">// one Service Body ID field, so each selection broadens the search. If there are no IDs selected, or</span></div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        <span class="comment">// only NOT IDs have been selected, then all the Service bodies will be searched, with the exception</span></div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;        <span class="comment">// of any that are selected as NOT (Negative value).</span></div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        $in_lang_filter_array = null,</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        <span class="comment">// If an element of this array is set to a language enum (&quot;en&quot;, &quot;es&quot;, etc.), it will only return meetings whose</span></div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        <span class="comment">// &#39;lang_enum&#39; field is of that value. If the array is null, all languages are searched. If the enum is preceded</span></div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        <span class="comment">// by a minus sign (-), then the language is filtered against in the search.</span></div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;        $in_weekday_tinyint_array = null,   <span class="comment">//  The weekday (An array of integer 1-Sunday, 7-Saturday). Optional. If null, all days will be returned.</span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        <span class="comment">// Each day chosen widens the search. If the weekday is negative, then that is specifically filtered against in</span></div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        <span class="comment">// the search.</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        $in_formats = null,</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        <span class="comment">// An array of integers. These are formats. The filtering will be an &quot;AND&quot; filtering, so qualified meetings</span></div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        <span class="comment">// must have all of the given formats. If a format is given as a negative number, it is a NOT. Make sure that</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        <span class="comment">// you don&#39;t have two versions of the same format code, as nothing will be returned.</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        $in_start_after = null,             <span class="comment">///&lt; An epoch time (seconds, as returned by time()), that denotes the earliest starting time allowed.</span></div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;<span class="comment"></span>        $in_start_before = null,            <span class="comment">///&lt; An epoch time (seconds, as returned by time()), that denotes the latest starting time allowed.</span></div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="comment"></span>        $in_end_before = null,              <span class="comment">///&lt; An epoch time (seconds, as returned by time()), that denotes the latest ending time allowed.</span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="comment"></span>        $in_min_duration = null,            <span class="comment">///&lt; The number of seconds a meeting should last as a minimum.</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment"></span>        $in_max_duration = null,            <span class="comment">///&lt; The number of seconds a meeting can last, at most.</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;<span class="comment"></span>        $in_search_rect_array = null,</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;        <span class="comment">// An array of floating-point numbers, representing longitude and latitude for a rectangle. This is used</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;        <span class="comment">// to restrict the search to a certain geographic area. It is an associative array:</span></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;        <span class="comment">// - [&#39;east&#39;] = longitude of the Eastern side of the rectangle</span></div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;        <span class="comment">// - [&#39;west&#39;] = longitude of the Western side of the rectangle</span></div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <span class="comment">// - [&#39;north&#39;] = latitude of the Northern side of the rectangle</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <span class="comment">// - [&#39;south&#39;] = latitude of the Southern side of the rectangle</span></div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        $in_first = null,</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;        <span class="comment">// A positive integer. This is for paged results. This is the index (0-based) of the first result to be returned.</span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        <span class="comment">// If $in_num is specified, and this is null, then it is assumed to be 0. If $in_num is null, then this is ignored.</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        &amp;$in_num = null,</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        <span class="comment">// A reference to a positive integer. This is the maximum number of results to return. If null, then there will be</span></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;        <span class="comment">// limits placed on the query.</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        <span class="comment">// If less than the maximum are returned, this is adjusted to reflect how many were returned.</span></div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;        <span class="comment">// NOTE: For non-MySQL and non-Oracle DBs, this may not equal the number of meetings returned in the function</span></div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;        <span class="comment">// result! This is because, for those databases, filtering by format code needs to be done after the actual</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        <span class="comment">// database query.</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        <span class="comment">// This will have the actual value of the number of results in the database query, so you can use this to</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        <span class="comment">// walk through the database. If you need the actual number of meetings returned, the best way to do this is</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        <span class="comment">// to do a c_comdef_meetings::GetNumMeetings() function on the returned object.</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        $in_published = 0</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        <span class="comment">// Indicates whether or not to search for published meetings. This only counts if the user is logged in.</span></div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        <span class="comment">// - -1    Search for ONLY unpublished meetings</span></div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;        <span class="comment">// -  0    Search for published and unpublished meetings.</span></div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;        <span class="comment">// -  1    Search for ONLY published meetings.</span></div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    ) {</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        $previous = <span class="keyword">false</span>;  <span class="comment">// This is used to tell subsequent tests to use AND instead of WHERE</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        </div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main`&quot;</span>;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;        $ar = array ( );</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        </div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        <span class="keywordflow">if</span> (is_array($in_service_body_id_bigint_array) &amp;&amp; count($in_service_body_id_bigint_array)) {</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;            $sql .= <span class="stringliteral">&quot; WHERE (&quot;</span>;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;            $previous = <span class="keyword">true</span>;</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;            $first = <span class="keyword">true</span>;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;            <span class="keywordflow">foreach</span> ($in_service_body_id_bigint_array as $service_body_id) {</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                $service_body_id = intval($service_body_id);</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                $sql_x = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;                <span class="keywordflow">if</span> ($service_body_id &lt; 0) {</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;                    $service_body_id = abs($service_body_id);</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                    $sql_x = <span class="stringliteral">&quot; NOT &quot;</span>;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                    </div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;                    <span class="keywordflow">if</span> (!$first) {</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;                        $sql_x = <span class="stringliteral">&quot; AND $sql_x&quot;</span>;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;                    }</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                    </div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;                    $first = <span class="keyword">true</span>;  <span class="comment">// This makes the OR get skipped.</span></div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;                }</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;                <span class="keywordflow">if</span> (!$first) {</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;                    $sql_x .= <span class="stringliteral">&quot; OR &quot;</span>;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;                    $first = <span class="keyword">false</span>;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;                }</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                    </div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;                $sql .= <span class="stringliteral">&quot;$sql_x(&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main.service_body_bigint=?)&quot;</span>;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;                array_push($ar, $service_body_id);</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;            }</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;            $sql .= <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        }</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        </div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        <span class="keywordflow">if</span> (is_array($in_lang_filter_array) &amp;&amp; count($in_lang_filter_array)) {</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;            <span class="keywordflow">if</span> ($previous) {</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;                $sql .= <span class="stringliteral">&quot; AND &quot;</span>;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;                $sql .= <span class="stringliteral">&quot; WHERE &quot;</span>;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                $previous = <span class="keyword">true</span>;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;            }</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;            </div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;            $sql .= <span class="stringliteral">&quot;(&quot;</span>;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;            </div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;            $first = <span class="keyword">true</span>;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;            <span class="keywordflow">foreach</span> ($in_lang_filter_array as $lang) {</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;                $not = preg_match(<span class="stringliteral">&quot;|^\-(.*)|&quot;</span>, $lang, $matches);</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                </div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                $sql_x = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;                <span class="keywordflow">if</span> ($not) {</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;                    $lang = $matches[1];</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;                    $sql_x = <span class="stringliteral">&quot; NOT &quot;</span>;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                    </div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;                    <span class="keywordflow">if</span> (!$first) {</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;                        $sql_x = <span class="stringliteral">&quot; AND $sql_x&quot;</span>;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;                    }</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;                    </div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;                    $first = <span class="keyword">true</span>;  <span class="comment">// This makes the OR get skipped.</span></div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;                }</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;                <span class="keywordflow">if</span> (!$first) {</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;                    $sql_x .= <span class="stringliteral">&quot; OR &quot;</span>;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;                    $first = <span class="keyword">false</span>;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                }</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;                    </div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;                $sql .= <span class="stringliteral">&quot;$sql_x(&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main.lang_enum=?)&quot;</span>;</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;                array_push($ar, $lang);</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;            }</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;            $sql .= <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        }</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        </div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;        <span class="keywordflow">if</span> (is_array($in_weekday_tinyint_array) &amp;&amp; count($in_weekday_tinyint_array)) {</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;            $valid = <span class="keyword">false</span>;</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;            </div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;            <span class="keywordflow">foreach</span> ($in_weekday_tinyint_array as $weekday) {</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;                <span class="keywordflow">if</span> (abs(intval($weekday)) &gt; 0 &amp;&amp; abs(intval($weekday)) &lt; 8) {</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                    $valid = <span class="keyword">true</span>;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;                }</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;            }</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;            </div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;            <span class="keywordflow">if</span> ($valid) {</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;                <span class="keywordflow">if</span> ($previous) {</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                    $sql .= <span class="stringliteral">&quot; AND &quot;</span>;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;                    $sql .= <span class="stringliteral">&quot; WHERE &quot;</span>;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                    $previous = <span class="keyword">true</span>;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;                }</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;                </div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;                $sql .= <span class="stringliteral">&quot;(&quot;</span>;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;                </div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;                $first = <span class="keyword">true</span>;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;                <span class="keywordflow">foreach</span> ($in_weekday_tinyint_array as $weekday) {</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;                    $weekday = intval($weekday);</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                    $sql_x = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                    <span class="keywordflow">if</span> ($weekday &lt; 0) {</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;                        $weekday = abs($weekday);</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;                        $sql_x = <span class="stringliteral">&quot; NOT &quot;</span>;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                        </div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;                        <span class="keywordflow">if</span> (!$first) {</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                            $sql_x = <span class="stringliteral">&quot; AND $sql_x&quot;</span>;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;                        }</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;                        </div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;                        $first = <span class="keyword">true</span>;  <span class="comment">// This makes the OR get skipped.</span></div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                    }</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    </div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                    <span class="keywordflow">if</span> (!$first) {</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                        $sql_x .= <span class="stringliteral">&quot; OR &quot;</span>;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                        $first = <span class="keyword">false</span>;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                    }</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;                    </div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;                    $sql .= <span class="stringliteral">&quot;$sql_x(&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main.weekday_tinyint=?)&quot;</span>;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;                    array_push($ar, $weekday-1);</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                }</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                $sql .= <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;            }</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        }</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        <span class="comment">// We explicitly set null entries, because we&#39;ve seen problems with using nulls.</span></div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        <span class="keywordflow">if</span> (null != $in_start_after) {</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;            $in_start_after = date(<span class="stringliteral">&quot;H:i:00&quot;</span>, intval($in_start_after));</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;            $in_start_after = <span class="stringliteral">&quot;00:00:00&quot;</span>;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        }</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        </div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        <span class="keywordflow">if</span> (null != $in_start_before) {</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;            $in_start_before = date(<span class="stringliteral">&quot;H:i:00&quot;</span>, intval($in_start_before));</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;            $in_start_before = <span class="stringliteral">&quot;00:00:00&quot;</span>;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        }</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        </div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;        <span class="keywordflow">if</span> (null != $in_end_before) {</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;            $in_end_before = intval($in_end_before);</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;            $in_end_before = null;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        }</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        </div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        <span class="keywordflow">if</span> (null != $in_min_duration) {</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;            $in_min_duration = date(<span class="stringliteral">&quot;H:i:00&quot;</span>, intval($in_min_duration));</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;            $in_min_duration = <span class="stringliteral">&quot;00:00:00&quot;</span>;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        }</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;        </div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        <span class="keywordflow">if</span> (null != $in_max_duration) {</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;            $in_max_duration = date(<span class="stringliteral">&quot;H:i:00&quot;</span>, intval($in_max_duration));</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;            $in_max_duration = <span class="stringliteral">&quot;00:00:00&quot;</span>;</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;        }</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        <span class="keywordflow">if</span> ($in_start_after != <span class="stringliteral">&quot;00:00:00&quot;</span>) {</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;            <span class="keywordflow">if</span> ($previous) {</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                $sql .= <span class="stringliteral">&quot; AND &quot;</span>;</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                $sql .= <span class="stringliteral">&quot; WHERE &quot;</span>;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                $previous = <span class="keyword">true</span>;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;            }</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;            $sql .= self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main.start_time&gt;?&quot;</span>;</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;            array_push($ar, $in_start_after);</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        }</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;        </div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        <span class="keywordflow">if</span> ($in_start_before != <span class="stringliteral">&quot;00:00:00&quot;</span>) {</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;            <span class="keywordflow">if</span> ($previous) {</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                $sql .= <span class="stringliteral">&quot; AND &quot;</span>;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                $sql .= <span class="stringliteral">&quot; WHERE &quot;</span>;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                $previous = <span class="keyword">true</span>;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;            }</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;            $sql .= self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main.start_time&lt;?&quot;</span>;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;            array_push($ar, $in_start_before);</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        }</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        </div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;        <span class="keywordflow">if</span> ($in_end_before != null) {</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;            <span class="keywordflow">if</span> ($previous) {</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;                $sql .= <span class="stringliteral">&quot; AND &quot;</span>;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;                $sql .= <span class="stringliteral">&quot; WHERE &quot;</span>;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;                $previous = <span class="keyword">true</span>;</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;            }</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;            $sql .= <span class="stringliteral">&quot;TIME_TO_SEC(&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main.start_time+&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main.duration_time)&lt;=?&quot;</span>;</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;            array_push($ar, $in_end_before);</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        }</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        </div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;        <span class="keywordflow">if</span> ($in_min_duration != <span class="stringliteral">&quot;00:00:00&quot;</span>) {</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;            <span class="keywordflow">if</span> ($previous) {</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;                $sql .= <span class="stringliteral">&quot; AND &quot;</span>;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;                $sql .= <span class="stringliteral">&quot; WHERE &quot;</span>;</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;                $previous = <span class="keyword">true</span>;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;            }</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;            $sql .= self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main.duration_time&gt;=?&quot;</span>;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;            </div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;            array_push($ar, $in_min_duration);</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;        }</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;        </div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;        <span class="keywordflow">if</span> ($in_max_duration != <span class="stringliteral">&quot;00:00:00&quot;</span>) {</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;            <span class="keywordflow">if</span> ($previous) {</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;                $sql .= <span class="stringliteral">&quot; AND &quot;</span>;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                $sql .= <span class="stringliteral">&quot; WHERE &quot;</span>;</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                $previous = <span class="keyword">true</span>;</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;            }</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;            $sql .= self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main.duration_time&lt;=?&quot;</span>;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;            </div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;            array_push($ar, $in_max_duration);</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;        }</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;        </div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;        <span class="keywordflow">if</span> (is_array($in_search_rect_array) &amp;&amp; isset($in_search_rect_array[<span class="stringliteral">&#39;east&#39;</span>]) &amp;&amp; isset($in_search_rect_array[<span class="stringliteral">&#39;west&#39;</span>]) &amp;&amp; isset($in_search_rect_array[<span class="stringliteral">&#39;north&#39;</span>]) &amp;&amp; isset($in_search_rect_array[<span class="stringliteral">&#39;south&#39;</span>])) {</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;            <span class="keywordflow">if</span> ($previous) {</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;                $sql .= <span class="stringliteral">&quot; AND &quot;</span>;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;                $sql .= <span class="stringliteral">&quot; WHERE &quot;</span>;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                $previous = <span class="keyword">true</span>;</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;            }</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;            </div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;            $east = floatval($in_search_rect_array[<span class="stringliteral">&#39;east&#39;</span>]);</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;            $west = floatval($in_search_rect_array[<span class="stringliteral">&#39;west&#39;</span>]);</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;            $north = floatval($in_search_rect_array[<span class="stringliteral">&#39;north&#39;</span>]);</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;            $south = floatval($in_search_rect_array[<span class="stringliteral">&#39;south&#39;</span>]);</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;            $sql .= <span class="stringliteral">&quot;(&quot;</span>;</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;            <span class="keywordflow">if</span> ($east &gt; $west) {</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;                $sql .= <span class="stringliteral">&quot;(longitude &gt;= $west) AND (longitude &lt;= $east)&quot;</span>;</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;                $sql .= <span class="stringliteral">&quot;(longitude &lt;= $west) AND (longitude &gt;= $east)&quot;</span>;</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;            }</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;                </div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;                $sql .= <span class="stringliteral">&quot; AND (latitude &lt;= $north) AND (latitude &gt;= $south)&quot;</span>;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;            $sql .= <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;        }</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        </div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d45/classc__comdef__server.html#a87b22d99b0f1ee81c5f35c339804536a">c_comdef_server::GetCurrentUserObj</a>() instanceof <a class="code" href="../../d4/de6/classc__comdef__user.html">c_comdef_user</a>) {</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;            <span class="comment">// Logged-in users can see both published and unpublished meetings.</span></div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;            <span class="keywordflow">if</span> ($in_published != 0) {</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;                <span class="keywordflow">if</span> ($previous) {</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;                    $sql .= <span class="stringliteral">&quot; AND &quot;</span>;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;                    $sql .= <span class="stringliteral">&quot; WHERE &quot;</span>;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;                    $previous = <span class="keyword">true</span>;</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;                }</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;                </div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;                <span class="keywordflow">if</span> ($in_published == -1) {</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;                    $sql .= <span class="stringliteral">&quot;(published=0)&quot;</span>;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;                    $sql .= <span class="stringliteral">&quot;(published=1)&quot;</span>;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;                }</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;            }</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        } <span class="keywordflow">else</span> <span class="comment">// If we are not logged in, we can only see published meetings.</span></div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;            {</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;            <span class="keywordflow">if</span> ($previous) {</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;                $sql .= <span class="stringliteral">&quot; AND &quot;</span>;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;                $sql .= <span class="stringliteral">&quot; WHERE &quot;</span>;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;                $previous = <span class="keyword">true</span>;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;            }</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;            </div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;            $sql .= <span class="stringliteral">&quot;(published=1)&quot;</span>;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        }</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;                </div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        </div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        <span class="keywordflow">if</span> (is_array($in_formats) &amp;&amp; count($in_formats)) {</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;            <span class="comment">// MySQL and Oracle allow the REGEXP test, but other DBs don&#39;t.</span></div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;            <span class="keywordflow">if</span> ((<span class="stringliteral">&#39;mysql&#39;</span> == <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a6a4ca0001516c08ef9e8c48165f98c84">c_comdef_dbsingleton::pdoInstance</a>()-&gt;getAttribute(PDO::ATTR_DRIVER_NAME))</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;                || (<span class="stringliteral">&#39;oracle&#39;</span> == <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a6a4ca0001516c08ef9e8c48165f98c84">c_comdef_dbsingleton::pdoInstance</a>()-&gt;getAttribute(PDO::ATTR_DRIVER_NAME)) ) {</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;                <span class="keywordflow">if</span> ($previous) {</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;                    $sql .= <span class="stringliteral">&quot; AND (&quot;</span>;</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;                    $sql .= <span class="stringliteral">&quot; WHERE (&quot;</span>;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;                }</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;                </div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;                $column = self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main.formats&quot;</span>;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;                </div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                $first = <span class="keyword">true</span>;</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;                </div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                <span class="keywordflow">foreach</span> ($in_formats as $format) {</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                    $format = trim($format);</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;                    </div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;                    <span class="keywordflow">if</span> ($format) {</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                        <span class="comment">// This is why we don&#39;t need to scrub the input. No SQL injection here.</span></div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;                        $format = intval($format);</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                        <span class="keywordflow">if</span> (!$first) {</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;                            $sql .= <span class="stringliteral">&quot; AND &quot;</span>;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;                            $first = <span class="keyword">false</span>;</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;                        }</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                        </div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;                        <span class="comment">// This is a test for if the format is a NOT.</span></div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                        <span class="keywordflow">if</span> ($format &lt; 0) {</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                            $format = abs($format);</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                            $sql .= <span class="stringliteral">&quot;NOT &quot;</span>;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                        }</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                        </div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                        $sql .= <span class="stringliteral">&quot;($column REGEXP&quot;</span>;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                        </div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                        <span class="comment">// Oracle uses REGEXP_LIKE</span></div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                        <span class="keywordflow">if</span> (<span class="stringliteral">&#39;oracle&#39;</span> == <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a6a4ca0001516c08ef9e8c48165f98c84">c_comdef_dbsingleton::pdoInstance</a>()-&gt;getAttribute(PDO::ATTR_DRIVER_NAME)) {</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;                            $sql .= <span class="stringliteral">&quot;_LIKE&quot;</span>;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;                        }</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;                        </div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;                        $sql .= <span class="stringliteral">&quot;&#39;(^|,)$format(,|\$)&#39;)&quot;</span>;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;                    }</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;                }</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;                </div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;                $sql .= <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;            } <span class="keywordflow">else</span> <span class="comment">// Non-MySQL, Non-Oracle servers don&#39;t have REGEX in their SQL, so we need to search by hand.</span></div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;                {</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;                $sql .= <span class="stringliteral">&quot; ORDER BY service_body_bigint, id_bigint&quot;</span>;</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;                <span class="keywordflow">if</span> (intval($in_num)) {</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;                    $in_first = intval($in_first);</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;                    $in_num = intval($in_num);</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                    $sql .= <span class="stringliteral">&quot; LIMIT $in_first, $in_num&quot;</span>;</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;                }</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;                </div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = self::GetMeetingsFromSQL($sql, $ar);</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                </div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> &amp;&amp; intval($in_num)) {</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                    $in_num = <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>-&gt;GetNumMeetings();</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                } elseif (intval($in_num)) {</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                    $in_num = 0;</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                }</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;                </div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = self::ParseMeetingsByFormats(<a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>, $in_formats);</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;            }</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;        }</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        </div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>) {</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;            $sql .= <span class="stringliteral">&quot; ORDER BY service_body_bigint, id_bigint&quot;</span>;</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;        </div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;            <span class="keywordflow">if</span> (intval($in_num)) {</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;                $in_first = intval($in_first);</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;                $in_num = intval($in_num);</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;                $sql .= <span class="stringliteral">&quot; LIMIT $in_first, $in_num&quot;</span>;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;            }</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = self::GetMeetingsFromSQL($sql, $ar);</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;            </div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;            <span class="keywordflow">if</span> (intval($in_num)) {</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;                $in_num = count(<a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>-&gt;GetMeetingObjects());</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;            }</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;            </div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> &amp;&amp; isset($east) &amp;&amp; isset($west) &amp;&amp; isset($north) &amp;&amp; isset($south)) {</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;                $center_lat = ($north + $south) / 2.0;</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;                $center_long = ($east + $west) / 2.0;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;                $meetings = <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>-&gt;GetMeetingObjects();</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;                <span class="keywordflow">foreach</span> ($meetings as &amp;$meeting) {</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;                    $dist = floatval(<a class="code" href="../../d2/d64/classc__comdef__meetings.html#a3aa9b7039befef3bfaa4d5d43dd13dd4">c_comdef_meetings::GetDistance</a>($center_lat, $center_long, $meeting-&gt;GetMeetingDataValue(<span class="stringliteral">&#39;latitude&#39;</span>), $meeting-&gt;GetMeetingDataValue(<span class="stringliteral">&#39;longitude&#39;</span>)));</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;                    $meeting-&gt;_distance_in_km = $dist;</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;                    $meeting-&gt;_distance_in_miles = $dist / 1.609344;</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;                    $meeting-&gt;AddDataField(<span class="stringliteral">&#39;distance_in_km&#39;</span>, <span class="stringliteral">&#39;distance_in_km&#39;</span>, $meeting-&gt;_distance_in_km, null, 0, <span class="keyword">true</span>);</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;                    $meeting-&gt;AddDataField(<span class="stringliteral">&#39;distance_in_miles&#39;</span>, <span class="stringliteral">&#39;distance_in_miles&#39;</span>, $meeting-&gt;_distance_in_miles, null, 0, <span class="keyword">true</span>);</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;                }</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;            }</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;        }</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    }</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    </div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;<span class="comment">    /** \brief Returns a c_comdef_meetings_object, containing all the meetings</span></div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;<span class="comment">        directly &quot;owned&quot; by the Service Body whose ID is submitted.</span></div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;<span class="comment">        \returns a new c_comdef_meetings object, containing the meetings.</span></div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;<span class="comment">        Null if it failed.</span></div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="comment">        \throws an exception if the SQL query fails.</span></div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02104"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a009e10216e09ea1d1d1fb46e6133d508"> 2104</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a009e10216e09ea1d1d1fb46e6133d508">GetMeetingsForAServiceBody</a>(</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;        $in_sb_id   <span class="comment">///&lt; An integer. The ID of the Service Body.</span></div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main` WHERE &quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main.service_body_bigint=? ORDER BY id_bigint&quot;</span>;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;        </div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;        <span class="keywordflow">return</span> self::GetMeetingsFromSQL($sql, array ( $in_sb_id ));</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    }</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    </div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;<span class="comment">    /** \brief Returns a c_comdef_meetings_object, containing all the meetings (Published and unpublished).</span></div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;<span class="comment">        \returns a new c_comdef_meetings object, containing the meetings.</span></div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;<span class="comment">        Null if it failed.</span></div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;<span class="comment">        \throws an exception if the SQL query fails.</span></div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02122"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#aa35269de3b20cfe21c160b6b5bd821d5"> 2122</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#aa35269de3b20cfe21c160b6b5bd821d5">GetAllMeetings</a>(</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;        &amp;$in_out_numResults,    <span class="comment">///&lt; This must be supplied. It is a pass-by-reference that indicates how many meetings are being returned.</span></div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;<span class="comment"></span>        $in_numResults = null,  <span class="comment">///&lt; This is how many results we want in this call.</span></div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;<span class="comment"></span>        $in_startIndex = null   <span class="comment">///&lt; This is the 0-based starting index</span></div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;        $in_out_numResults = 0;</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;        </div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;        <span class="keywordflow">if</span> (!isset($in_startIndex)) {</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;            $in_startIndex = 0;</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;        }</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;        </div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;        <span class="keywordflow">if</span> (isset($in_numResults)) {</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;            $in_numResults += $in_startIndex;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;            $in_startIndex = null;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;        }</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;        </div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main`&quot;</span>;</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;        </div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        <span class="keywordflow">if</span> ($in_startIndex || $in_numResults) {</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;            $sql .= <span class="stringliteral">&#39; LIMIT &#39;</span>;</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;            </div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;            $sql .= $in_startIndex.<span class="stringliteral">&#39;, &#39;</span>.$in_numResults;</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;        }</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = self::GetMeetingsFromSQL($sql);</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;     </div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> instanceof <a class="code" href="../../d2/d64/classc__comdef__meetings.html">c_comdef_meetings</a>) {</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;            $in_out_numResults = <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>-&gt;GetNumMeetings();</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;        }</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;            </div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    }</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    </div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;<span class="comment">    /** \brief This is an alternative to the MySQL REGEXP test. It will</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;<span class="comment">        go through all the meetings returned by a broad query, and remove</span></div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;<span class="comment">        any that do not contain all of the given formats.</span></div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;<span class="comment">        \returns the passed-in c_comdef_meetings object, containing the remaining meetings. Null if it failed.</span></div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02165"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ababcf318e384a4b289ee8b24598b1a38"> 2165</a></span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#ababcf318e384a4b289ee8b24598b1a38">ParseMeetingsByFormats</a>(</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        $in_meetings,   <span class="comment">///&lt; The result of c_comdef_server::GetMeetingsFromSQL()</span></div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;<span class="comment"></span>        $in_formats     <span class="comment">///&lt; An array of integers. These are formats. The filtering will be an &quot;AND&quot; filtering, so qualified meetings must have all of the given formats.</span></div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;        $meetings = $in_meetings-&gt;GetMeetingObjects();</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;        <span class="keywordflow">foreach</span> ($meetings as &amp;$meeting) {</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;            $data = $meeting-&gt;GetMeetingData();</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;            $formats = $data[<span class="stringliteral">&#39;formats&#39;</span>];</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;            $found = 0;</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;            <span class="keywordflow">foreach</span> ($formats as $key =&gt; $value) {</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;                <span class="keywordflow">if</span> (<span class="keyword">false</span> !== array_search(intval($key), $in_formats)) {</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;                    $found++;</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;                }</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;            }</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;            </div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;            <span class="comment">// If we didn&#39;t find them all, we nuke the meeting.</span></div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;            <span class="keywordflow">if</span> ($found != count($in_formats)) {</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;                $in_meetings-&gt;RemoveMeeting($meeting-&gt;GetID());</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;            }</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;        }</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;        </div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;        <span class="keywordflow">return</span> ( $in_meetings );</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    }</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    </div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;<span class="comment">    /** \brief  Returns a set of two coordinates that define a rectangle</span></div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="comment">                that encloses all of the meetings.</span></div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;<span class="comment">        \returns a dictionary, with the two coordinates.</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02197"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ac3c9e179a804d0730dcc6dac09b9926d"> 2197</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#ac3c9e179a804d0730dcc6dac09b9926d">GetCoverageArea</a>()</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    {</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT longitude, latitude FROM `&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main` WHERE `published`=&#39;1&#39;&quot;</span>;</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;        </div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;        </div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;        <span class="keywordflow">try</span> {</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;            $arr = array();</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;            $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql, $arr);</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;            <span class="keywordflow">if</span> (is_array($rows) &amp;&amp; count($rows)) {</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;                $nw_corner = array ( <span class="stringliteral">&quot;longitude&quot;</span> =&gt; <span class="keyword">false</span>, <span class="stringliteral">&quot;latitude&quot;</span> =&gt; <span class="keyword">false</span> );</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;                $se_corner = array ( <span class="stringliteral">&quot;longitude&quot;</span> =&gt; <span class="keyword">false</span>, <span class="stringliteral">&quot;latitude&quot;</span> =&gt; <span class="keyword">false</span> );</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;                <span class="keywordflow">foreach</span> ($rows as $row) {</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;                    $lon = max(-180.0, min(180.0, floatval($row[<span class="stringliteral">&quot;longitude&quot;</span>])));</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;                    $lat = max(-90.0, min(90.0, floatval($row[<span class="stringliteral">&quot;latitude&quot;</span>])));</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;                    <span class="keywordflow">if</span> (!(($lon == 0) &amp;&amp; ($lat == 0)) &amp;&amp; (abs($lat) &lt; 90)) {</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;                        <span class="keywordflow">if</span> ($nw_corner[<span class="stringliteral">&quot;longitude&quot;</span>] === <span class="keyword">false</span>) {</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;                            $nw_corner[<span class="stringliteral">&quot;longitude&quot;</span>] = $lon;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;                            <span class="comment">// OK. The IDL (International Date Line) gives us gas. We need to see if the two values are on either side of it.</span></div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;                            <span class="comment">// If so, then we&#39;ll need to reverse the longitude checks.</span></div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                            <span class="keywordflow">if</span> ((abs($lon) &gt; 90) &amp;&amp; (0 &lt;= $lon) &amp;&amp; (0 &gt; $nw_corner[<span class="stringliteral">&quot;longitude&quot;</span>])) {</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;                                $nw_corner[<span class="stringliteral">&quot;longitude&quot;</span>] = $lon;</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;                            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((abs($lon) &gt; 90) &amp;&amp; (0 &gt; $lon) &amp;&amp; (0 &lt;= $nw_corner[<span class="stringliteral">&quot;longitude&quot;</span>])) {</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;                                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;                            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                                $nw_corner[<span class="stringliteral">&quot;longitude&quot;</span>] = min($lon, $nw_corner[<span class="stringliteral">&quot;longitude&quot;</span>]);</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                            }</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;                        }</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;                        </div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                        <span class="keywordflow">if</span> ($se_corner[<span class="stringliteral">&quot;longitude&quot;</span>] === <span class="keyword">false</span>) {</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;                            $se_corner[<span class="stringliteral">&quot;longitude&quot;</span>] = $lon;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;                            <span class="keywordflow">if</span> ((abs($lon) &gt; 90) &amp;&amp; (0 &gt; $lon) &amp;&amp; (0 &lt;= $se_corner[<span class="stringliteral">&quot;longitude&quot;</span>])) {</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;                                $se_corner[<span class="stringliteral">&quot;longitude&quot;</span>] = $lon;</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((abs($lon) &gt; 90) &amp;&amp; (0 &lt;= $lon) &amp;&amp; (0 &gt; $se_corner[<span class="stringliteral">&quot;longitude&quot;</span>])) {</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;                                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;                            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;                                $se_corner[<span class="stringliteral">&quot;longitude&quot;</span>] = max($lon, $se_corner[<span class="stringliteral">&quot;longitude&quot;</span>]);</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;                            }</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                        }</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;                        </div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;                        <span class="keywordflow">if</span> ($nw_corner[<span class="stringliteral">&quot;latitude&quot;</span>] === <span class="keyword">false</span>) {</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;                            $nw_corner[<span class="stringliteral">&quot;latitude&quot;</span>] = $lat;</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;                            $nw_corner[<span class="stringliteral">&quot;latitude&quot;</span>] = max($lat, $nw_corner[<span class="stringliteral">&quot;latitude&quot;</span>]);</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;                        }</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                        </div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;                        <span class="keywordflow">if</span> ($se_corner[<span class="stringliteral">&quot;latitude&quot;</span>] === <span class="keyword">false</span>) {</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                            $se_corner[<span class="stringliteral">&quot;latitude&quot;</span>] = $lat;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                            $se_corner[<span class="stringliteral">&quot;latitude&quot;</span>] = min($lat, $se_corner[<span class="stringliteral">&quot;latitude&quot;</span>]);</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                        }</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;                    }</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                }</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;            }</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;                </div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>[<span class="stringliteral">&quot;nw_corner&quot;</span>] = $nw_corner;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>[<span class="stringliteral">&quot;se_corner&quot;</span>] = $se_corner;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;        } <span class="keywordflow">catch</span> (Exception $e) {</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;        }</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;            </div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    }</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;<span class="comment">    /** \brief Given an SQL statement and a value array (for PDO prepared</span></div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<span class="comment">        statements), return a new c_comdef_meetings object, loaded with the</span></div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;<span class="comment">        instances of the meetings that were returned from the query.</span></div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;<span class="comment">        \returns a new c_comdef_meetings object, containing the meetings. Null if it failed.</span></div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;<span class="comment">        \throws an exception if the SQL query fails.</span></div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02275"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a5332a6ee3f1beb04e8169320fb747e20"> 2275</a></span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a5332a6ee3f1beb04e8169320fb747e20">GetMeetingsFromSQL</a>(</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;        $in_sql,                <span class="comment">///&lt; The prepared statement SQL query</span></div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;<span class="comment"></span>        $in_value_array = null  <span class="comment">///&lt; An array of values for the prepared statement.</span></div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;        $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($in_sql, $in_value_array);</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;        </div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;        $meeting_data = array();</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;        $this_meetings_object = null;</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;        </div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;        <span class="keywordflow">if</span> (is_array($rows) &amp;&amp; count($rows)) {</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;            <span class="keywordflow">foreach</span> ($rows as $row) {</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;                <span class="comment">// We use the static function in the c_comdef_meeting class to process the data for the meeting.</span></div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;                $meeting_row = <a class="code" href="../../d9/dcc/classc__comdef__meeting.html#a58d88c38c074ec1bcfd23a56510b4352">c_comdef_meeting::process_meeting_row</a>($row);</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;                <span class="comment">// At this point, we have all the data for this one meeting, culled from its three tables and aggregated into an array.</span></div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;                <span class="comment">// Add this to our aggregator array.</span></div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;                $meeting_data[$row[<span class="stringliteral">&#39;id_bigint&#39;</span>]] = $meeting_row;</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;            }</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;        </div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;            <span class="comment">// We now instantiate a c_comdef_meetings object, and create our c_comdef_meeting objects.</span></div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;            $this_meetings_object = <span class="keyword">new</span> <a class="code" href="../../d2/d64/classc__comdef__meetings.html">c_comdef_meetings</a>(self::GetServer(), $meeting_data);</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        }</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;        </div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        <span class="keywordflow">return</span> $this_meetings_object;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    }</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    </div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;<span class="comment">    /** \brief  Gets a list of all change objects of a certain type, or</span></div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;<span class="comment">        only one, if the change affects a certain class, and an ID is</span></div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;<span class="comment">        given for that class (not the change ID -the ID of the changed</span></div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;<span class="comment">        object).</span></div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;<span class="comment">        \returns a new c_comdef_changes object, containing the changes. Null if it failed.</span></div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;<span class="comment">        \throws an exception if the SQL query fails.</span></div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02312"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#aebc5d4fd6276a2a70fbbe1f7950ab356"> 2312</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#aebc5d4fd6276a2a70fbbe1f7950ab356">GetChangesFromIDAndType</a>(</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;        $in_type,</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;        <span class="comment">// The class type for the changes</span></div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;        <span class="comment">// One of these values:</span></div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;        <span class="comment">// - c_comdef_meeting</span></div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        <span class="comment">// - c_comdef_service_body</span></div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        <span class="comment">// - c_comdef_user</span></div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;        <span class="comment">// - c_comdef_format</span></div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;        $in_id = null,          <span class="comment">///&lt; The ID for the object. If not specified, all changes for the given type will be returned (WARNING: Could be a great many).</span></div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;<span class="comment"></span>        $in_start_date = null,  <span class="comment">///&lt; If you specify a start date (In PHP time() format), then only changes on, or after this date will be returned.</span></div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<span class="comment"></span>        $in_end_date = null     <span class="comment">///&lt; If you specify an end date (In PHP time() format), then only changes that occurred on, or before this date will be returned.</span></div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.self::GetChangesTableName_obj().<span class="stringliteral">&quot;` WHERE&quot;</span>;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;        </div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;        <span class="keywordflow">if</span> (null != $in_id) {</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;            $in_id = intval($in_id);</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;            $sql .= <span class="stringliteral">&quot; ((before_id_bigint=$in_id) OR (after_id_bigint=$in_id)) AND&quot;</span>;</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;        }</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;            </div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;        <span class="keywordflow">if</span> (intval($in_start_date)) {</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;            $start_date = date(<span class="stringliteral">&#39;Y-m-d 00:00:00&#39;</span>, intval($in_start_date));</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;            $sql .= <span class="stringliteral">&quot; (change_date&gt;=&#39;$start_date&#39;) AND&quot;</span>;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;        }</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;            </div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;        <span class="keywordflow">if</span> (intval($in_end_date)) {</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;            $end_date = date(<span class="stringliteral">&#39;Y-m-d 23:59:59&#39;</span>, intval($in_end_date));</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;            $sql .= <span class="stringliteral">&quot; (change_date&lt;=&#39;$end_date&#39;) AND&quot;</span>;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;        }</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;        </div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;        $sql .= <span class="stringliteral">&quot; (object_class_string=?) ORDER BY change_date DESC&quot;</span>;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;        </div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;        <span class="keywordflow">return</span> self::GetServer()-&gt;GetChangesFromSQL($sql, array ( $in_type ));</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    }</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    </div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;<span class="comment">    /** \brief  This function allows you to get a list of changes by object</span></div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;<span class="comment">        type, and change type (such as all deleted meetings, or all rolled-back</span></div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;<span class="comment">        formats).</span></div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;<span class="comment">        \returns a new c_comdef_changes object, containing the changes. Null if it failed.</span></div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;<span class="comment">        \throws an exception if the SQL query fails.</span></div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02357"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a04342c5f3857a4d978b219128d8571a4"> 2357</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a04342c5f3857a4d978b219128d8571a4">GetChangesFromOTypeAndCType</a>(</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;        $in_o_type,</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;        <span class="comment">// The class type for the changes</span></div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        <span class="comment">// One of these values:</span></div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;        <span class="comment">//  - c_comdef_meeting</span></div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;        <span class="comment">//  - c_comdef_service_body</span></div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        <span class="comment">//  - c_comdef_user</span></div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;        <span class="comment">//  - c_comdef_format</span></div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;        $in_change_type</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        <span class="comment">// The change type.</span></div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;        <span class="comment">// Can be:</span></div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;        <span class="comment">//  - &#39;comdef_change_type_new&#39; - New object</span></div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;        <span class="comment">//  - &#39;comdef_change_type_delete&#39; - Deleted the object</span></div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;        <span class="comment">//  - &#39;comdef_change_type_change&#39; - Changed existing object</span></div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;        <span class="comment">//  - &#39;comdef_change_type_rollback&#39; - Rolled existing object back to a previous version</span></div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    ) {</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.self::GetChangesTableName_obj().<span class="stringliteral">&quot;` WHERE (object_class_string=?) AND (change_type_enum=?) ORDER BY change_date DESC&quot;</span>;</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;        </div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;        <span class="keywordflow">return</span> self::GetServer()-&gt;GetChangesFromSQL($sql, array ( $in_o_type, $in_change_type ));</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    }</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;<span class="comment">    /** \brief Returns the number of Km per degree of longitude, adjusted for Latitude.</span></div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;<span class="comment">        \returns a floating point number, with the number of Km per degree longitude at the given latitude..</span></div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02385"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a5188b0ab1a6ac253b94ea7f886753d9e"> 2385</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a5188b0ab1a6ac253b94ea7f886753d9e">getKmPerLonAtLat</a>($dLatitude <span class="comment">///&lt; The latitude (in degrees).</span></div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;<span class="comment"></span>                                    )</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    {</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;        <span class="keywordflow">return</span> 111.321 * cos(deg2rad($dLatitude));</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    }</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    </div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;<span class="comment">    /** \brief This is a static utility function that takes a specified</span></div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;<span class="comment">        radius and center point and calculates a square, in longitude and</span></div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;<span class="comment">        latitude points, that encompasses that radius. This greatly narrows</span></div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;<span class="comment">        the scope of the search, so the radius calculation will simply eliminate</span></div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;<span class="comment">        any meetings that are &quot;in the corners.&quot;</span></div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;<span class="comment">        \returns an array of floating-point values, in the following form:</span></div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;<span class="comment">             - [&#39;east&#39;] = longitude of the Eastern side of the rectangle</span></div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;<span class="comment">             - [&#39;west&#39;] = longitude of the Western side of the rectangle</span></div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;<span class="comment">             - [&#39;north&#39;] = latitude of the Northern side of the rectangle</span></div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;<span class="comment">             - [&#39;south&#39;] = latitude of the Southern side of the rectangle</span></div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02406"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#a28a3a99bd018b9087240953b77364276"> 2406</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#a28a3a99bd018b9087240953b77364276">GetSquareForRadius</a>(</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;        $in_radius,             <span class="comment">///&lt; A positive floating-point number. The radius, in kilometers.</span></div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;<span class="comment"></span>        $in_long_in_degrees,    <span class="comment">///&lt; The longitude needs to be specified in degrees.</span></div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;<span class="comment"></span>        $in_lat_in_degrees      <span class="comment">///&lt; The latitude needs to be specified in degrees.</span></div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;        $loc = null;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;        $vert_radius = $in_radius / 111.000;</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;        $horiz_radius = $in_radius / (111.321 * cos(deg2rad($in_lat_in_degrees)));</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;        </div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;        $loc[<span class="stringliteral">&#39;east&#39;</span>] = $in_long_in_degrees - $horiz_radius;</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;        $loc[<span class="stringliteral">&#39;west&#39;</span>] = $in_long_in_degrees + $horiz_radius;</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;        $loc[<span class="stringliteral">&#39;north&#39;</span>] = $in_lat_in_degrees + $vert_radius;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;        $loc[<span class="stringliteral">&#39;south&#39;</span>] = $in_lat_in_degrees - $vert_radius;</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;        </div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;        <span class="keywordflow">return</span> $loc;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    }</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    </div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;<span class="comment">    /** \brief Return SQL for a radius circle around the given coordinates.</span></div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;<span class="comment">               This is a special function for MySQL.</span></div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;<span class="comment">        \returns a string, containing the SQL clause.</span></div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;<span class="comment">                 This will be a prepared statement, with variable slots for:</span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;<span class="comment">                 latitude of the centerpoint, in degrees (floating-point)</span></div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;<span class="comment">                 longitude of the centerpoint, in degrees (floating point)</span></div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;<span class="comment">                 radius, in kilometers (floating point)</span></div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;<span class="comment">                 if $in_published is TRUE, then there will be an additional placeholder for published (0 not published, 1, published)</span></div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;<span class="comment">                 There will be an additional &#39;distance&#39; slot in the response, with the distance from the centerpoint.</span></div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;<span class="comment">                 A limit. This should be 10 more than what we are looking for. This speeds up the query.</span></div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02438"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ad6a05aa6d08ed3525b4e245eec75ae74"> 2438</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#ad6a05aa6d08ed3525b4e245eec75ae74">MySQLGetRadiusSQLClause</a>(</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        $in_published = <span class="keyword">false</span>,  <span class="comment">///&lt; If TRUE, then we will have a slot for published status.</span></div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;<span class="comment"></span>        $in_weekday = null      <span class="comment">///&lt; This is an array of weekdays we are looking for (integers).</span></div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;        <span class="comment">// I adapted this from here: http://www.plumislandmedia.net/mysql/haversine-mysql-nearest-loc/ Thanks, Ollie!</span></div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT COUNT(*) FROM ( SELECT  *,</span></div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;<span class="stringliteral">        p.distance_unit</span></div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;<span class="stringliteral">                 * DEGREES(ACOS(COS(RADIANS(p.latpoint))</span></div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;<span class="stringliteral">                 * COS(RADIANS(z.latitude))</span></div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;<span class="stringliteral">                 * COS(RADIANS(p.longpoint) - RADIANS(z.longitude))</span></div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;<span class="stringliteral">                 + SIN(RADIANS(p.latpoint))</span></div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;<span class="stringliteral">                 * SIN(RADIANS(z.latitude)))) AS distance</span></div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;<span class="stringliteral">        FROM `&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main` AS z</span></div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;<span class="stringliteral">        JOIN (   /* these are the query parameters */</span></div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;<span class="stringliteral">            SELECT  ? AS latpoint,  ? AS longpoint,</span></div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;<span class="stringliteral">                    ? AS radius,    111.045 AS distance_unit</span></div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;<span class="stringliteral">        ) AS p ON 1=1</span></div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;<span class="stringliteral">        WHERE z.latitude</span></div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;<span class="stringliteral">         BETWEEN p.latpoint  - (p.radius / p.distance_unit)</span></div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;<span class="stringliteral">             AND p.latpoint  + (p.radius / p.distance_unit)</span></div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;<span class="stringliteral">        AND z.longitude</span></div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;<span class="stringliteral">         BETWEEN p.longpoint - (p.radius / (p.distance_unit * COS(RADIANS(p.latpoint))))</span></div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;<span class="stringliteral">             AND p.longpoint + (p.radius / (p.distance_unit * COS(RADIANS(p.latpoint))))</span></div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;<span class="stringliteral">        ) AS d</span></div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;<span class="stringliteral">        WHERE (distance &lt;= radius)&quot;</span>;</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;        </div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;        <span class="keywordflow">if</span> ($in_published) {</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;            $sql .= <span class="stringliteral">&quot; AND (published = ?)&quot;</span>;</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;        }</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;        </div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;        <span class="comment">// Belt and suspenders...</span></div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;        <span class="keywordflow">if</span> (isset($in_weekday) &amp;&amp; (null != $in_weekday) &amp;&amp; is_array($in_weekday) &amp;&amp; count($in_weekday)) {</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;            $wd_yes_array = array();</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;            $wd_no_array = array();</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;            </div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;            $sql .= <span class="stringliteral">&quot; AND (&quot;</span>;</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;            <span class="keywordflow">foreach</span> ($in_weekday as $weekday) {</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;                <span class="keywordflow">if</span> (0 &gt; intval($weekday)) {</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;                    $wd_no_array[] = <span class="stringliteral">&quot;(weekday_tinyInt &lt;&gt; &quot;</span>.abs(intval($weekday)).<span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                    $wd_yes_array[] = <span class="stringliteral">&quot;(weekday_tinyInt = &quot;</span>.intval($weekday).<span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                }</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;            }</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;            </div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;            <span class="keywordflow">if</span> (count($wd_yes_array)) {</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;                $sql .= implode(<span class="stringliteral">&quot; OR &quot;</span>, $wd_yes_array);</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;            }</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;            </div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;            <span class="keywordflow">if</span> (count($wd_no_array)) {</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;                $sql .= implode(<span class="stringliteral">&quot; AND &quot;</span>, $wd_no_array);</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;            }</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;            </div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;            $sql .= <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;        }</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;        </div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;        $sql .= <span class="stringliteral">&quot;\nORDER BY distance;&quot;</span>;</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;        </div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;        <span class="keywordflow">return</span> $sql;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;    }</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;<span class="comment">    /** \brief Find the smallest radius that contains at least the given number of meetings.</span></div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;<span class="comment">        The way this works is that the center is set, and the optimal</span></div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;<span class="comment">        radius is selected in kilometers to deliver that many meetings.</span></div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;<span class="comment">        The radius starts at 25 Km (about 10 miles), and goes up or</span></div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;<span class="comment">        down in 5Km &quot;clicks.&quot; Under 5Km, it reduces to 0.5Km &quot;clicks.&quot;</span></div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;<span class="comment">        It will not go out more than 100Km.</span></div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;<span class="comment">        When it passes the threshold for the number of meetings in the</span></div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;<span class="comment">        square, the radius is selected, and the _search_radius is set</span></div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;<span class="comment">        to the number of Kilometers.</span></div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;<span class="comment">        We are not looking for an exact meeting count. It should select the</span></div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;<span class="comment">        first radius that contains AT LEAST the number of meetings requested.</span></div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;<span class="comment">        If not enough meetings are found, the radius ends up at 0.</span></div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;<span class="comment">        \returns a radius, in Km, for a result. Null if none found.</span></div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;<span class="comment">        \throws an exception if the SQL query fails.</span></div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02521"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#accdd0e8bc448b821443f3b25ad836b7f"> 2521</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#accdd0e8bc448b821443f3b25ad836b7f">HuntForRadius</a>(</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;        $in_search_result_count,    <span class="comment">///&lt; A positive integer. It specifies the number of meetings to find.</span></div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;<span class="comment"></span>        $in_long_in_degrees,        <span class="comment">///&lt; The longitude needs to be specified in degrees.</span></div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;<span class="comment"></span>        $in_lat_in_degrees,         <span class="comment">///&lt; The latitude needs to be specified in degrees.</span></div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;<span class="comment"></span>        $in_weekday_tinyint_array   <span class="comment">///&lt; An array of weekdays in which to filter for.</span></div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;        </div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;        $localized_strings = self::GetLocalStrings();</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;        $sql1 = <span class="stringliteral">&quot;SELECT COUNT(*) FROM `&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main` WHERE&quot;</span>;</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;        $sql3 = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;        </div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;        <span class="keywordflow">if</span> (is_array($in_weekday_tinyint_array) &amp;&amp; count($in_weekday_tinyint_array)) {</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;            $sql1 .= <span class="stringliteral">&quot; (&quot;</span>;</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;            </div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;            $first = <span class="keyword">true</span>;</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;            <span class="keywordflow">foreach</span> ($in_weekday_tinyint_array as $weekday) {</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;                $weekday = intval($weekday);</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;                $sql_x = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;                <span class="keywordflow">if</span> ($weekday &lt; 0) {</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;                    $weekday = abs($weekday);</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;                    $sql_x = <span class="stringliteral">&quot; NOT &quot;</span>;</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;                    </div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;                    <span class="keywordflow">if</span> (!$first) {</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;                        $sql_x = <span class="stringliteral">&quot; AND $sql_x&quot;</span>;</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;                    }</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;                    </div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;                    $first = <span class="keyword">true</span>;  <span class="comment">// This makes the OR get skipped.</span></div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;                }</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;                <span class="keywordflow">if</span> (!$first) {</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;                    $sql_x .= <span class="stringliteral">&quot; OR &quot;</span>;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;                    $first = <span class="keyword">false</span>;</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;                }</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;                </div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                $sql1 .= <span class="stringliteral">&quot;$sql_x(&quot;</span>.self::GetMeetingTableName_obj().<span class="stringliteral">&quot;_main.weekday_tinyint=&quot;</span>.strval($weekday - 1).<span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;            }</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;            $sql1 .= <span class="stringliteral">&quot;) AND (&quot;</span>;</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;            $sql3 = <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;        }</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;        $ranges = $localized_strings[<span class="stringliteral">&#39;comdef_map_radius_ranges&#39;</span>];</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        $current_radius = 0.0;</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;        <span class="keywordflow">foreach</span> ($ranges as $radius) {</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;            $radius = floatval($radius) * (($localized_strings[<span class="stringliteral">&#39;dist_units&#39;</span>] == <span class="stringliteral">&#39;mi&#39;</span>) ? 1.609344 : 1.0);</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;            $current_radius = $radius;</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;            $arr =  array ();</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;            </div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;            $show_published_only = (<a class="code" href="../../dd/d45/classc__comdef__server.html#a73c17efb58fc8625e47b151164c67ad4">c_comdef_server::GetServer</a>()-&gt;GetCurrentUserObj() == null); <span class="comment">// We only show published meetings to regular users.</span></div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;            $arr = array ( $in_lat_in_degrees, $in_long_in_degrees, $radius );</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;            </div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;            <span class="keywordflow">if</span> ($show_published_only) {</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;                $arr[] = <span class="keyword">true</span>;</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;            }</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;            </div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;            $sql = <a class="code" href="../../dd/d45/classc__comdef__server.html#ad6a05aa6d08ed3525b4e245eec75ae74">c_comdef_server::MySQLGetRadiusSQLClause</a>($show_published_only, $in_weekday_tinyint_array);</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;            </div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;                $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql, $arr);</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;            } <span class="keywordflow">catch</span> (Exception $e) {</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;            }</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;            </div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;            $count = 0;</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;            </div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;            <span class="keywordflow">if</span> (is_array($rows) &amp;&amp; count($rows)) {</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;                $count = intval($rows[0][<span class="stringliteral">&quot;count(*)&quot;</span>]);</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;            </div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;                <span class="keywordflow">if</span> ($count &gt; $in_search_result_count) {</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;                }</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;            }</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;        }</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;        <span class="keywordflow">return</span> $current_radius;</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    }</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;    </div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;<span class="comment">    /** \brief Given an SQL statement and a value array (for DBO prepared</span></div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;<span class="comment">        statements), return a new c_comdef_changes object, loaded with the</span></div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;<span class="comment">        instances of the changes that were returned from the query.</span></div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;<span class="comment">        \returns a new c_comdef_changes object, containing the changes. Null if it failed.</span></div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;<span class="comment">        \throws an exception if the SQL query fails.</span></div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02610"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ad11af94c0539907b6d3078b4ba563255"> 2610</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#ad11af94c0539907b6d3078b4ba563255">GetChangesFromSQL</a>(</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;        $in_sql,                <span class="comment">///&lt; The prepared statement SQL query</span></div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;<span class="comment"></span>        $in_value_array = null  <span class="comment">///&lt; An array of values for the prepared statement.</span></div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;<span class="comment"></span>    ) {</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;        $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($in_sql, $in_value_array);</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;        </div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;        $this_changes_object = null;</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;        </div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;        <span class="keywordflow">if</span> (is_array($rows) &amp;&amp; count($rows)) {</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;            <span class="comment">// We now instantiate a c_comdef_changes object, and create our c_comdef_change objects.</span></div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;            $this_changes_object = <span class="keyword">new</span> <a class="code" href="../../d2/d5a/classc__comdef__changes.html">c_comdef_changes</a>($this, $rows);</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;        }</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;        </div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;        <span class="keywordflow">return</span> $this_changes_object;</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;    }</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    </div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;<span class="comment">    /** \brief This gets the appropriate language files, and puts all the</span></div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;<span class="comment">        the strings into an associative array. If a language enum is passed in,</span></div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;<span class="comment">        and the language directory exists, then the strings are loaded from</span></div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;<span class="comment">        that directory. If nothing is passed in, the first place we look is</span></div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;<span class="comment">        in the HTTP query, to see if a &#39;lang_enum&#39; query is present. If it is there,</span></div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;<span class="comment">        we use that. If not, we use the base server language.</span></div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;<span class="comment">        \returns an associative array of local strings. Null if it failed.</span></div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;<span class="comment">            - &#39;name&#39;                            The name of the language, in the language itself.</span></div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;<span class="comment">            - &#39;enum&#39;                            The code for the language.</span></div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;<span class="comment">            - &#39;weekdays&#39;                        An array of weekday names. 0 -&gt; Sunday, 6 -&gt; Saturday</span></div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;<span class="comment">            - &#39;prompt_delimiter&#39;                The character used to delimit prompts (usually a colon &#39;:&#39;).</span></div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;<span class="comment">            - &#39;comdef_map_radius_ranges&#39;        An array of floating point numbers that indicate the choices for the radius selector (in miles).</span></div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;<span class="comment">            - &#39;comdef_search_admin_strings&#39;     An associative array, with strings used only in administration.</span></div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;<span class="comment">            - &#39;comdef_format_types&#39;             An associative array that maps format classes to their descriptions.</span></div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;<span class="comment">            - &#39;change_type_strings&#39;             An associative array that maps the types of changes to their descriptions.</span></div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;<span class="comment">            - &#39;detailed_change_strings&#39;         An associative array that maps detailed descriptions of itemized changes.</span></div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;<span class="comment">            - &#39;end_change_report&#39;               The character used to end a change report (usually a period &#39;.&#39;).</span></div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02648"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#af8fe64ccd359a4877fc04cd52ac9b938"> 2648</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#af8fe64ccd359a4877fc04cd52ac9b938">GetLocalStrings</a>( $in_lang_enum = null  <span class="comment">///&lt; An enumeration string, indicating the language desired. If provided, it overrides all else.</span></div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;<span class="comment"></span>                                    )</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;    {</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;        <span class="keywordflow">if</span> (!is_array(<a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>) || !count(<a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>)) {</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;            <span class="comment">// This will create the SINGLETON server if one does not yet exist.</span></div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;            <a class="code" href="../../d4/dae/config-bmlt-basic_8inc_8php.html#ad135cc8a47e55f0829949cf62214170f">$server</a> = self::MakeServer();</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;        </div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d4/dae/config-bmlt-basic_8inc_8php.html#ad135cc8a47e55f0829949cf62214170f">$server</a> instanceof <a class="code" href="../../dd/d45/classc__comdef__server.html">c_comdef_server</a>) {</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;                <a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a> = <a class="code" href="../../d4/dae/config-bmlt-basic_8inc_8php.html#ad135cc8a47e55f0829949cf62214170f">$server</a>-&gt;GetLocalLang();</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;            </div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;                <span class="keywordflow">if</span> (isset(<a class="code" href="../../d9/dc0/xml_2GetServiceBodies_8php.html#a9d2407a49d9569abe0699d8f1189c9d9">$_GET</a>[<span class="stringliteral">&#39;lang_enum&#39;</span>]) &amp;&amp; <a class="code" href="../../d9/dc0/xml_2GetServiceBodies_8php.html#a9d2407a49d9569abe0699d8f1189c9d9">$_GET</a>[<span class="stringliteral">&#39;lang_enum&#39;</span>]) {</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;                    <a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a> = <a class="code" href="../../d9/dc0/xml_2GetServiceBodies_8php.html#a9d2407a49d9569abe0699d8f1189c9d9">$_GET</a>[<span class="stringliteral">&#39;lang_enum&#39;</span>];</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;                }</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;        </div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;                <span class="keywordflow">if</span> (isset($_POST[<span class="stringliteral">&#39;lang_enum&#39;</span>]) &amp;&amp; $_POST[<span class="stringliteral">&#39;lang_enum&#39;</span>]) {</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;                    <a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a> = $_POST[<span class="stringliteral">&#39;lang_enum&#39;</span>];</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;                }</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;            </div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;                <span class="keywordflow">if</span> (is_array(<a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a>) &amp;&amp; count(<a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a>)) {</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;                    $langs = array();</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;                    <span class="keywordflow">foreach</span> (<a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a> as $lang) {</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;                        <span class="keywordflow">if</span> (file_exists(dirname(dirname(__FILE__)).<span class="stringliteral">&#39;/local_server/server_admin/lang/&#39;</span>.$lang)) {</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;                            array_push($langs, $lang);</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;                        }</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;                    }</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;                    <a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a> = implode(<span class="stringliteral">&quot;,&quot;</span>, $langs);</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;                } elseif ($in_lang_enum &amp;&amp; file_exists(dirname(dirname(__FILE__)).<span class="stringliteral">&#39;/local_server/server_admin/lang/&#39;</span>.$in_lang_enum)) {</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;                    <a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a> = $in_lang_enum;</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;                }</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;            </div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;                include(dirname(__FILE__).<span class="stringliteral">&quot;/config/comdef-config.inc.php&quot;</span>);</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;                include(dirname(dirname(__FILE__)).<span class="stringliteral">&#39;/local_server/server_admin/lang/&#39;</span>.<a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a>.<span class="stringliteral">&#39;/server_admin_strings.inc.php&#39;</span>);</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;                global  <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#aee6db60bdde6aefe62c88b822146c366">$comdef_global_more_details_address</a>,    <span class="comment">///&lt; This is a format string for the way the address line is displayed in the &quot;more details&quot; screen.</span></div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;<span class="comment"></span>                    <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#aeadb5e1c96375a05759b62d5922c8f72">$comdef_global_list_address</a>;            <span class="comment">///&lt; The same, but for the list.</span></div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;default_meeting_published&#39;</span>] = isset($default_meeting_published) ? $default_meeting_published : <span class="keyword">true</span>;</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;week_starts_on&#39;</span>] = (isset($week_starts_on) &amp;&amp; (-1 &lt; $week_starts_on) &amp;&amp; (7 &gt; $week_starts_on)) ? $week_starts_on : 0;</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;name&#39;</span>] = file_get_contents(dirname(dirname(__FILE__)).<span class="stringliteral">&#39;/local_server/server_admin/lang/&#39;</span>.<a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a>.<span class="stringliteral">&#39;/name.txt&#39;</span>);</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;enum&#39;</span>] = <a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a>;</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;comdef_map_radius_ranges&#39;</span>] = (isset(<a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#aa7d166f8264499d0701e1e4b15d6187d">$comdef_map_radius_ranges</a>) &amp;&amp; is_array(<a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#aa7d166f8264499d0701e1e4b15d6187d">$comdef_map_radius_ranges</a>) &amp;&amp; count(<a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#aa7d166f8264499d0701e1e4b15d6187d">$comdef_map_radius_ranges</a>)) ?</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;                                                                                    <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#aa7d166f8264499d0701e1e4b15d6187d">$comdef_map_radius_ranges</a> :</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;                                                                                    array ( 0.1, 100.0 );   <span class="comment">///&lt; The default range (min, max), in Km.</span></div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;<span class="comment"></span>                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;include_service_body_email_in_semantic&#39;</span>] = <span class="keyword">false</span>;</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;                <span class="keywordflow">if</span> (isset($g_include_service_body_email_in_semantic)) {</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;                    <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;include_service_body_email_in_semantic&#39;</span>] = $g_include_service_body_email_in_semantic;</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;                }</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;sort_formats&#39;</span>] = isset($sort_formats) ? $sort_formats : <span class="keyword">true</span>;</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;meeting_counties_and_sub_provinces&#39;</span>] = isset($meeting_counties_and_sub_provinces) ? $meeting_counties_and_sub_provinces : array();</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;meeting_states_and_provinces&#39;</span>] = isset($meeting_states_and_provinces) ? $meeting_states_and_provinces : array();</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;google_api_key&#39;</span>] = isset($gkey) ? $gkey : <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;region_bias&#39;</span>] = isset($region_bias) ? $region_bias : <span class="stringliteral">&#39;us&#39;</span>;</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;default_duration_time&#39;</span>] = isset($default_duration_time) ? $default_duration_time : <span class="stringliteral">&#39;01:00:00&#39;</span>;</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;default_minute_interval&#39;</span>] = isset($default_minute_interval) ? $default_minute_interval : 5;</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;search_spec_map_center&#39;</span>] = $search_spec_map_center;</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;change_type_strings&#39;</span>] = <a class="code" href="../../d8/dbc/de_2server__admin__strings_8inc_8php.html#a52479cb417abad5bf6a58d4fd280728f">$change_type_strings</a>;</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;detailed_change_strings&#39;</span>] = <a class="code" href="../../d8/dbc/de_2server__admin__strings_8inc_8php.html#a121ecadef64ee7621c6241fa8f03a40a">$detailed_change_strings</a>;</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;email_contact_strings&#39;</span>] = <a class="code" href="../../d8/dbc/de_2server__admin__strings_8inc_8php.html#a4027f72fba63626c298031ba4f76a2f6">$email_contact_strings</a>;</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;prompt_delimiter&#39;</span>] =  <a class="code" href="../../d5/d1d/client__interface_2html_2index_8php.html#a9fbaf120043298ee46edd0722ca2d570">defined</a>(<span class="stringliteral">&#39;__PROMPT_DELIMITER__&#39;</span>) ? __PROMPT_DELIMITER__ : <span class="charliteral">&#39;:&#39;</span>;</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;end_change_report&#39;</span>] =  <a class="code" href="../../d5/d1d/client__interface_2html_2index_8php.html#a9fbaf120043298ee46edd0722ca2d570">defined</a>(<span class="stringliteral">&#39;_END_CHANGE_REPORT&#39;</span>) ? _END_CHANGE_REPORT : <span class="charliteral">&#39;.&#39;</span>;</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;charset&#39;</span>] = <a class="code" href="../../d5/d1d/client__interface_2html_2index_8php.html#a9fbaf120043298ee46edd0722ca2d570">defined</a>(<span class="stringliteral">&#39;__HTML_DISPLAY_CHARSET__&#39;</span>) ? __HTML_DISPLAY_CHARSET__ : <span class="stringliteral">&#39;UTF-8&#39;</span>;</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;time_format&#39;</span>] = $time_format;</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;min_pw_len&#39;</span>] = intval($min_pw_len);</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;number_of_meetings_for_auto&#39;</span>] = $number_of_meetings_for_auto;</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;comdef_global_more_details_address&#39;</span>] = <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#aee6db60bdde6aefe62c88b822146c366">$comdef_global_more_details_address</a>;</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;comdef_global_list_address&#39;</span>] = <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#aeadb5e1c96375a05759b62d5922c8f72">$comdef_global_list_address</a>;</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;comdef_server_admin_strings&#39;</span>] = <a class="code" href="../../d8/dbc/de_2server__admin__strings_8inc_8php.html#a9c471d077fb2b12a3a0ba6ae45c5ce10">$comdef_server_admin_strings</a>;</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;default_sorts&#39;</span>] = array ( <span class="stringliteral">&#39;weekday&#39;</span> =&gt; array(<span class="stringliteral">&#39;weekday_tinyint&#39;</span>,<span class="stringliteral">&#39;location_municipality&#39;</span>,<span class="stringliteral">&#39;location_city_subsection&#39;</span>,<span class="stringliteral">&#39;start_time&#39;</span>,<span class="stringliteral">&#39;location_neighborhood&#39;</span>),</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;                                                                                            <span class="stringliteral">&#39;time&#39;</span> =&gt; array(<span class="stringliteral">&#39;weekday_tinyint&#39;</span>,<span class="stringliteral">&#39;start_time&#39;</span>,<span class="stringliteral">&#39;location_municipality&#39;</span>,<span class="stringliteral">&#39;location_city_subsection&#39;</span>,<span class="stringliteral">&#39;location_neighborhood&#39;</span>),</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;                                                                                            <span class="stringliteral">&#39;town&#39;</span> =&gt; array(<span class="stringliteral">&#39;location_municipality&#39;</span>,<span class="stringliteral">&#39;location_city_subsection&#39;</span>,<span class="stringliteral">&#39;location_neighborhood&#39;</span>,<span class="stringliteral">&#39;weekday_tinyint&#39;</span>,<span class="stringliteral">&#39;start_time&#39;</span>),</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;                                                                                            <span class="stringliteral">&#39;state&#39;</span> =&gt; array(<span class="stringliteral">&#39;location_province&#39;</span>,<span class="stringliteral">&#39;location_municipality&#39;</span>,<span class="stringliteral">&#39;location_city_subsection&#39;</span>,<span class="stringliteral">&#39;weekday_tinyint&#39;</span>,<span class="stringliteral">&#39;start_time&#39;</span>),</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;                                                                                            <span class="stringliteral">&#39;weekday_state&#39;</span> =&gt; array(<span class="stringliteral">&#39;weekday_tinyint&#39;</span>,<span class="stringliteral">&#39;location_province&#39;</span>,<span class="stringliteral">&#39;location_municipality&#39;</span>,<span class="stringliteral">&#39;start_time&#39;</span>,<span class="stringliteral">&#39;location_city_subsection&#39;</span>)</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;                                                                                            );</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;weekdays&#39;</span>] = <a class="code" href="../../d8/dbc/de_2server__admin__strings_8inc_8php.html#a9c471d077fb2b12a3a0ba6ae45c5ce10">$comdef_server_admin_strings</a>[<span class="stringliteral">&#39;meeting_search_weekdays_names&#39;</span>];</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;service_body_types&#39;</span>] = array (  <a class="code" href="../../d3/d6a/c__comdef__service__body_8class_8php.html#a46397cd0128b0e69cc4343b712f077a5">c_comdef_service_body__GRP__</a> =&gt; <a class="code" href="../../d8/dbc/de_2server__admin__strings_8inc_8php.html#a9c471d077fb2b12a3a0ba6ae45c5ce10">$comdef_server_admin_strings</a>[<span class="stringliteral">&#39;service_body_editor_type_c_comdef_service_body__GRP__&#39;</span>],</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;                                                                                    <a class="code" href="../../d3/d6a/c__comdef__service__body_8class_8php.html#aeb7a173889fc6f86abdd3651e7ff0288">c_comdef_service_body__COP__</a> =&gt; <a class="code" href="../../d8/dbc/de_2server__admin__strings_8inc_8php.html#a9c471d077fb2b12a3a0ba6ae45c5ce10">$comdef_server_admin_strings</a>[<span class="stringliteral">&#39;service_body_editor_type_c_comdef_service_body__COP__&#39;</span>],</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;                                                                                    <a class="code" href="../../d3/d6a/c__comdef__service__body_8class_8php.html#ad9870dfe88ed428c417622e55ad234f1">c_comdef_service_body__ASC__</a> =&gt; <a class="code" href="../../d8/dbc/de_2server__admin__strings_8inc_8php.html#a9c471d077fb2b12a3a0ba6ae45c5ce10">$comdef_server_admin_strings</a>[<span class="stringliteral">&#39;service_body_editor_type_c_comdef_service_body__ASC__&#39;</span>],</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;                                                                                    <a class="code" href="../../d3/d6a/c__comdef__service__body_8class_8php.html#a392b7c7e15766da0b4e72265ec849529">c_comdef_service_body__RSC__</a> =&gt; <a class="code" href="../../d8/dbc/de_2server__admin__strings_8inc_8php.html#a9c471d077fb2b12a3a0ba6ae45c5ce10">$comdef_server_admin_strings</a>[<span class="stringliteral">&#39;service_body_editor_type_c_comdef_service_body__RSC__&#39;</span>],</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;                                                                                    <a class="code" href="../../d3/d6a/c__comdef__service__body_8class_8php.html#aadba59b2946b7efc436362e9b9b3ed0d">c_comdef_service_body__WSC__</a> =&gt; <a class="code" href="../../d8/dbc/de_2server__admin__strings_8inc_8php.html#a9c471d077fb2b12a3a0ba6ae45c5ce10">$comdef_server_admin_strings</a>[<span class="stringliteral">&#39;service_body_editor_type_c_comdef_service_body__WSC__&#39;</span>],</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;                                                                                    <a class="code" href="../../d3/d6a/c__comdef__service__body_8class_8php.html#ad4c49c36acea152846ab1ccf4de00ae1">c_comdef_service_body__MAS__</a> =&gt; <a class="code" href="../../d8/dbc/de_2server__admin__strings_8inc_8php.html#a9c471d077fb2b12a3a0ba6ae45c5ce10">$comdef_server_admin_strings</a>[<span class="stringliteral">&#39;service_body_editor_type_c_comdef_service_body__MAS__&#39;</span>],</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;                                                                                    <a class="code" href="../../d3/d6a/c__comdef__service__body_8class_8php.html#a476c5f8c936440fb153450f5a3586b4a">c_comdef_service_body__ZFM__</a> =&gt; <a class="code" href="../../d8/dbc/de_2server__admin__strings_8inc_8php.html#a9c471d077fb2b12a3a0ba6ae45c5ce10">$comdef_server_admin_strings</a>[<span class="stringliteral">&#39;service_body_editor_type_c_comdef_service_body__ZFM__&#39;</span>]</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;                                                                                    );</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;                <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;default_closed_status&#39;</span>] = (!isset($g_defaultClosedStatus) || $g_defaultClosedStatus) ? 1 : ((isset($g_defaultClosedStatus) &amp;&amp; !$g_defaultClosedStatus) ? 0 : 1);</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;                <span class="keywordflow">if</span> (trim($comdef_distance_units)) {</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;                    <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;dist_units&#39;</span>] = strtolower(trim($comdef_distance_units));</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;                    <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>[<span class="stringliteral">&#39;dist_units&#39;</span>] = <span class="stringliteral">&#39;mi&#39;</span>;</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;                }</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;            </div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;                <span class="keywordflow">if</span> (isset($default_timezone) &amp;&amp; $default_timezone) {</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;                    date_default_timezone_set($default_timezone);</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;                }</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;            </div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;                ini_set(<span class="stringliteral">&#39;default_charset&#39;</span>, <span class="stringliteral">&#39;&#39;</span>);</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;            }</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;        }</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    </div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server::$server_local_strings</a>;</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    }</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    </div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <span class="comment">/*******************************************************************/</span><span class="comment"></span></div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;<span class="comment">    /** \brief Return all the Service Bodies this user is authorized with</span></div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;<span class="comment">        \returns an associative array. The key is the ID of the Service Body, and the value is:</span></div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;<span class="comment">            - &#39;principal&#39; If the user is a principal admin</span></div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;<span class="comment">            - &#39;editor&#39; If the user is a secondary editor.</span></div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;<span class="comment">            Returns null if the user is not cleared for any Service Body.</span></div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02761"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#ae4dbd4ee5a7be8558a9f4e21d7b72746"> 2761</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#ae4dbd4ee5a7be8558a9f4e21d7b72746">GetUserServiceBodies</a>( $in_user_id = null   <span class="comment">///&lt; The ID of the user. If not provided, the current user is checked.</span></div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;<span class="comment"></span>                                            )</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;    {</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;        </div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;        <span class="keywordflow">if</span> (!$in_user_id) {</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;            $in_user_id = self::GetCurrentUserObj()-&gt;GetID();</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;        }</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;        </div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;        $service_bodies = <a class="code" href="../../dd/d45/classc__comdef__server.html#a73c17efb58fc8625e47b151164c67ad4">c_comdef_server::GetServer</a>()-&gt;GetServiceBodyArray();</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;        </div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;        <span class="keywordflow">if</span> (is_array($service_bodies) &amp;&amp; count($service_bodies)) {</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;            <span class="keywordflow">foreach</span> ($service_bodies as &amp;$service_body) {</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;                $is_editor = null;</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;                <span class="keywordflow">if</span> ($service_body instanceof <a class="code" href="../../d1/dff/classc__comdef__service__body.html">c_comdef_service_body</a>) {</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;                    $editors = $service_body-&gt;GetEditors();</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;                    </div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;                    <span class="keywordflow">if</span> (is_array($editors) &amp;&amp; count($editors)) {</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;                        <span class="keywordflow">if</span> (in_array($in_user_id, $editors)) {</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;                            $is_editor = <span class="stringliteral">&#39;editor&#39;</span>;</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;                        }</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;                    }</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;                    </div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;                    <span class="keywordflow">if</span> ($service_body-&gt;GetPrincipalUserID() == $in_user_id) {</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;                        $is_editor = <span class="stringliteral">&#39;principal&#39;</span>;</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;                    }</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;                }</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;                </div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;                <span class="keywordflow">if</span> ($is_editor) {</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;                    <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>[$service_body-&gt;GetID()] = $is_editor;</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;                }</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;            }</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;        }</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;        </div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;    }</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;    <span class="comment">// phpcs:disable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02800"></a><span class="lineno"><a class="line" href="../../dd/d45/classc__comdef__server.html#aed0063a850ed4d0235b7207414c13620"> 2800</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="../../dd/d45/classc__comdef__server.html#aed0063a850ed4d0235b7207414c13620">GetDatabaseVersion</a>()</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    {</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;        $sql = <span class="stringliteral">&quot;SELECT version FROM `&quot;</span>.self::GetDatabaseVersionTableName_obj().<span class="stringliteral">&quot;`&quot;</span>;</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;        $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql);</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;        <span class="keywordflow">if</span> (!is_array($rows) || !count($rows)) {</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;        }</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;        $row = $rows[0];</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;        <span class="keywordflow">return</span> intval($row[<span class="stringliteral">&#39;version&#39;</span>]);</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    }</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;}</div><div class="ttc" id="classc__comdef__server_html_ab4668a6b078b8c9a6453d41a87672063"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#ab4668a6b078b8c9a6453d41a87672063">c_comdef_server\GetServerLangs</a></div><div class="ttdeci">static GetServerLangs()</div><div class="ttdoc">Get the local readable string for the server languages. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01152">c_comdef_server.class.php:1152</a></div></div>
<div class="ttc" id="classc__comdef__meeting_html_a58d88c38c074ec1bcfd23a56510b4352"><div class="ttname"><a href="../../d9/dcc/classc__comdef__meeting.html#a58d88c38c074ec1bcfd23a56510b4352">c_comdef_meeting\process_meeting_row</a></div><div class="ttdeci">static process_meeting_row( $row, $data_rows=null, $longdata_rows=null)</div><div class="ttdoc">This processes the data retrieved from a single main table meeting. It will look up the corollary dat...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d10/c__comdef__meeting_8class_8php_source.html#l01566">c_comdef_meeting.class.php:1566</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a9152c50f77c3404c843cae960a2f0dfe"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a9152c50f77c3404c843cae960a2f0dfe">c_comdef_server\AddNewServiceBody</a></div><div class="ttdeci">static AddNewServiceBody( $in_name_string, $in_lang_enum, $in_principal_user_bigint, $in_description_string=null, $in_editors_string=null, $in_uri_string=null, $in_kml_uri_string=null, $in_worldid_mixed=null, $in_sb_type=null, $in_sb_owner=null)</div><div class="ttdoc">Creates a new Service Body in the Database. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00852">c_comdef_server.class.php:852</a></div></div>
<div class="ttc" id="classc__comdef__server_html_accdd0e8bc448b821443f3b25ad836b7f"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#accdd0e8bc448b821443f3b25ad836b7f">c_comdef_server\HuntForRadius</a></div><div class="ttdeci">static HuntForRadius( $in_search_result_count, $in_long_in_degrees, $in_lat_in_degrees, $in_weekday_tinyint_array)</div><div class="ttdoc">Find the smallest radius that contains at least the given number of meetings. The way this works is t...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02521">c_comdef_server.class.php:2521</a></div></div>
<div class="ttc" id="classc__comdef__service__body_html"><div class="ttname"><a href="../../d1/dff/classc__comdef__service__body.html">c_comdef_service_body</a></div><div class="ttdoc">A Class for Service Body Objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6a/c__comdef__service__body_8class_8php_source.html#l00058">c_comdef_service_body.class.php:58</a></div></div>
<div class="ttc" id="classc__comdef__server_html_ad6a05aa6d08ed3525b4e245eec75ae74"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#ad6a05aa6d08ed3525b4e245eec75ae74">c_comdef_server\MySQLGetRadiusSQLClause</a></div><div class="ttdeci">static MySQLGetRadiusSQLClause( $in_published=false, $in_weekday=null)</div><div class="ttdoc">Return SQL for a radius circle around the given coordinates. This is a special function for MySQL...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02438">c_comdef_server.class.php:2438</a></div></div>
<div class="ttc" id="classc__comdef__meeting_html"><div class="ttname"><a href="../../d9/dcc/classc__comdef__meeting.html">c_comdef_meeting</a></div><div class="ttdoc">A class to hold a single meeting object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d10/c__comdef__meeting_8class_8php_source.html#l00050">c_comdef_meeting.class.php:50</a></div></div>
<div class="ttc" id="classc__comdef__server_html_ad11af94c0539907b6d3078b4ba563255"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#ad11af94c0539907b6d3078b4ba563255">c_comdef_server\GetChangesFromSQL</a></div><div class="ttdeci">GetChangesFromSQL( $in_sql, $in_value_array=null)</div><div class="ttdoc">Given an SQL statement and a value array (for DBO prepared statements), return a new c_comdef_changes...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02610">c_comdef_server.class.php:2610</a></div></div>
<div class="ttc" id="comdef-config_8inc_8php_html_aa7d166f8264499d0701e1e4b15d6187d"><div class="ttname"><a href="../../d4/d7d/comdef-config_8inc_8php.html#aa7d166f8264499d0701e1e4b15d6187d">$comdef_map_radius_ranges</a></div><div class="ttdeci">global $comdef_map_radius_ranges</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7d/comdef-config_8inc_8php_source.html#l00017">comdef-config.inc.php:17</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a44224133d26aad5202737edf11c29c71"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a44224133d26aad5202737edf11c29c71">c_comdef_server\GetFormatsArray</a></div><div class="ttdeci">GetFormatsArray()</div><div class="ttdoc">Simply returns an array of the format objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00607">c_comdef_server.class.php:607</a></div></div>
<div class="ttc" id="c__comdef__service__body_8class_8php_html_aeb7a173889fc6f86abdd3651e7ff0288"><div class="ttname"><a href="../../d3/d6a/c__comdef__service__body_8class_8php.html#aeb7a173889fc6f86abdd3651e7ff0288">c_comdef_service_body__COP__</a></div><div class="ttdeci">const c_comdef_service_body__COP__</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6a/c__comdef__service__body_8class_8php_source.html#l00046">c_comdef_service_body.class.php:46</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a8a10eb8ac23c4a2ddbc46a1a89dade3e"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a8a10eb8ac23c4a2ddbc46a1a89dade3e">c_comdef_server\DoesMeetingExist</a></div><div class="ttdeci">static DoesMeetingExist( $in_id_bigint)</div><div class="ttdoc">Given an ID for a meeting, it returns true if the meeting currently exists. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01500">c_comdef_server.class.php:1500</a></div></div>
<div class="ttc" id="classc__comdef__server_html_ae4dbd4ee5a7be8558a9f4e21d7b72746"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#ae4dbd4ee5a7be8558a9f4e21d7b72746">c_comdef_server\GetUserServiceBodies</a></div><div class="ttdeci">static GetUserServiceBodies( $in_user_id=null)</div><div class="ttdoc">Return all the Service Bodies this user is authorized with. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02761">c_comdef_server.class.php:2761</a></div></div>
<div class="ttc" id="classc__comdef__server_html_aa35269de3b20cfe21c160b6b5bd821d5"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#aa35269de3b20cfe21c160b6b5bd821d5">c_comdef_server\GetAllMeetings</a></div><div class="ttdeci">static GetAllMeetings(&amp;$in_out_numResults, $in_numResults=null, $in_startIndex=null)</div><div class="ttdoc">Returns a c_comdef_meetings_object, containing all the meetings (Published and unpublished). </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02122">c_comdef_server.class.php:2122</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a1d1e28b48bff6d5f002b613e2463178d"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a1d1e28b48bff6d5f002b613e2463178d">c_comdef_server\DuplicateMeetingObj</a></div><div class="ttdeci">static DuplicateMeetingObj( $in_meeting_obj)</div><div class="ttdoc">This creates a new meeting that is an exact duplicate of the object passed in. The new meeting has a ...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00735">c_comdef_server.class.php:735</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a009e10216e09ea1d1d1fb46e6133d508"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a009e10216e09ea1d1d1fb46e6133d508">c_comdef_server\GetMeetingsForAServiceBody</a></div><div class="ttdeci">static GetMeetingsForAServiceBody( $in_sb_id)</div><div class="ttdoc">Returns a c_comdef_meetings_object, containing all the meetings directly &quot;owned&quot; by the Service Body ...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02104">c_comdef_server.class.php:2104</a></div></div>
<div class="ttc" id="classc__comdef__user_html"><div class="ttname"><a href="../../d4/de6/classc__comdef__user.html">c_comdef_user</a></div><div class="ttdoc">This class handles BMLT users. One instance is created for each user on the server. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d40/c__comdef__user_8class_8php_source.html#l00040">c_comdef_user.class.php:40</a></div></div>
<div class="ttc" id="classc__comdef__server_html_ae337a189da53a17f62d1c4a506660837"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#ae337a189da53a17f62d1c4a506660837">c_comdef_server\GetChangesTableName_obj</a></div><div class="ttdeci">static GetChangesTableName_obj()</div><div class="ttdoc">Simply returns the name of the changes table. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01109">c_comdef_server.class.php:1109</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a6c7ba55e9fcb3e85dc686c66c64bf89f"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a6c7ba55e9fcb3e85dc686c66c64bf89f">c_comdef_server\GetUsedFormatsArray</a></div><div class="ttdeci">GetUsedFormatsArray()</div><div class="ttdoc">Simply returns an array of the format objects used by the meetings (no unused ones). </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00619">c_comdef_server.class.php:619</a></div></div>
<div class="ttc" id="classc__comdef__server_html_aebc5d4fd6276a2a70fbbe1f7950ab356"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#aebc5d4fd6276a2a70fbbe1f7950ab356">c_comdef_server\GetChangesFromIDAndType</a></div><div class="ttdeci">static GetChangesFromIDAndType( $in_type, $in_id=null, $in_start_date=null, $in_end_date=null)</div><div class="ttdoc">Gets a list of all change objects of a certain type, or only one, if the change affects a certain cla...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02312">c_comdef_server.class.php:2312</a></div></div>
<div class="ttc" id="classc__comdef__dbsingleton_html_a7769dc278479099e18c31f131e81efd3"><div class="ttname"><a href="../../d0/df2/classc__comdef__dbsingleton.html#a7769dc278479099e18c31f131e81efd3">c_comdef_dbsingleton\init</a></div><div class="ttdeci">static init( $driver, $host, $database, $user=null, $password=null, $charset=null)</div><div class="ttdoc">Initializes connection param class members. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00111">c_comdef_dbsingleton.class.php:111</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a8450c4fe3bceec7693bac28220e90414"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a8450c4fe3bceec7693bac28220e90414">c_comdef_server\GetMeetingTableName_obj</a></div><div class="ttdeci">static GetMeetingTableName_obj()</div><div class="ttdoc">Simply returns the name of the meetings table. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01097">c_comdef_server.class.php:1097</a></div></div>
<div class="ttc" id="contact_8php_html_affd9e3eb0aad0a7ca42912cd925f148c"><div class="ttname"><a href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a></div><div class="ttdeci">$ret</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d42/contact_8php_source.html#l00226">contact.php:226</a></div></div>
<div class="ttc" id="classc__comdef__server_html_aa02af64499b8fb92bd8ce1b9eb671f87"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#aa02af64499b8fb92bd8ce1b9eb671f87">c_comdef_server\IsUserServerAdmin</a></div><div class="ttdeci">static IsUserServerAdmin( $in_user_obj=null, $in_is_ajax=false)</div><div class="ttdoc">Find out if the user is a server admin. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01275">c_comdef_server.class.php:1275</a></div></div>
<div class="ttc" id="classc__comdef__server_html_acc69eb0964a73c37dae54ec241a806d8"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#acc69eb0964a73c37dae54ec241a806d8">c_comdef_server\GetServiceBodiesTableName_obj</a></div><div class="ttdeci">static GetServiceBodiesTableName_obj()</div><div class="ttdoc">Simply returns the name of the service bodies table. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01121">c_comdef_server.class.php:1121</a></div></div>
<div class="ttc" id="c__comdef__service__body_8class_8php_html_aadba59b2946b7efc436362e9b9b3ed0d"><div class="ttname"><a href="../../d3/d6a/c__comdef__service__body_8class_8php.html#aadba59b2946b7efc436362e9b9b3ed0d">c_comdef_service_body__WSC__</a></div><div class="ttdeci">const c_comdef_service_body__WSC__</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6a/c__comdef__service__body_8class_8php_source.html#l00049">c_comdef_service_body.class.php:49</a></div></div>
<div class="ttc" id="comdef-config_8inc_8php_html_a3d69ce6ad2a28c43aa4beb510d8abc31"><div class="ttname"><a href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a></div><div class="ttdeci">global $comdef_global_language</div><div class="ttdoc">The local server language enum (Will default to English) </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7d/comdef-config_8inc_8php_source.html#l00011">comdef-config.inc.php:11</a></div></div>
<div class="ttc" id="c__comdef__user_8class_8php_html_a813a0d07af6641590beaf373222f51a2"><div class="ttname"><a href="../../df/d40/c__comdef__user_8class_8php.html#a813a0d07af6641590beaf373222f51a2">_USER_LEVEL_SERVICE_BODY_ADMIN</a></div><div class="ttdeci">const _USER_LEVEL_SERVICE_BODY_ADMIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d40/c__comdef__user_8class_8php_source.html#l00028">c_comdef_user.class.php:28</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a5188b0ab1a6ac253b94ea7f886753d9e"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a5188b0ab1a6ac253b94ea7f886753d9e">c_comdef_server\getKmPerLonAtLat</a></div><div class="ttdeci">static getKmPerLonAtLat($dLatitude)</div><div class="ttdoc">Returns the number of Km per degree of longitude, adjusted for Latitude. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02385">c_comdef_server.class.php:2385</a></div></div>
<div class="ttc" id="classc__comdef__server_html_ade513497fc1b54fe69e3df738f5d330b"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#ade513497fc1b54fe69e3df738f5d330b">c_comdef_server\GetOneFormat</a></div><div class="ttdeci">static GetOneFormat( $in_id_bigint, $in_lang_enum)</div><div class="ttdoc">Given an ID and a language for a format, it returns one instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01465">c_comdef_server.class.php:1465</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a5c2aec84c4db19d68e68eff6f071d272"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a5c2aec84c4db19d68e68eff6f071d272">c_comdef_server\GetUserTableName_obj</a></div><div class="ttdeci">static GetUserTableName_obj()</div><div class="ttdoc">Simply returns the name of the user table. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01133">c_comdef_server.class.php:1133</a></div></div>
<div class="ttc" id="c__comdef__user_8class_8php_html_a65106dc8c1c3bcd5c97f95a66caccf51"><div class="ttname"><a href="../../df/d40/c__comdef__user_8class_8php.html#a65106dc8c1c3bcd5c97f95a66caccf51">_USER_LEVEL_DISABLED</a></div><div class="ttdeci">const _USER_LEVEL_DISABLED</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d40/c__comdef__user_8class_8php_source.html#l00030">c_comdef_user.class.php:30</a></div></div>
<div class="ttc" id="classc__comdef__dbsingleton_html_a1bcb4b189c8184f00f4dae50d29723d3"><div class="ttname"><a href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton\preparedQuery</a></div><div class="ttdeci">static preparedQuery( $sql, $params=array(), $fetchKeyPair=false)</div><div class="ttdoc">Wrapper for preparing and executing a PDOStatement that returns a resultset e.g. SELECT SQL statement...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00231">c_comdef_dbsingleton.class.php:231</a></div></div>
<div class="ttc" id="classc__comdef__server_html_ab64625208195edc6469b9f0263ccf998"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#ab64625208195edc6469b9f0263ccf998">c_comdef_server\ReadServiceBodies</a></div><div class="ttdeci">ReadServiceBodies()</div><div class="ttdoc">This is an internal function that reads in all of the stored service bodies and instantiates local ob...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00433">c_comdef_server.class.php:433</a></div></div>
<div class="ttc" id="classc__comdef__server_html_ae9aaaaf8cd923665375b2e8d3ba91d2d"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#ae9aaaaf8cd923665375b2e8d3ba91d2d">c_comdef_server\GetDatabaseVersionTableName_obj</a></div><div class="ttdeci">static GetDatabaseVersionTableName_obj()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01140">c_comdef_server.class.php:1140</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a841c3c0994ca83f2eff19b0f19e20519"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a841c3c0994ca83f2eff19b0f19e20519">c_comdef_server\GetFormatLangs</a></div><div class="ttdeci">static GetFormatLangs()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01158">c_comdef_server.class.php:1158</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a73c17efb58fc8625e47b151164c67ad4"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a73c17efb58fc8625e47b151164c67ad4">c_comdef_server\GetServer</a></div><div class="ttdeci">static GetServer()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00106">c_comdef_server.class.php:106</a></div></div>
<div class="ttc" id="c__comdef__user_8class_8php_html_a45f118b0120941c6f0099e0467bea854"><div class="ttname"><a href="../../df/d40/c__comdef__user_8class_8php.html#a45f118b0120941c6f0099e0467bea854">_USER_LEVEL_SERVER_ADMIN</a></div><div class="ttdeci">const _USER_LEVEL_SERVER_ADMIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d40/c__comdef__user_8class_8php_source.html#l00027">c_comdef_user.class.php:27</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a4f7cef36fdf0503354da638f43522a02"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a4f7cef36fdf0503354da638f43522a02">c_comdef_server\GetFormatsObj</a></div><div class="ttdeci">GetFormatsObj()</div><div class="ttdoc">Simply returns a reference to the formats container. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00591">c_comdef_server.class.php:591</a></div></div>
<div class="ttc" id="classc__comdef__format_html"><div class="ttname"><a href="../../d9/db6/classc__comdef__format.html">c_comdef_format</a></div><div class="ttdoc">A Class for Format Codes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d16/c__comdef__format_8class_8php_source.html#l00037">c_comdef_format.class.php:37</a></div></div>
<div class="ttc" id="c__comdef__service__body_8class_8php_html_a392b7c7e15766da0b4e72265ec849529"><div class="ttname"><a href="../../d3/d6a/c__comdef__service__body_8class_8php.html#a392b7c7e15766da0b4e72265ec849529">c_comdef_service_body__RSC__</a></div><div class="ttdeci">const c_comdef_service_body__RSC__</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6a/c__comdef__service__body_8class_8php_source.html#l00048">c_comdef_service_body.class.php:48</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a1ed8d51fee14cd90a6bd9915580317b1"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a1ed8d51fee14cd90a6bd9915580317b1">c_comdef_server\GetOneMeeting</a></div><div class="ttdeci">static GetOneMeeting( $in_id_bigint, $test_only=false)</div><div class="ttdoc">Given an ID for a meeting, it returns one instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01527">c_comdef_server.class.php:1527</a></div></div>
<div class="ttc" id="classc__comdef__server_html_ac3c9e179a804d0730dcc6dac09b9926d"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#ac3c9e179a804d0730dcc6dac09b9926d">c_comdef_server\GetCoverageArea</a></div><div class="ttdeci">static GetCoverageArea()</div><div class="ttdoc">Returns a set of two coordinates that define a rectangle that encloses all of the meetings...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02197">c_comdef_server.class.php:2197</a></div></div>
<div class="ttc" id="local__server_2index_8php_html_a2b7b18bf5bcad3f6bf916f34fa9e042f"><div class="ttname"><a href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a></div><div class="ttdeci">$lang_enum</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da0/local__server_2index_8php_source.html#l00023">index.php:23</a></div></div>
<div class="ttc" id="de_2server__admin__strings_8inc_8php_html_a121ecadef64ee7621c6241fa8f03a40a"><div class="ttname"><a href="../../d8/dbc/de_2server__admin__strings_8inc_8php.html#a121ecadef64ee7621c6241fa8f03a40a">$detailed_change_strings</a></div><div class="ttdeci">$detailed_change_strings</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbc/de_2server__admin__strings_8inc_8php_source.html#l00403">server_admin_strings.inc.php:403</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a5ea3da3a6c0ad16e5a181f4677482088"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a5ea3da3a6c0ad16e5a181f4677482088">c_comdef_server\ServerLangSortCallback</a></div><div class="ttdeci">static ServerLangSortCallback( $in_lang_a, $in_lang_b)</div><div class="ttdoc">This is a callback to sort the server languages. The default server language will always be first...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00245">c_comdef_server.class.php:245</a></div></div>
<div class="ttc" id="classc__comdef__server_html_ac3680235988649b237ff82be9541e3f3"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#ac3680235988649b237ff82be9541e3f3">c_comdef_server\GetUserByIDObj</a></div><div class="ttdeci">static GetUserByIDObj( $in_user_id_bigint)</div><div class="ttdoc">Get the object for a single user, given an ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01180">c_comdef_server.class.php:1180</a></div></div>
<div class="ttc" id="classc__comdef__formats_html"><div class="ttname"><a href="../../da/dd0/classc__comdef__formats.html">c_comdef_formats</a></div><div class="ttdoc">Include the format class. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8d/c__comdef__formats_8class_8php_source.html#l00050">c_comdef_formats.class.php:50</a></div></div>
<div class="ttc" id="classc__comdef__server_html_ababcf318e384a4b289ee8b24598b1a38"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#ababcf318e384a4b289ee8b24598b1a38">c_comdef_server\ParseMeetingsByFormats</a></div><div class="ttdeci">static ParseMeetingsByFormats( $in_meetings, $in_formats)</div><div class="ttdoc">This is an alternative to the MySQL REGEXP test. It will go through all the meetings returned by a br...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02165">c_comdef_server.class.php:2165</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a9c42a3248fd6e18a65fed16449286c02"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a9c42a3248fd6e18a65fed16449286c02">c_comdef_server\DuplicateMeetingID</a></div><div class="ttdeci">static DuplicateMeetingID( $in_meeting_id)</div><div class="ttdoc">This creates a new meeting that is an exact duplicate of the object for the meeting whose ID is passe...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00709">c_comdef_server.class.php:709</a></div></div>
<div class="ttc" id="local__server_2index_8php_html_a634e4fb3f0535a99050530167407ff87"><div class="ttname"><a href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a></div><div class="ttdeci">global $http_vars</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da0/local__server_2index_8php_source.html#l00021">index.php:21</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a6b5ef0901b88fe2542312fcc002c7ca0"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a6b5ef0901b88fe2542312fcc002c7ca0">c_comdef_server\GetOneUser</a></div><div class="ttdeci">static GetOneUser( $in_id_bigint)</div><div class="ttdoc">Given an ID for a user, it returns one instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01600">c_comdef_server.class.php:1600</a></div></div>
<div class="ttc" id="classc__comdef__server_html_ac92458278e876f92f802b14456dc950c"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#ac92458278e876f92f802b14456dc950c">c_comdef_server\GetOneChange</a></div><div class="ttdeci">static GetOneChange( $in_id_bigint)</div><div class="ttdoc">Given an ID for a change, it returns one instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01566">c_comdef_server.class.php:1566</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a90d9b02d24a84dd98a82a4ac05724030"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a90d9b02d24a84dd98a82a4ac05724030">c_comdef_server\GetServiceBodyArrayHierarchical</a></div><div class="ttdeci">GetServiceBodyArrayHierarchical()</div><div class="ttdoc">Returns the Service Body objects in a nested, hierarchical array, with &quot;parents&quot; containing &quot;children...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00535">c_comdef_server.class.php:535</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a1efa247dfce1d78a2fbb1d1578b4ddd5"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a1efa247dfce1d78a2fbb1d1578b4ddd5">c_comdef_server\ReadServiceIDs</a></div><div class="ttdeci">ReadServiceIDs()</div><div class="ttdoc">This gathers the IDs of all the Service bodies that appear in meeting records. It is NOT a dump of th...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00487">c_comdef_server.class.php:487</a></div></div>
<div class="ttc" id="classc__comdef__server_html_aed8397ba5518d190232d5abf39336c5d"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#aed8397ba5518d190232d5abf39336c5d">c_comdef_server\__construct</a></div><div class="ttdeci">__construct( $in_lang_enum=null)</div><div class="ttdoc">The initial setup call for the class. Part of setting up the server is establishing the database conn...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00134">c_comdef_server.class.php:134</a></div></div>
<div class="ttc" id="c__comdef__service__body_8class_8php_html_a476c5f8c936440fb153450f5a3586b4a"><div class="ttname"><a href="../../d3/d6a/c__comdef__service__body_8class_8php.html#a476c5f8c936440fb153450f5a3586b4a">c_comdef_service_body__ZFM__</a></div><div class="ttdeci">const c_comdef_service_body__ZFM__</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6a/c__comdef__service__body_8class_8php_source.html#l00051">c_comdef_service_body.class.php:51</a></div></div>
<div class="ttc" id="de_2server__admin__strings_8inc_8php_html_a4027f72fba63626c298031ba4f76a2f6"><div class="ttname"><a href="../../d8/dbc/de_2server__admin__strings_8inc_8php.html#a4027f72fba63626c298031ba4f76a2f6">$email_contact_strings</a></div><div class="ttdeci">$email_contact_strings</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbc/de_2server__admin__strings_8inc_8php_source.html#l00373">server_admin_strings.inc.php:373</a></div></div>
<div class="ttc" id="classc__comdef__users_html"><div class="ttname"><a href="../../d4/d47/classc__comdef__users.html">c_comdef_users</a></div><div class="ttdoc">A class to hold a collection of c_comdef_users objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d61/c__comdef__users_8class_8php_source.html#l00032">c_comdef_users.class.php:32</a></div></div>
<div class="ttc" id="c__comdef__service__body_8class_8php_html_ad9870dfe88ed428c417622e55ad234f1"><div class="ttname"><a href="../../d3/d6a/c__comdef__service__body_8class_8php.html#ad9870dfe88ed428c417622e55ad234f1">c_comdef_service_body__ASC__</a></div><div class="ttdeci">const c_comdef_service_body__ASC__</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6a/c__comdef__service__body_8class_8php_source.html#l00047">c_comdef_service_body.class.php:47</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a0eb6b57ebbcc37e85417f9dbbceaf549"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a0eb6b57ebbcc37e85417f9dbbceaf549">c_comdef_server\GetMeetings</a></div><div class="ttdeci">static GetMeetings( $in_service_body_id_bigint_array=null, $in_lang_filter_array=null, $in_weekday_tinyint_array=null, $in_formats=null, $in_start_after=null, $in_start_before=null, $in_end_before=null, $in_min_duration=null, $in_max_duration=null, $in_search_rect_array=null, $in_first=null, &amp;$in_num=null, $in_published=0)</div><div class="ttdoc">Given a set of one or more main criteria, returns a new c_comdef_meetings object with instances of th...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01681">c_comdef_server.class.php:1681</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a9ae05141cae3c27651231e9f801e3d54"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a9ae05141cae3c27651231e9f801e3d54">c_comdef_server\IsFormatKeyUnique</a></div><div class="ttdeci">static IsFormatKeyUnique( $in_key_string, $in_lang_enum)</div><div class="ttdoc">Given an ID and a language for a format, as well as a code, returns true if the code does NOT appear ...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01439">c_comdef_server.class.php:1439</a></div></div>
<div class="ttc" id="classc__comdef__server_html_af8fe64ccd359a4877fc04cd52ac9b938"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#af8fe64ccd359a4877fc04cd52ac9b938">c_comdef_server\GetLocalStrings</a></div><div class="ttdeci">static GetLocalStrings( $in_lang_enum=null)</div><div class="ttdoc">This gets the appropriate language files, and puts all the the strings into an associative array...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02648">c_comdef_server.class.php:2648</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a1edde2490ac9c2562acb9d9286e56a09"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a1edde2490ac9c2562acb9d9286e56a09">c_comdef_server\TrimChanges</a></div><div class="ttdeci">static TrimChanges( $in_type, $in_id)</div><div class="ttdoc">trims the changes for the given item. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00962">c_comdef_server.class.php:962</a></div></div>
<div class="ttc" id="classc__comdef__server_html_aac85daa361f03562762940c543139cc5"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#aac85daa361f03562762940c543139cc5">c_comdef_server\GetServiceBodyByIDObj</a></div><div class="ttdeci">static GetServiceBodyByIDObj( $in_service_body_id_bigint)</div><div class="ttdoc">Get the object for a single service body, given an ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01375">c_comdef_server.class.php:1375</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a1525bb88596daf3163f1422b4e36bd9e"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a1525bb88596daf3163f1422b4e36bd9e">c_comdef_server\GetAllServiceIDs</a></div><div class="ttdeci">GetAllServiceIDs()</div><div class="ttdoc">Simply returns the stored service IDs for ALL Service Bodies. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00676">c_comdef_server.class.php:676</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a780b4ee113c0cedcffb626cf47c58e26"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a780b4ee113c0cedcffb626cf47c58e26">c_comdef_server\GetServiceBodyArray</a></div><div class="ttdeci">GetServiceBodyArray()</div><div class="ttdoc">Simply returns a reference to the contained Service Body array. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00521">c_comdef_server.class.php:521</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a5332a6ee3f1beb04e8169320fb747e20"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a5332a6ee3f1beb04e8169320fb747e20">c_comdef_server\GetMeetingsFromSQL</a></div><div class="ttdeci">static GetMeetingsFromSQL( $in_sql, $in_value_array=null)</div><div class="ttdoc">Given an SQL statement and a value array (for PDO prepared statements), return a new c_comdef_meeting...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02275">c_comdef_server.class.php:2275</a></div></div>
<div class="ttc" id="classc__comdef__dbsingleton_html"><div class="ttname"><a href="../../d0/df2/classc__comdef__dbsingleton.html">c_comdef_dbsingleton</a></div><div class="ttdoc">This class provides a genericized interface to the PHP PDO toolkit. It is a completely static class...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00069">c_comdef_dbsingleton.class.php:69</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a2df951b5c38081b5ab325298063f7c04"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a2df951b5c38081b5ab325298063f7c04">c_comdef_server\IsUserServiceBodyAdmin</a></div><div class="ttdeci">static IsUserServiceBodyAdmin( $in_user_obj=null, $in_is_ajax=false)</div><div class="ttdoc">Find out if the user is a service body admin. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01300">c_comdef_server.class.php:1300</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a855ffc907cbf902c46d7066c1c7c1c08"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a855ffc907cbf902c46d7066c1c7c1c08">c_comdef_server\GetNestedServiceBodyArray</a></div><div class="ttdeci">GetNestedServiceBodyArray( $in_id=0)</div><div class="ttdoc">This reads the Service bodies in hierarchical order, and returns them in a multi-dimensional array th...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00556">c_comdef_server.class.php:556</a></div></div>
<div class="ttc" id="classc__comdef__change_html"><div class="ttname"><a href="../../d5/d79/classc__comdef__change.html">c_comdef_change</a></div><div class="ttdoc">A Class for Change Record Objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/c__comdef__change_8class_8php_source.html#l00044">c_comdef_change.class.php:44</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a5c44596d37933c7cf4fbfe99783bc75d"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a5c44596d37933c7cf4fbfe99783bc75d">c_comdef_server\GetServerUsersObj</a></div><div class="ttdeci">static GetServerUsersObj()</div><div class="ttdoc">Get the object list for the server&amp;#39;s registered users. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01168">c_comdef_server.class.php:1168</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a71aa8f01938540d2cc5f512fdd167349"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a71aa8f01938540d2cc5f512fdd167349">c_comdef_server\GetUserByLogin</a></div><div class="ttdeci">static GetUserByLogin( $in_login)</div><div class="ttdoc">Given a login, looks up the user, and returns a reference to that user object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01204">c_comdef_server.class.php:1204</a></div></div>
<div class="ttc" id="classc__comdef__changes_html"><div class="ttname"><a href="../../d2/d5a/classc__comdef__changes.html">c_comdef_changes</a></div><div class="ttdoc">A class to hold a collection of c_comdef_change objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/c__comdef__changes_8class_8php_source.html#l00032">c_comdef_changes.class.php:32</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a807aaf134d2579c752fd563906180a01"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a807aaf134d2579c752fd563906180a01">c_comdef_server\GetUserByLoginCredentials</a></div><div class="ttdeci">static GetUserByLoginCredentials( $in_login, $in_password)</div><div class="ttdoc">Given a login and password, looks up the user, and returns a reference to that user object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01226">c_comdef_server.class.php:1226</a></div></div>
<div class="ttc" id="classc__comdef__server_html_afa2ed3583ed61388d69c0625b689a580"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#afa2ed3583ed61388d69c0625b689a580">c_comdef_server\$server_local_strings</a></div><div class="ttdeci">static $server_local_strings</div><div class="ttdoc">This contains a cache of the local strings. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00054">c_comdef_server.class.php:54</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a87b5e80080e1cf9c1d87023a79579f79"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a87b5e80080e1cf9c1d87023a79579f79">c_comdef_server\Initialize</a></div><div class="ttdeci">Initialize()</div><div class="ttdoc">This reads the Formats, Meeting and Service Entity IDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00268">c_comdef_server.class.php:268</a></div></div>
<div class="ttc" id="client__interface_2html_2index_8php_html_a9fbaf120043298ee46edd0722ca2d570"><div class="ttname"><a href="../../d5/d1d/client__interface_2html_2index_8php.html#a9fbaf120043298ee46edd0722ca2d570">defined</a></div><div class="ttdeci">defined( 'BMLT_EXEC') or define( 'BMLT_EXEC'</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1d/client__interface_2html_2index_8php_source.html#l00003">index.php:3</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a94da03d7e33a277d01058ffae0e5ce64"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a94da03d7e33a277d01058ffae0e5ce64">c_comdef_server\GetUsedFormatIDs</a></div><div class="ttdeci">GetUsedFormatIDs()</div><div class="ttdoc">Return the shared IDs of the formats actually used by the contained meetings. This can be used to avo...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00646">c_comdef_server.class.php:646</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a59de00bcc3927d0a9dcff23a243e413e"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a59de00bcc3927d0a9dcff23a243e413e">c_comdef_server\AddNewUser</a></div><div class="ttdeci">static AddNewUser( $in_user_login, $in_user_unencrypted_password, $in_user_level, $in_user_email, $in_name_string=null, $in_description_string=null, $in_lang_enum=null, $in_owner_id=-1)</div><div class="ttdoc">Creates a new user in the Database. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00912">c_comdef_server.class.php:912</a></div></div>
<div class="ttc" id="de_2server__admin__strings_8inc_8php_html_a52479cb417abad5bf6a58d4fd280728f"><div class="ttname"><a href="../../d8/dbc/de_2server__admin__strings_8inc_8php.html#a52479cb417abad5bf6a58d4fd280728f">$change_type_strings</a></div><div class="ttdeci">$change_type_strings</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbc/de_2server__admin__strings_8inc_8php_source.html#l00378">server_admin_strings.inc.php:378</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a00dcaf66374f7850e53a3864b4854cfc"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a00dcaf66374f7850e53a3864b4854cfc">c_comdef_server\MakeServer</a></div><div class="ttdeci">static MakeServer()</div><div class="ttdoc">This is the factory for the server instantiation. It makes sure that only one instance exists...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00092">c_comdef_server.class.php:92</a></div></div>
<div class="ttc" id="classc__comdef__server_html"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html">c_comdef_server</a></div><div class="ttdoc">This class is the main server class. It instantiates a PDO database object, and is the starting point...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00047">c_comdef_server.class.php:47</a></div></div>
<div class="ttc" id="classc__comdef__meetings_html_a3aa9b7039befef3bfaa4d5d43dd13dd4"><div class="ttname"><a href="../../d2/d64/classc__comdef__meetings.html#a3aa9b7039befef3bfaa4d5d43dd13dd4">c_comdef_meetings\GetDistance</a></div><div class="ttdeci">static GetDistance( $lat1, $lon1, $lat2, $lon2)</div><div class="ttdoc">Uses the Vincenty calculation to estimate a distance between the two given lat/long pairs...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/def/c__comdef__meetings_8class_8php_source.html#l00139">c_comdef_meetings.class.php:139</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a60704182248446d64b9f8d55954ea733"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a60704182248446d64b9f8d55954ea733">c_comdef_server\GetNewMeetingID</a></div><div class="ttdeci">static GetNewMeetingID()</div><div class="ttdoc">Gets an unused ID from the end of the table and returns it. It also sets that ID into the table AUTO_...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00765">c_comdef_server.class.php:765</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a4eb4438f20448c0224ae8a604dbb5be8"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a4eb4438f20448c0224ae8a604dbb5be8">c_comdef_server\GetNamespace</a></div><div class="ttdeci">static GetNamespace()</div><div class="ttdoc">Simply returns the namespace of this server. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01073">c_comdef_server.class.php:1073</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a23a30d1a55f8c04c958814222461d3eb"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a23a30d1a55f8c04c958814222461d3eb">c_comdef_server\GetServiceBodyHierarchyIDs</a></div><div class="ttdeci">static GetServiceBodyHierarchyIDs( $in_service_body_id_bigint)</div><div class="ttdoc">Return the IDs of an entire Service body hierarchy. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01404">c_comdef_server.class.php:1404</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a86c69c2d1310c2f67b4ca19c0c5cabd2"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a86c69c2d1310c2f67b4ca19c0c5cabd2">c_comdef_server\GetEncryptedPW</a></div><div class="ttdeci">static GetEncryptedPW( $in_login, $in_password)</div><div class="ttdoc">Given a login and password, looks up the user, and returns an encrypted password for that user...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01324">c_comdef_server.class.php:1324</a></div></div>
<div class="ttc" id="comdef__utilityclasses_8inc_8php_html_a8b365331a60660a48fd7b9facc05b3e6"><div class="ttname"><a href="../../d0/d45/comdef__utilityclasses_8inc_8php.html#a8b365331a60660a48fd7b9facc05b3e6">FullCrypt</a></div><div class="ttdeci">FullCrypt( $in_string, $in_salt=null, &amp;$crypt_method=null)</div><div class="ttdoc">Encrypts a string, using the most effective encryption. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d45/comdef__utilityclasses_8inc_8php_source.html#l00128">comdef_utilityclasses.inc.php:128</a></div></div>
<div class="ttc" id="classc__comdef__server_html_afa62ec86de9ac0144631b0a9a1a2a70f"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#afa62ec86de9ac0144631b0a9a1a2a70f">c_comdef_server\GetServiceIDs</a></div><div class="ttdeci">GetServiceIDs()</div><div class="ttdoc">Simply returns the stored service IDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00663">c_comdef_server.class.php:663</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a28a3a99bd018b9087240953b77364276"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a28a3a99bd018b9087240953b77364276">c_comdef_server\GetSquareForRadius</a></div><div class="ttdeci">static GetSquareForRadius( $in_radius, $in_long_in_degrees, $in_lat_in_degrees)</div><div class="ttdoc">This is a static utility function that takes a specified radius and center point and calculates a squ...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02406">c_comdef_server.class.php:2406</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a04342c5f3857a4d978b219128d8571a4"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a04342c5f3857a4d978b219128d8571a4">c_comdef_server\GetChangesFromOTypeAndCType</a></div><div class="ttdeci">static GetChangesFromOTypeAndCType( $in_o_type, $in_change_type)</div><div class="ttdoc">This function allows you to get a list of changes by object type, and change type (such as all delete...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02357">c_comdef_server.class.php:2357</a></div></div>
<div class="ttc" id="c__comdef__service__body_8class_8php_html_a46397cd0128b0e69cc4343b712f077a5"><div class="ttname"><a href="../../d3/d6a/c__comdef__service__body_8class_8php.html#a46397cd0128b0e69cc4343b712f077a5">c_comdef_service_body__GRP__</a></div><div class="ttdeci">const c_comdef_service_body__GRP__</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6a/c__comdef__service__body_8class_8php_source.html#l00045">c_comdef_service_body.class.php:45</a></div></div>
<div class="ttc" id="c__comdef__service__body_8class_8php_html_ad4c49c36acea152846ab1ccf4de00ae1"><div class="ttname"><a href="../../d3/d6a/c__comdef__service__body_8class_8php.html#ad4c49c36acea152846ab1ccf4de00ae1">c_comdef_service_body__MAS__</a></div><div class="ttdeci">const c_comdef_service_body__MAS__</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6a/c__comdef__service__body_8class_8php_source.html#l00050">c_comdef_service_body.class.php:50</a></div></div>
<div class="ttc" id="xml_2GetServiceBodies_8php_html_a9d2407a49d9569abe0699d8f1189c9d9"><div class="ttname"><a href="../../d9/dc0/xml_2GetServiceBodies_8php.html#a9d2407a49d9569abe0699d8f1189c9d9">$_GET</a></div><div class="ttdeci">$_GET['switcher']</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc0/xml_2GetServiceBodies_8php_source.html#l00030">GetServiceBodies.php:30</a></div></div>
<div class="ttc" id="classc__comdef__dbsingleton_html_a703536f3e137679639f4687b45dd115c"><div class="ttname"><a href="../../d0/df2/classc__comdef__dbsingleton.html#a703536f3e137679639f4687b45dd115c">c_comdef_dbsingleton\preparedExec</a></div><div class="ttdeci">static preparedExec( $sql, $params=array())</div><div class="ttdoc">Wrapper for preparing and executing a PDOStatement that does not return a resultset e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00267">c_comdef_dbsingleton.class.php:267</a></div></div>
<div class="ttc" id="comdef-config_8inc_8php_html_aee6db60bdde6aefe62c88b822146c366"><div class="ttname"><a href="../../d4/d7d/comdef-config_8inc_8php.html#aee6db60bdde6aefe62c88b822146c366">$comdef_global_more_details_address</a></div><div class="ttdeci">global $comdef_global_more_details_address</div><div class="ttdoc">This is a format string for the way the address line is displayed in the &quot;more details&quot; screen...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7d/comdef-config_8inc_8php_source.html#l00013">comdef-config.inc.php:13</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a4ef4d7a8cf51c219a19dcbecb5a5925a"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a4ef4d7a8cf51c219a19dcbecb5a5925a">c_comdef_server\ReadUsers</a></div><div class="ttdeci">ReadUsers()</div><div class="ttdoc">This is an internal function that reads in all of the stored users and instantiates local objects for...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00381">c_comdef_server.class.php:381</a></div></div>
<div class="ttc" id="classc__comdef__server_html_afe7b612404b54c38f1bc6494b8e97e89"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#afe7b612404b54c38f1bc6494b8e97e89">c_comdef_server\GetFormatTableName_obj</a></div><div class="ttdeci">static GetFormatTableName_obj()</div><div class="ttdoc">Simply returns the name of the format table. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01085">c_comdef_server.class.php:1085</a></div></div>
<div class="ttc" id="config-bmlt-basic_8inc_8php_html_ad135cc8a47e55f0829949cf62214170f"><div class="ttname"><a href="../../d4/dae/config-bmlt-basic_8inc_8php.html#ad135cc8a47e55f0829949cf62214170f">$server</a></div><div class="ttdeci">$server</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dae/config-bmlt-basic_8inc_8php_source.html#l00033">config-bmlt-basic.inc.php:33</a></div></div>
<div class="ttc" id="classc__comdef__meetings_html"><div class="ttname"><a href="../../d2/d64/classc__comdef__meetings.html">c_comdef_meetings</a></div><div class="ttdoc">A class to hold a collection of c_comdef_meeting objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/def/c__comdef__meetings_8class_8php_source.html#l00032">c_comdef_meetings.class.php:32</a></div></div>
<div class="ttc" id="classc__comdef__server_html_ae616da4fd0cf424470a521890cdd43db"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#ae616da4fd0cf424470a521890cdd43db">c_comdef_server\GetLocalLang</a></div><div class="ttdeci">GetLocalLang()</div><div class="ttdoc">Returns the Server Local Language. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00282">c_comdef_server.class.php:282</a></div></div>
<div class="ttc" id="comdef-config_8inc_8php_html_a03be16d09ad380de768c427fd6862ce2"><div class="ttname"><a href="../../d4/d7d/comdef-config_8inc_8php.html#a03be16d09ad380de768c427fd6862ce2">$_COMDEF_DEBUG</a></div><div class="ttdeci">global $_COMDEF_DEBUG</div><div class="ttdoc">This flag, when set to true, will cause extra debug information to be output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7d/comdef-config_8inc_8php_source.html#l00032">comdef-config.inc.php:32</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a87b22d99b0f1ee81c5f35c339804536a"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a87b22d99b0f1ee81c5f35c339804536a">c_comdef_server\GetCurrentUserObj</a></div><div class="ttdeci">static GetCurrentUserObj($in_is_ajax=false)</div><div class="ttdoc">Get the current logged-in user, as a c_comdef_user instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01249">c_comdef_server.class.php:1249</a></div></div>
<div class="ttc" id="classc__comdef__dbsingleton_html_a6a4ca0001516c08ef9e8c48165f98c84"><div class="ttname"><a href="../../d0/df2/classc__comdef__dbsingleton.html#a6a4ca0001516c08ef9e8c48165f98c84">c_comdef_dbsingleton\pdoInstance</a></div><div class="ttdeci">static pdoInstance( $do_connect=false)</div><div class="ttdoc">Provides access to internal PDO object in case this classes functionality is not enough. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00200">c_comdef_dbsingleton.class.php:200</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a12295360c25567f939adf541515d606b"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a12295360c25567f939adf541515d606b">c_comdef_server\ReadFormats</a></div><div class="ttdeci">ReadFormats()</div><div class="ttdoc">This is an internal function that reads in all of the stored formats, in all provided languages...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00307">c_comdef_server.class.php:307</a></div></div>
<div class="ttc" id="classc__comdef__service__bodies_html"><div class="ttname"><a href="../../d1/d1b/classc__comdef__service__bodies.html">c_comdef_service_bodies</a></div><div class="ttdoc">A class to hold a collection of c_comdef_service_body objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df0/c__comdef__service__bodies_8class_8php_source.html#l00032">c_comdef_service_bodies.class.php:32</a></div></div>
<div class="ttc" id="classc__comdef__server_html_aed0063a850ed4d0235b7207414c13620"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#aed0063a850ed4d0235b7207414c13620">c_comdef_server\GetDatabaseVersion</a></div><div class="ttdeci">static GetDatabaseVersion()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02800">c_comdef_server.class.php:2800</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a11a015e9f4fcf09893c17d8a3e6504b3"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a11a015e9f4fcf09893c17d8a3e6504b3">c_comdef_server\GetMeetingsByID</a></div><div class="ttdeci">static GetMeetingsByID( $in_id_bigint_array)</div><div class="ttdoc">Get a series of meetings, each identified by an ID. This does not filter by any of the other major cr...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01638">c_comdef_server.class.php:1638</a></div></div>
<div class="ttc" id="classc__comdef__server_html_ad136bfcff844a71802399e7fee064bf7"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#ad136bfcff844a71802399e7fee064bf7">c_comdef_server\AddNewChange</a></div><div class="ttdeci">static AddNewChange( $in_user_id_bigint, $in_change_type, $in_service_body_id_bigint, $in_before_string, $in_after_string, $in_object_class_string, $in_before_obj_id_bigint, $in_after_obj_id_bigint, $in_before_obj_lang_enum=null, $in_after_obj_lang_enum=null, $in_name_string=null, $in_description_string=null, $in_lang_enum=null)</div><div class="ttdoc">Creates a new change record in the Database. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01007">c_comdef_server.class.php:1007</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a6f7213b38b189bdfdf39248f1f64190a"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a6f7213b38b189bdfdf39248f1f64190a">c_comdef_server\AddNewMeeting</a></div><div class="ttdeci">static AddNewMeeting( $in_service_body_bigint, $in_weekday_tinyint, $in_start_time_int, $in_lang_enum)</div><div class="ttdoc">Creates a new, relatively empty meeting in the database, with no data fields and minimal information...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00806">c_comdef_server.class.php:806</a></div></div>
<div class="ttc" id="comdef-config_8inc_8php_html_aeadb5e1c96375a05759b62d5922c8f72"><div class="ttname"><a href="../../d4/d7d/comdef-config_8inc_8php.html#aeadb5e1c96375a05759b62d5922c8f72">$comdef_global_list_address</a></div><div class="ttdeci">global $comdef_global_list_address</div><div class="ttdoc">The same, but for the list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7d/comdef-config_8inc_8php_source.html#l00014">comdef-config.inc.php:14</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a187bca7f75b1f35fc086ea89c33edd54"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a187bca7f75b1f35fc086ea89c33edd54">c_comdef_server\GetUsersByLevelObj</a></div><div class="ttdeci">static GetUsersByLevelObj( $in_user_level_bigint, $in_or_higher=false, $in_include_disabled=false)</div><div class="ttdoc">Get the objects for all users of a certain user level. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l01346">c_comdef_server.class.php:1346</a></div></div>
<div class="ttc" id="de_2server__admin__strings_8inc_8php_html_a9c471d077fb2b12a3a0ba6ae45c5ce10"><div class="ttname"><a href="../../d8/dbc/de_2server__admin__strings_8inc_8php.html#a9c471d077fb2b12a3a0ba6ae45c5ce10">$comdef_server_admin_strings</a></div><div class="ttdeci">$comdef_server_admin_strings</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbc/de_2server__admin__strings_8inc_8php_source.html#l00022">server_admin_strings.inc.php:22</a></div></div>
<div class="ttc" id="classc__comdef__server_html_ab5510edc86f4e4dc164986ccce6e923b"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#ab5510edc86f4e4dc164986ccce6e923b">c_comdef_server\SetServer</a></div><div class="ttdeci">static SetServer($in_server_instance)</div><div class="ttdoc">Sets the server instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00116">c_comdef_server.class.php:116</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Aug 6 2019 07:01:55 for BMLT Root Server by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
