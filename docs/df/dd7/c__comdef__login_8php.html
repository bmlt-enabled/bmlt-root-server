<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BMLT Root Server: /Volumes/Development/webroot/web_projects/BMLT-Root-Server/main_server/local_server/server_admin/c_comdef_login.php File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BMLT Root Server
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_26d822986ba68053f2c860363e4e8d8e.html">main_server</a></li><li class="navelem"><a class="el" href="../../dir_679ab5230e056b8c3cd4060cabb17f72.html">local_server</a></li><li class="navelem"><a class="el" href="../../dir_96bd026b69dcda7c1eff983b496c9708.html">server_admin</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">c_comdef_login.php File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This presents a login dialog to the user, vets the login, and establishes a session.  
<a href="#details">More...</a></p>

<p><a href="../../df/dd7/c__comdef__login_8php_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a06880e9206cbc8c077496b5e83c579c5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dd7/c__comdef__login_8php.html#a06880e9206cbc8c077496b5e83c579c5">url_origin</a> ($s, $use_forwarded_host=false)</td></tr>
<tr class="memdesc:a06880e9206cbc8c077496b5e83c579c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copied verbatim from here: <a href="http://stackoverflow.com/questions/6768793/get-the-full-url-in-php">http://stackoverflow.com/questions/6768793/get-the-full-url-in-php</a>.  <a href="#a06880e9206cbc8c077496b5e83c579c5">More...</a><br /></td></tr>
<tr class="separator:a06880e9206cbc8c077496b5e83c579c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affa30129839e40694f3465e97d61c8d9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dd7/c__comdef__login_8php.html#affa30129839e40694f3465e97d61c8d9">full_url</a> ($s, $use_forwarded_host=false)</td></tr>
<tr class="memdesc:affa30129839e40694f3465e97d61c8d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copied verbatim from here: <a href="http://stackoverflow.com/questions/6768793/get-the-full-url-in-php">http://stackoverflow.com/questions/6768793/get-the-full-url-in-php</a>.  <a href="#affa30129839e40694f3465e97d61c8d9">More...</a><br /></td></tr>
<tr class="separator:affa30129839e40694f3465e97d61c8d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd90ab8b1a9db8484ea16b3493cfdaac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dd7/c__comdef__login_8php.html#afd90ab8b1a9db8484ea16b3493cfdaac">GetServerInfo</a> ()</td></tr>
<tr class="memdesc:afd90ab8b1a9db8484ea16b3493cfdaac"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function parses the main server version from the XML file.  <a href="#afd90ab8b1a9db8484ea16b3493cfdaac">More...</a><br /></td></tr>
<tr class="separator:afd90ab8b1a9db8484ea16b3493cfdaac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ed6805dabe7c24aaf39b46f2396a2f3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dd7/c__comdef__login_8php.html#a6ed6805dabe7c24aaf39b46f2396a2f3">c_comdef_LoginForm</a> (&amp;$in_server)</td></tr>
<tr class="memdesc:a6ed6805dabe7c24aaf39b46f2396a2f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns HTML for the login form. If the user is not logged in, then they get the form. Otherwise, the login is processed, or the user is vetted.  <a href="#a6ed6805dabe7c24aaf39b46f2396a2f3">More...</a><br /></td></tr>
<tr class="separator:a6ed6805dabe7c24aaf39b46f2396a2f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5a010227eb59a7242d82f0f33f714377"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dd7/c__comdef__login_8php.html#a5a010227eb59a7242d82f0f33f714377">$t_server</a> = <a class="el" href="../../dd/d45/classc__comdef__server.html#a00dcaf66374f7850e53a3864b4854cfc">c_comdef_server::MakeServer</a>()</td></tr>
<tr class="separator:a5a010227eb59a7242d82f0f33f714377"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b7b18bf5bcad3f6bf916f34fa9e042f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dd7/c__comdef__login_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a> = $t_server-&gt;GetServer()-&gt;GetLocalLang()</td></tr>
<tr class="separator:a2b7b18bf5bcad3f6bf916f34fa9e042f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3b6911ef35955098de005f2dbf3fcb3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d22/main__console_8php.html#a6bba69f5dad3bde46b994f13e57514fe">if</a>(isset($_COOKIE) &amp;&amp;isset($_COOKIE['bmlt_admin_lang_pref']) &amp;&amp; $_COOKIE['bmlt_admin_lang_pref']) <a class="el" href="../../d0/d22/main__console_8php.html#a6bba69f5dad3bde46b994f13e57514fe">if</a>(isset($http_vars['lang_enum']) &amp;&amp; $http_vars['lang_enum']) <a class="el" href="../../d0/d22/main__console_8php.html#a6bba69f5dad3bde46b994f13e57514fe">if</a>(isset($g_enable_language_selector) &amp;&amp; $g_enable_language_selector) <a class="el" href="../../d0/d22/main__console_8php.html#a6bba69f5dad3bde46b994f13e57514fe">if</a>(!isset($_SESSION)) <a class="el" href="../../d0/d22/main__console_8php.html#a6bba69f5dad3bde46b994f13e57514fe">if</a>((isset($_GET['admin_action']) &amp;&amp;($_GET['admin_action']=='logout'))||(isset($_POST['admin_action']) &amp;&amp;($_POST['admin_action']=='logout'))||(isset($_POST['admin_action']) &amp;&amp;($_POST['admin_action']=='login'))) <a class="el" href="../../d0/d22/main__console_8php.html#a6bba69f5dad3bde46b994f13e57514fe">if</a>(isset($_SESSION[$admin_session_name]))&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dd7/c__comdef__login_8php.html#aa3b6911ef35955098de005f2dbf3fcb3">else</a></td></tr>
<tr class="separator:aa3b6911ef35955098de005f2dbf3fcb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This presents a login dialog to the user, vets the login, and establishes a session. </p>
<p>We track admin logins through the use of PHP sessions. This allows the login data to remain on the server. It also allows the login data to be carried into AJAX calls.</p>
<p>We're pretty anal about checking user credentials. We don't allow any changes to happen to the DB unless the user has been vetted at the time the DB access is made, but we do a lot of checking along the way.</p>
<p>If you include this file at the top of any file that does admin, it will check the session. If the session is not there, it will replace the output with a login form, and will continue along the way, once the user has logged in. If the session is set, it simply makes sure that the session reflects a user that has a system login (it does not check the user level), and stays out of the way.</p>
<p>If the user authentication fails, then it does a PHP die(), and scrags the whole thing. This prevents execution of any code beyond the bare minimum necessary to authenticate.</p>
<p>Cookies and JavaScript (and AJAX) are required to administer the server (but not to use it as a regular site visitor). This form checks to see if JavaScript is enabled, and if cookies are enabled.</p>
<p>You should link to the c_comdef_login.css file for this form.</p>
<p>This file is part of the Basic Meeting List Toolbox (BMLT).</p>
<p>Find out more at: <a href="https://bmlt.app">https://bmlt.app</a></p>
<p>BMLT is free software: you can redistribute it and/or modify it under the terms of the MIT License.</p>
<p>BMLT is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the MIT License for more details.</p>
<p>You should have received a copy of the MIT License along with this code. If not, see <a href="https://opensource.org/licenses/MIT">https://opensource.org/licenses/MIT</a>. </p>

<p class="definition">Definition in file <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html">c_comdef_login.php</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6ed6805dabe7c24aaf39b46f2396a2f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ed6805dabe7c24aaf39b46f2396a2f3">&#9670;&nbsp;</a></span>c_comdef_LoginForm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">c_comdef_LoginForm </td>
          <td>(</td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$in_server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns HTML for the login form. If the user is not logged in, then they get the form. Otherwise, the login is processed, or the user is vetted. </p>
<dl class="section return"><dt>Returns</dt><dd>a string, containing the form HTML. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_server</td><td>A reference to an instance of <a class="el" href="../../dd/d45/classc__comdef__server.html" title="This class is the main server class. It instantiates a PDO database object, and is the starting point...">c_comdef_server</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html#l00234">234</a> of file <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html">c_comdef_login.php</a>.</p>

<p class="reference">References <a class="el" href="../../d9/dc0/xml_2GetServiceBodies_8php_source.html#l00030">$_GET</a>, <a class="el" href="../../d4/d7d/comdef-config_8inc_8php_source.html#l00011">$comdef_global_language</a>, <a class="el" href="../../dd/da0/local__server_2index_8php_source.html#l00021">$http_vars</a>, <a class="el" href="../../df/d42/contact_8php_source.html#l00226">$ret</a>, <a class="el" href="../../d0/d45/comdef__utilityclasses_8inc_8php_source.html#l00395">c_comdef_htmlspecialchars()</a>, <a class="el" href="../../d5/d1d/client__interface_2html_2index_8php_source.html#l00003">defined</a>, <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html#l00181">full_url()</a>, <a class="el" href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02648">c_comdef_server\GetLocalStrings()</a>, <a class="el" href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00106">c_comdef_server\GetServer()</a>, and <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html#l00190">GetServerInfo()</a>.</p>
<div class="fragment"><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;{</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    include(dirname(dirname(dirname(__FILE__))).<span class="stringliteral">&#39;/server/config/get-config.php&#39;</span>);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a> = array_merge(<a class="code" href="../../d9/dc0/xml_2GetServiceBodies_8php.html#a9d2407a49d9569abe0699d8f1189c9d9">$_GET</a>, $_POST);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    $localized_strings = <a class="code" href="../../dd/d45/classc__comdef__server.html#af8fe64ccd359a4877fc04cd52ac9b938">c_comdef_server::GetLocalStrings</a>();</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    $server_info = <a class="code" href="../../df/dd7/c__comdef__login_8php.html#afd90ab8b1a9db8484ea16b3493cfdaac">GetServerInfo</a>();</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    global  <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> (isset(<a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>) &amp;&amp; is_array(<a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>) &amp;&amp; count(<a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>) &amp;&amp; isset(<a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>[<span class="stringliteral">&#39;lang_enum&#39;</span>])) {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        $lang_name = <a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a>[<span class="stringliteral">&#39;lang_enum&#39;</span>];</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    </div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">if</span> (file_exists(dirname(__FILE__).<span class="stringliteral">&quot;/lang/&quot;</span>.$lang_name.<span class="stringliteral">&quot;/name.txt&quot;</span>)) {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a> = $lang_name;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    } elseif (isset($_SESSION) &amp;&amp; is_array($_SESSION) &amp;&amp; isset($_SESSION[<span class="stringliteral">&#39;lang_enum&#39;</span>])) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        $lang_name = $_SESSION[<span class="stringliteral">&#39;lang_enum&#39;</span>];</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    </div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">if</span> (file_exists(dirname(__FILE__).<span class="stringliteral">&quot;/lang/&quot;</span>.$lang_name.<span class="stringliteral">&quot;/name.txt&quot;</span>)) {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a> = $lang_name;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span> (isset($_SESSION) &amp;&amp; is_array($_SESSION)) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        $_SESSION[<span class="stringliteral">&#39;lang_enum&#39;</span>] = <a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a>;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = <span class="stringliteral">&#39;&lt;div class=&quot;c_comdef_admin_login_form_container_div&quot;&gt;&#39;</span>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="comment">// If there is no JavaScript, then this message is displayed, and the form will not be revealed.</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;noscript&gt;&lt;h1&gt;&#39;</span>.c_comdef_htmlspecialchars($localized_strings[<span class="stringliteral">&#39;comdef_server_admin_strings&#39;</span>][<span class="stringliteral">&#39;noscript&#39;</span>]).<span class="stringliteral">&#39;&lt;/h1&gt;&lt;/noscript&gt;&#39;</span>;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;h1 class=&quot;login_form_main_banner_h1&quot;&gt;&#39;</span>.c_comdef_htmlspecialchars($server_info[<span class="stringliteral">&#39;title&#39;</span>]).<span class="stringliteral">&#39;&lt;/h1&gt;&#39;</span>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;h2 class=&quot;login_form_secondary_banner_h2&quot;&gt;&#39;</span>.c_comdef_htmlspecialchars($server_info[<span class="stringliteral">&#39;banner_text&#39;</span>]).<span class="stringliteral">&#39;&lt;/h2&gt;&#39;</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;form method=&quot;post&quot; class=&quot;c_comdef_admin_login_form&quot; id=&quot;c_comdef_admin_login_form&quot; action=&quot;&#39;</span>.c_comdef_htmlspecialchars($_SERVER[<span class="stringliteral">&#39;SCRIPT_NAME&#39;</span>]);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        $ret_temp = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">foreach</span> (<a class="code" href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a> as $key =&gt; $value) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">switch</span> ($key) {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="comment">// Skip these.</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;c_comdef_admin_login&#39;</span>:</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;c_comdef_admin_password&#39;</span>:</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;admin_action&#39;</span>:</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;login&#39;</span>:</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                </div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                <span class="comment">// Arrays need to be concatenated strings.</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                <span class="keywordflow">if</span> (is_array($value)) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                    $value = join(<span class="stringliteral">&quot;,&quot;</span>, $value);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                <span class="keywordflow">if</span> ($ret_temp) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                    $ret_temp .= <span class="stringliteral">&#39;&amp;amp;&#39;</span>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                    $ret_temp = <span class="charliteral">&#39;?&#39;</span>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                $ret_temp .= <a class="code" href="../../d0/d45/comdef__utilityclasses_8inc_8php.html#a69d2ef2f8015dc970e6ffd175b1cb714">c_comdef_htmlspecialchars</a>($key).<span class="charliteral">&#39;=&#39;</span>.<a class="code" href="../../d0/d45/comdef__utilityclasses_8inc_8php.html#a69d2ef2f8015dc970e6ffd175b1cb714">c_comdef_htmlspecialchars</a>($value);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        }</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&quot;&gt;&#39;</span>;   <span class="comment">// Only the login will go through post.</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;input id=&quot;admin_action&quot; type=&quot;hidden&quot; name=&quot;admin_action&quot; value=&quot;login&quot; /&gt;&#39;</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            $attempted_url = <a class="code" href="../../df/dd7/c__comdef__login_8php.html#affa30129839e40694f3465e97d61c8d9">full_url</a>($_SERVER);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            </div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">if</span> (!preg_match(<span class="stringliteral">&#39;|logout|&#39;</span>, $attempted_url)) {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;input id=&quot;attemptedurl&quot; type=&quot;hidden&quot; name=&quot;attemptedurl&quot; value=&quot;&#39;</span>.c_comdef_htmlspecialchars($attempted_url).<span class="stringliteral">&#39;&quot; /&gt;&#39;</span>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            </div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;div style=&quot;display:none&quot; id=&quot;c_comdef_admin_login_form_inner_container_div&quot; class=&quot;c_comdef_admin_login_form_inner_container_div&quot;&gt;&#39;</span>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;div class=&quot;c_comdef_admin_login_form_line_div&quot;&gt;&#39;</span>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;div class=&quot;c_comdef_admin_login_form_prompt&quot;&gt;&#39;</span>.c_comdef_htmlspecialchars($localized_strings[<span class="stringliteral">&#39;comdef_server_admin_strings&#39;</span>][<span class="stringliteral">&#39;title&#39;</span>]).<span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                    <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;label for=&quot;c_comdef_admin_login&quot;&gt;&#39;</span>.c_comdef_htmlspecialchars($localized_strings[<span class="stringliteral">&#39;comdef_server_admin_strings&#39;</span>][<span class="stringliteral">&#39;login&#39;</span>]).$localized_strings[<span class="stringliteral">&#39;prompt_delimiter&#39;</span>].<span class="stringliteral">&#39;&lt;/label&gt;&#39;</span>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                    <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;input id=&quot;c_comdef_admin_login&quot; type=&quot;text&quot; name=&quot;c_comdef_admin_login&quot; value=&quot;&quot; /&gt;&#39;</span>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;div class=&quot;c_comdef_admin_login_form_line_div&quot;&gt;&#39;</span>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                    <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;label for=&quot;c_comdef_admin_password&quot;&gt;&#39;</span>.c_comdef_htmlspecialchars($localized_strings[<span class="stringliteral">&#39;comdef_server_admin_strings&#39;</span>][<span class="stringliteral">&#39;password&#39;</span>]).$localized_strings[<span class="stringliteral">&#39;prompt_delimiter&#39;</span>].<span class="stringliteral">&#39;&lt;/label&gt;&#39;</span>;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                    <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;input type=&quot;password&quot; id=&quot;c_comdef_admin_password&quot; name=&quot;c_comdef_admin_password&quot; value=&quot;&quot; /&gt;&#39;</span>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">if</span> (isset($g_enable_language_selector) &amp;&amp; $g_enable_language_selector) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;div id=&quot;lang_enum_select_div&quot; class=&quot;c_comdef_admin_login_form_line_div&quot;&gt;&#39;</span>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;select id=&quot;lang_enum_select&quot; name=&quot;lang_enum&quot;&gt;&#39;</span>.(defined(<span class="stringliteral">&#39;__DEBUG_MODE__&#39;</span>) ? <span class="stringliteral">&quot;\n&quot;</span> : <span class="stringliteral">&#39;&#39;</span>);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            $lang_array = <a class="code" href="../../dd/d45/classc__comdef__server.html#a73c17efb58fc8625e47b151164c67ad4">c_comdef_server::GetServer</a>()-&gt;GetServerLangs();</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">foreach</span> ($lang_array as $id =&gt; $name) {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="keywordflow">if</span> ($id &amp;&amp; $name) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;option value=&quot;&#39;</span>.c_comdef_htmlspecialchars($id).<span class="charliteral">&#39;&quot;&#39;</span>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a> == $id) {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39; selected=&quot;selected&quot;&#39;</span>;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                }</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>.= <span class="charliteral">&#39;&gt;&#39;</span>.c_comdef_htmlspecialchars($name).<span class="stringliteral">&#39;&lt;/option&gt;&#39;</span>.(<a class="code" href="../../d5/d1d/client__interface_2html_2index_8php.html#a9fbaf120043298ee46edd0722ca2d570">defined</a>(<span class="stringliteral">&#39;__DEBUG_MODE__&#39;</span>) ? <span class="stringliteral">&quot;\n&quot;</span> : <span class="stringliteral">&#39;&#39;</span>);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        }</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;/select&gt;&#39;</span>.(defined(<span class="stringliteral">&#39;__DEBUG_MODE__&#39;</span>) ? <span class="stringliteral">&quot;\n&quot;</span> : <span class="stringliteral">&#39;&#39;</span>);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;div id=&quot;cookie_notice_div&quot; class=&quot;bmlt_cookie_notice_div&quot;&gt;&#39;</span>.c_comdef_htmlspecialchars($localized_strings[<span class="stringliteral">&#39;comdef_server_admin_strings&#39;</span>][<span class="stringliteral">&#39;cookie_monster&#39;</span>]).<span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                    <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;div class=&quot;c_comdef_admin_login_form_submit_div&quot;&gt;&#39;</span>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                    <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;input type=&quot;submit&quot; value=&quot;&#39;</span>.c_comdef_htmlspecialchars($localized_strings[<span class="stringliteral">&#39;comdef_server_admin_strings&#39;</span>][<span class="stringliteral">&#39;button&#39;</span>]).<span class="stringliteral">&#39;&quot; /&gt;&#39;</span>;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;div class=&quot;server_version_display_login&quot;&gt;&#39;</span>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                    <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= htmlspecialchars($server_info[<span class="stringliteral">&#39;version&#39;</span>]);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="comment">// This is how we check for JavaScript availability and enabled cookies (Cookies are required for sessions).</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="comment">// We reveal the form using JavaScript (It stays invisible if no JS), and we set a transitory cookie with JS to be read upon login.</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;/form&gt;</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="stringliteral">        &lt;script type=&quot;text/javascript&quot;&gt;</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="stringliteral">            document.getElementById(\&#39;c_comdef_admin_login_form_inner_container_div\&#39;).style.display=\&#39;block\&#39;;</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="stringliteral">            document.getElementById(\&#39;c_comdef_admin_login\&#39;).focus();</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="stringliteral">            document.cookie=\&#39;comdef_test=test\&#39;;</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="stringliteral">        &lt;/script&gt;&#39;</span>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= <span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;}</div><div class="ttc" id="contact_8php_html_affd9e3eb0aad0a7ca42912cd925f148c"><div class="ttname"><a href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a></div><div class="ttdeci">$ret</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d42/contact_8php_source.html#l00226">contact.php:226</a></div></div>
<div class="ttc" id="comdef-config_8inc_8php_html_a3d69ce6ad2a28c43aa4beb510d8abc31"><div class="ttname"><a href="../../d4/d7d/comdef-config_8inc_8php.html#a3d69ce6ad2a28c43aa4beb510d8abc31">$comdef_global_language</a></div><div class="ttdeci">global $comdef_global_language</div><div class="ttdoc">The local server language enum (Will default to English) </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7d/comdef-config_8inc_8php_source.html#l00011">comdef-config.inc.php:11</a></div></div>
<div class="ttc" id="c__comdef__login_8php_html_afd90ab8b1a9db8484ea16b3493cfdaac"><div class="ttname"><a href="../../df/dd7/c__comdef__login_8php.html#afd90ab8b1a9db8484ea16b3493cfdaac">GetServerInfo</a></div><div class="ttdeci">GetServerInfo()</div><div class="ttdoc">This function parses the main server version from the XML file. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd7/c__comdef__login_8php_source.html#l00190">c_comdef_login.php:190</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a73c17efb58fc8625e47b151164c67ad4"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a73c17efb58fc8625e47b151164c67ad4">c_comdef_server\GetServer</a></div><div class="ttdeci">static GetServer()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00106">c_comdef_server.class.php:106</a></div></div>
<div class="ttc" id="local__server_2index_8php_html_a634e4fb3f0535a99050530167407ff87"><div class="ttname"><a href="../../dd/da0/local__server_2index_8php.html#a634e4fb3f0535a99050530167407ff87">$http_vars</a></div><div class="ttdeci">global $http_vars</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da0/local__server_2index_8php_source.html#l00021">index.php:21</a></div></div>
<div class="ttc" id="comdef__utilityclasses_8inc_8php_html_a69d2ef2f8015dc970e6ffd175b1cb714"><div class="ttname"><a href="../../d0/d45/comdef__utilityclasses_8inc_8php.html#a69d2ef2f8015dc970e6ffd175b1cb714">c_comdef_htmlspecialchars</a></div><div class="ttdeci">c_comdef_htmlspecialchars($in_string)</div><div class="ttdoc">This function creates a displayable string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d45/comdef__utilityclasses_8inc_8php_source.html#l00395">comdef_utilityclasses.inc.php:395</a></div></div>
<div class="ttc" id="classc__comdef__server_html_af8fe64ccd359a4877fc04cd52ac9b938"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#af8fe64ccd359a4877fc04cd52ac9b938">c_comdef_server\GetLocalStrings</a></div><div class="ttdeci">static GetLocalStrings( $in_lang_enum=null)</div><div class="ttdoc">This gets the appropriate language files, and puts all the the strings into an associative array...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02648">c_comdef_server.class.php:2648</a></div></div>
<div class="ttc" id="client__interface_2html_2index_8php_html_a9fbaf120043298ee46edd0722ca2d570"><div class="ttname"><a href="../../d5/d1d/client__interface_2html_2index_8php.html#a9fbaf120043298ee46edd0722ca2d570">defined</a></div><div class="ttdeci">defined( 'BMLT_EXEC') or define( 'BMLT_EXEC'</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1d/client__interface_2html_2index_8php_source.html#l00003">index.php:3</a></div></div>
<div class="ttc" id="xml_2GetServiceBodies_8php_html_a9d2407a49d9569abe0699d8f1189c9d9"><div class="ttname"><a href="../../d9/dc0/xml_2GetServiceBodies_8php.html#a9d2407a49d9569abe0699d8f1189c9d9">$_GET</a></div><div class="ttdeci">$_GET['switcher']</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc0/xml_2GetServiceBodies_8php_source.html#l00030">GetServiceBodies.php:30</a></div></div>
<div class="ttc" id="c__comdef__login_8php_html_affa30129839e40694f3465e97d61c8d9"><div class="ttname"><a href="../../df/dd7/c__comdef__login_8php.html#affa30129839e40694f3465e97d61c8d9">full_url</a></div><div class="ttdeci">full_url($s, $use_forwarded_host=false)</div><div class="ttdoc">Copied verbatim from here: http://stackoverflow.com/questions/6768793/get-the-full-url-in-php. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd7/c__comdef__login_8php_source.html#l00181">c_comdef_login.php:181</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="affa30129839e40694f3465e97d61c8d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affa30129839e40694f3465e97d61c8d9">&#9670;&nbsp;</a></span>full_url()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">full_url </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$use_forwarded_host</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copied verbatim from here: <a href="http://stackoverflow.com/questions/6768793/get-the-full-url-in-php">http://stackoverflow.com/questions/6768793/get-the-full-url-in-php</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>a string, with the full URI. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html#l00181">181</a> of file <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html">c_comdef_login.php</a>.</p>

<p class="reference">References <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html#l00165">url_origin()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html#l00234">c_comdef_LoginForm()</a>.</p>
<div class="fragment"><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;{</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/dd7/c__comdef__login_8php.html#a06880e9206cbc8c077496b5e83c579c5">url_origin</a>($s, $use_forwarded_host) . $s[<span class="stringliteral">&#39;REQUEST_URI&#39;</span>];</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div><div class="ttc" id="c__comdef__login_8php_html_a06880e9206cbc8c077496b5e83c579c5"><div class="ttname"><a href="../../df/dd7/c__comdef__login_8php.html#a06880e9206cbc8c077496b5e83c579c5">url_origin</a></div><div class="ttdeci">url_origin($s, $use_forwarded_host=false)</div><div class="ttdoc">Copied verbatim from here: http://stackoverflow.com/questions/6768793/get-the-full-url-in-php. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd7/c__comdef__login_8php_source.html#l00165">c_comdef_login.php:165</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afd90ab8b1a9db8484ea16b3493cfdaac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd90ab8b1a9db8484ea16b3493cfdaac">&#9670;&nbsp;</a></span>GetServerInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GetServerInfo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function parses the main server version from the XML file. </p>
<dl class="section return"><dt>Returns</dt><dd>a string, containing the version info and banner. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html#l00190">190</a> of file <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html">c_comdef_login.php</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dae/config-bmlt-basic_8inc_8php_source.html#l00021">$config_file_path</a>, <a class="el" href="../../df/d42/contact_8php_source.html#l00226">$ret</a>, and <a class="el" href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02648">c_comdef_server\GetLocalStrings()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html#l00234">c_comdef_LoginForm()</a>.</p>
<div class="fragment"><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;{</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span> (file_exists(dirname(dirname(dirname(__FILE__))).<span class="stringliteral">&#39;/client_interface/serverInfo.xml&#39;</span>)) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        $info_file = <span class="keyword">new</span> DOMDocument;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">if</span> ($info_file instanceof DOMDocument) {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordflow">if</span> (@$info_file-&gt;load(dirname(dirname(dirname(__FILE__))).<span class="stringliteral">&#39;/client_interface/serverInfo.xml&#39;</span>)) {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                $has_info = $info_file-&gt;getElementsByTagName(<span class="stringliteral">&quot;bmltInfo&quot;</span>);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        </div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                <span class="keywordflow">if</span> (($has_info instanceof domnodelist) &amp;&amp; $has_info-&gt;length) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                    <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>[<span class="stringliteral">&#39;version&#39;</span>] = $has_info-&gt;item(0)-&gt;nodeValue;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="../../d4/dae/config-bmlt-basic_8inc_8php.html#a8d6eefb5b0d711598a34966c92069340">$config_file_path</a> = dirname(dirname(dirname(__FILE__))).<span class="stringliteral">&#39;/server/config/get-config.php&#39;</span>;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span> (file_exists(<a class="code" href="../../d4/dae/config-bmlt-basic_8inc_8php.html#a8d6eefb5b0d711598a34966c92069340">$config_file_path</a>)) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        include(<a class="code" href="../../d4/dae/config-bmlt-basic_8inc_8php.html#a8d6eefb5b0d711598a34966c92069340">$config_file_path</a>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        $localized_strings = <a class="code" href="../../dd/d45/classc__comdef__server.html#af8fe64ccd359a4877fc04cd52ac9b938">c_comdef_server::GetLocalStrings</a>();</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">if</span> (isset($bmlt_title) &amp;&amp; trim($bmlt_title)) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>[<span class="stringliteral">&#39;title&#39;</span>] = trim($bmlt_title);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>[<span class="stringliteral">&#39;title&#39;</span>] = $localized_strings[<span class="stringliteral">&#39;comdef_server_admin_strings&#39;</span>][<span class="stringliteral">&#39;login_banner&#39;</span>];</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">if</span> (isset($banner_text) &amp;&amp; trim($banner_text)) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>[<span class="stringliteral">&#39;banner_text&#39;</span>] = trim($banner_text);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>[<span class="stringliteral">&#39;banner_text&#39;</span>] = $localized_strings[<span class="stringliteral">&#39;comdef_server_admin_strings&#39;</span>][<span class="stringliteral">&#39;login_underbanner&#39;</span>];</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div><div class="ttc" id="contact_8php_html_affd9e3eb0aad0a7ca42912cd925f148c"><div class="ttname"><a href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a></div><div class="ttdeci">$ret</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d42/contact_8php_source.html#l00226">contact.php:226</a></div></div>
<div class="ttc" id="classc__comdef__server_html_af8fe64ccd359a4877fc04cd52ac9b938"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#af8fe64ccd359a4877fc04cd52ac9b938">c_comdef_server\GetLocalStrings</a></div><div class="ttdeci">static GetLocalStrings( $in_lang_enum=null)</div><div class="ttdoc">This gets the appropriate language files, and puts all the the strings into an associative array...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l02648">c_comdef_server.class.php:2648</a></div></div>
<div class="ttc" id="config-bmlt-basic_8inc_8php_html_a8d6eefb5b0d711598a34966c92069340"><div class="ttname"><a href="../../d4/dae/config-bmlt-basic_8inc_8php.html#a8d6eefb5b0d711598a34966c92069340">$config_file_path</a></div><div class="ttdeci">$config_file_path</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dae/config-bmlt-basic_8inc_8php_source.html#l00021">config-bmlt-basic.inc.php:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a06880e9206cbc8c077496b5e83c579c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06880e9206cbc8c077496b5e83c579c5">&#9670;&nbsp;</a></span>url_origin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">url_origin </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$use_forwarded_host</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copied verbatim from here: <a href="http://stackoverflow.com/questions/6768793/get-the-full-url-in-php">http://stackoverflow.com/questions/6768793/get-the-full-url-in-php</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>a string, with the full URI. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html#l00165">165</a> of file <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html">c_comdef_login.php</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html#l00181">full_url()</a>.</p>
<div class="fragment"><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;{</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    $ssl = ( !empty($s[<span class="stringliteral">&#39;HTTPS&#39;</span>]) &amp;&amp; $s[<span class="stringliteral">&#39;HTTPS&#39;</span>] == <span class="stringliteral">&#39;on&#39;</span> ) ? <span class="keyword">true</span>:<span class="keyword">false</span>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    $sp = strtolower($s[<span class="stringliteral">&#39;SERVER_PROTOCOL&#39;</span>]);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    $protocol = substr($sp, 0, strpos($sp, <span class="charliteral">&#39;/&#39;</span>)) . ( ( $ssl ) ? <span class="charliteral">&#39;s&#39;</span> : <span class="stringliteral">&#39;&#39;</span> );</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    $port = $s[<span class="stringliteral">&#39;SERVER_PORT&#39;</span>];</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    $port = ( (!$ssl &amp;&amp; $port==<span class="stringliteral">&#39;80&#39;</span>) || ($ssl &amp;&amp; $port==<span class="stringliteral">&#39;443&#39;</span>) ) ? <span class="stringliteral">&#39;&#39;</span> : <span class="charliteral">&#39;:&#39;</span>.$port;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    $host = ( $use_forwarded_host &amp;&amp; isset($s[<span class="stringliteral">&#39;HTTP_X_FORWARDED_HOST&#39;</span>]) ) ? $s[<span class="stringliteral">&#39;HTTP_X_FORWARDED_HOST&#39;</span>] : (isset($s[<span class="stringliteral">&#39;HTTP_HOST&#39;</span>]) ? $s[<span class="stringliteral">&#39;HTTP_HOST&#39;</span>] : null);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    $host = isset($host) ? $host : $s[<span class="stringliteral">&#39;SERVER_NAME&#39;</span>] . $port;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">return</span> $protocol . <span class="stringliteral">&#39;://&#39;</span> . $host;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2b7b18bf5bcad3f6bf916f34fa9e042f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b7b18bf5bcad3f6bf916f34fa9e042f">&#9670;&nbsp;</a></span>$lang_enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$lang_enum = $t_server-&gt;GetServer()-&gt;GetLocalLang()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html#l00057">57</a> of file <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html">c_comdef_login.php</a>.</p>

</div>
</div>
<a id="a5a010227eb59a7242d82f0f33f714377"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a010227eb59a7242d82f0f33f714377">&#9670;&nbsp;</a></span>$t_server</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$t_server = <a class="el" href="../../dd/d45/classc__comdef__server.html#a00dcaf66374f7850e53a3864b4854cfc">c_comdef_server::MakeServer</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html#l00055">55</a> of file <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html">c_comdef_login.php</a>.</p>

</div>
</div>
<a id="aa3b6911ef35955098de005f2dbf3fcb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3b6911ef35955098de005f2dbf3fcb3">&#9670;&nbsp;</a></span>else</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d22/main__console_8php.html#a6bba69f5dad3bde46b994f13e57514fe">if</a> (isset( $_COOKIE) &amp;&amp;isset( $_COOKIE[ 'bmlt_admin_lang_pref']) &amp;&amp;$_COOKIE[ 'bmlt_admin_lang_pref']) <a class="el" href="../../d0/d22/main__console_8php.html#a6bba69f5dad3bde46b994f13e57514fe">if</a> (isset( $http_vars[ 'lang_enum']) &amp;&amp;$http_vars[ 'lang_enum']) <a class="el" href="../../d0/d22/main__console_8php.html#a6bba69f5dad3bde46b994f13e57514fe">if</a> (isset( $g_enable_language_selector) &amp;&amp;$g_enable_language_selector) <a class="el" href="../../d0/d22/main__console_8php.html#a6bba69f5dad3bde46b994f13e57514fe">if</a> (!isset( $_SESSION)) <a class="el" href="../../d0/d22/main__console_8php.html#a6bba69f5dad3bde46b994f13e57514fe">if</a> ((isset( $_GET[ 'admin_action']) &amp;&amp;( $_GET[ 'admin_action']=='logout'))||(isset( $_POST[ 'admin_action']) &amp;&amp;( $_POST[ 'admin_action']=='logout'))||(isset( $_POST[ 'admin_action']) &amp;&amp;( $_POST[ 'admin_action']=='login'))) <a class="el" href="../../d0/d22/main__console_8php.html#a6bba69f5dad3bde46b994f13e57514fe">if</a> (isset( $_SESSION[ $admin_session_name])) else</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div><div class="line">    echo <a class="code" href="../../df/dd7/c__comdef__login_8php.html#a6ed6805dabe7c24aaf39b46f2396a2f3">c_comdef_LoginForm</a>(<a class="code" href="../../df/dd7/c__comdef__login_8php.html#a5a010227eb59a7242d82f0f33f714377">$t_server</a>)</div><div class="ttc" id="c__comdef__login_8php_html_a5a010227eb59a7242d82f0f33f714377"><div class="ttname"><a href="../../df/dd7/c__comdef__login_8php.html#a5a010227eb59a7242d82f0f33f714377">$t_server</a></div><div class="ttdeci">$t_server</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd7/c__comdef__login_8php_source.html#l00055">c_comdef_login.php:55</a></div></div>
<div class="ttc" id="c__comdef__login_8php_html_a6ed6805dabe7c24aaf39b46f2396a2f3"><div class="ttname"><a href="../../df/dd7/c__comdef__login_8php.html#a6ed6805dabe7c24aaf39b46f2396a2f3">c_comdef_LoginForm</a></div><div class="ttdeci">c_comdef_LoginForm(&amp;$in_server)</div><div class="ttdoc">Returns HTML for the login form. If the user is not logged in, then they get the form. Otherwise, the login is processed, or the user is vetted. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd7/c__comdef__login_8php_source.html#l00234">c_comdef_login.php:234</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html#l00155">155</a> of file <a class="el" href="../../df/dd7/c__comdef__login_8php_source.html">c_comdef_login.php</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Aug 6 2019 07:01:56 for BMLT Root Server by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
