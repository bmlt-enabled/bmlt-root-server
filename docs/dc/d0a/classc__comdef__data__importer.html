<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BMLT Root Server: c_comdef_data_importer Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BMLT Root Server
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../d0/dac/classc__comdef__data__importer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">c_comdef_data_importer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a095c5d389db211932136b53f25f39685"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#a095c5d389db211932136b53f25f39685">__construct</a> ()</td></tr>
<tr class="memdesc:a095c5d389db211932136b53f25f39685"><td class="mdescLeft">&#160;</td><td class="mdescRight">Object Constructor.  <a href="#a095c5d389db211932136b53f25f39685">More...</a><br /></td></tr>
<tr class="separator:a095c5d389db211932136b53f25f39685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea74bd620d0f7c66cca0cf90c0bebfe8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#aea74bd620d0f7c66cca0cf90c0bebfe8">bmlt_get_delimited_file_contents</a> ( $in_default_filename=null)</td></tr>
<tr class="memdesc:aea74bd620d0f7c66cca0cf90c0bebfe8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens a tab- or comma-delimited file, and loads it into an associative array.  <a href="#aea74bd620d0f7c66cca0cf90c0bebfe8">More...</a><br /></td></tr>
<tr class="separator:aea74bd620d0f7c66cca0cf90c0bebfe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a053a55425e264a264bdaef8222711745"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#a053a55425e264a264bdaef8222711745">AddOneMeeting</a> (&amp;$in_out_meeting_array, $in_templates_array)</td></tr>
<tr class="memdesc:a053a55425e264a264bdaef8222711745"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds one meeting to the database.  <a href="#a053a55425e264a264bdaef8222711745">More...</a><br /></td></tr>
<tr class="separator:a053a55425e264a264bdaef8222711745"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6b012168b111a4d70fac75b133994dd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#ab6b012168b111a4d70fac75b133994dd">FetchTemplates</a> ()</td></tr>
<tr class="memdesc:ab6b012168b111a4d70fac75b133994dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch the ID = 0 templates for the key/value pairs.  <a href="#ab6b012168b111a4d70fac75b133994dd">More...</a><br /></td></tr>
<tr class="separator:ab6b012168b111a4d70fac75b133994dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b924a7b0dd1c5d53b04e8ab6d1562bd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#a3b924a7b0dd1c5d53b04e8ab6d1562bd">extract_service_bodies</a> ( $in_file_contents)</td></tr>
<tr class="memdesc:a3b924a7b0dd1c5d53b04e8ab6d1562bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the Service bodies from the database, and returns an associative array that can be used to match them to World IDs, or to clear out previous data for those Service bodies.  <a href="#a3b924a7b0dd1c5d53b04e8ab6d1562bd">More...</a><br /></td></tr>
<tr class="separator:a3b924a7b0dd1c5d53b04e8ab6d1562bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4e3612125f74e427b507b0af27a6045"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#ae4e3612125f74e427b507b0af27a6045">DeleteAllOldMeetings</a> ( $in_sb_array)</td></tr>
<tr class="memdesc:ae4e3612125f74e427b507b0af27a6045"><td class="mdescLeft">&#160;</td><td class="mdescRight">This deletes all meeting data, and changes (permanent delete) for all meeting data for the Service bodies passed in via the array.  <a href="#ae4e3612125f74e427b507b0af27a6045">More...</a><br /></td></tr>
<tr class="separator:ae4e3612125f74e427b507b0af27a6045"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bded3a22c3d8a55de3202e3a054ccab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#a5bded3a22c3d8a55de3202e3a054ccab">GeocodeAddress</a> ( $in_address, $in_gkey, $in_region=null)</td></tr>
<tr class="memdesc:a5bded3a22c3d8a55de3202e3a054ccab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given an address string, return a geocode.  <a href="#a5bded3a22c3d8a55de3202e3a054ccab">More...</a><br /></td></tr>
<tr class="separator:a5bded3a22c3d8a55de3202e3a054ccab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ea29697892f35a67a33f1eaa9e0f1df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#a1ea29697892f35a67a33f1eaa9e0f1df">xml_parser_parse_xml</a> ( $in_xml)</td></tr>
<tr class="memdesc:a1ea29697892f35a67a33f1eaa9e0f1df"><td class="mdescLeft">&#160;</td><td class="mdescRight">A basic function to parse the XML reply from Google Geocode, and return usable fields.  <a href="#a1ea29697892f35a67a33f1eaa9e0f1df">More...</a><br /></td></tr>
<tr class="separator:a1ea29697892f35a67a33f1eaa9e0f1df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7343ad5ea13957f486733f764e24ffc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#ae7343ad5ea13957f486733f764e24ffc">BuildAddress</a> ( $row)</td></tr>
<tr class="separator:ae7343ad5ea13957f486733f764e24ffc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dbf3facdc542b38d8f0f84ac942eca1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#a4dbf3facdc542b38d8f0f84ac942eca1">ValidEmailAddress</a> ( $in_test_address)</td></tr>
<tr class="memdesc:a4dbf3facdc542b38d8f0f84ac942eca1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function validates email addresses. The input can be a single email address, or a series of comma-delimited addresses.  <a href="#a4dbf3facdc542b38d8f0f84ac942eca1">More...</a><br /></td></tr>
<tr class="separator:a4dbf3facdc542b38d8f0f84ac942eca1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc65e716c2617b5821dd094f00fe35f7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#adc65e716c2617b5821dd094f00fe35f7">format_sorter</a> ($a, $b)</td></tr>
<tr class="separator:adc65e716c2617b5821dd094f00fe35f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6be609888562e0a20417f2c7a996662"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#af6be609888562e0a20417f2c7a996662">translate_format_code</a> ($in_code)</td></tr>
<tr class="separator:af6be609888562e0a20417f2c7a996662"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b5adb70a7aed1d4f6cda2ffbca36d6b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#a6b5adb70a7aed1d4f6cda2ffbca36d6b">microtime_float</a> ()</td></tr>
<tr class="separator:a6b5adb70a7aed1d4f6cda2ffbca36d6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52c8d60517bfa0e5c30a419d92be6c16"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#a52c8d60517bfa0e5c30a419d92be6c16">func_convert_from_english_full_weekday</a> ( $in_weekday)</td></tr>
<tr class="memdesc:a52c8d60517bfa0e5c30a419d92be6c16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts an English full-day ('Sunday', 'Monday', etc.) to a BMLT number (1-7). Case counts.  <a href="#a52c8d60517bfa0e5c30a419d92be6c16">More...</a><br /></td></tr>
<tr class="separator:a52c8d60517bfa0e5c30a419d92be6c16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa04a26ac9123764a67ebdeb2f86a068"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#aaa04a26ac9123764a67ebdeb2f86a068">func_start_time_from_simple_military</a> ( $in_military_time)</td></tr>
<tr class="memdesc:aaa04a26ac9123764a67ebdeb2f86a068"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts an integer time in simple military format to an SQL-format time (HH:MM:SS) as a string.  <a href="#aaa04a26ac9123764a67ebdeb2f86a068">More...</a><br /></td></tr>
<tr class="separator:aaa04a26ac9123764a67ebdeb2f86a068"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:abedd9465fca9e71fc5ac571f580fac2c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#abedd9465fca9e71fc5ac571f580fac2c">$m_server</a></td></tr>
<tr class="separator:abedd9465fca9e71fc5ac571f580fac2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69cdea8f9e7abfdcf9791b9d66e6008a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/classc__comdef__data__importer.html#a69cdea8f9e7abfdcf9791b9d66e6008a">$m_local_strings</a></td></tr>
<tr class="separator:a69cdea8f9e7abfdcf9791b9d66e6008a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00026">26</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a095c5d389db211932136b53f25f39685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a095c5d389db211932136b53f25f39685">&#9670;&nbsp;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__construct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Object Constructor. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00037">37</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>

<p class="reference">References <a class="el" href="../../da/d64/de_2data__transfer__strings_8php_source.html#l00022">$comdef_data_transfer_strings</a>, <a class="el" href="../../dd/da0/local__server_2index_8php_source.html#l00023">$lang_enum</a>, <a class="el" href="../../df/d40/c__comdef__user_8class_8php_source.html#l00027">_USER_LEVEL_SERVER_ADMIN</a>, and <a class="el" href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00092">c_comdef_server\MakeServer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    {</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="comment">// We actually instantiate a root server, here.</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        $this-&gt;m_server = <a class="code" href="../../dd/d45/classc__comdef__server.html#a00dcaf66374f7850e53a3864b4854cfc">c_comdef_server::MakeServer</a>();</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    </div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <span class="keywordflow">if</span> (!($this-&gt;m_server instanceof <a class="code" href="../../dd/d45/classc__comdef__server.html">c_comdef_server</a>)) {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            die(<span class="stringliteral">&#39;Cannot instantiate the root server!&#39;</span>);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        }</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        </div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;my_user-&gt;GetUserLevel() == <a class="code" href="../../df/d40/c__comdef__user_8class_8php.html#a45f118b0120941c6f0099e0467bea854">_USER_LEVEL_SERVER_ADMIN</a>) {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            require_once(dirname(__FILE__).<span class="stringliteral">&#39;/lang/&#39;</span>.<a class="code" href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a>.<span class="stringliteral">&#39;/data_transfer_strings.php&#39;</span>);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;            $this-&gt;m_local_strings = <a class="code" href="../../da/d64/de_2data__transfer__strings_8php.html#a8d4a6a483c8064c6d30ef479e17d75d6">$comdef_data_transfer_strings</a>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            die(<span class="stringliteral">&#39;NOT AUTHORIZED&#39;</span>);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        }</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    }</div><div class="ttc" id="c__comdef__user_8class_8php_html_a45f118b0120941c6f0099e0467bea854"><div class="ttname"><a href="../../df/d40/c__comdef__user_8class_8php.html#a45f118b0120941c6f0099e0467bea854">_USER_LEVEL_SERVER_ADMIN</a></div><div class="ttdeci">const _USER_LEVEL_SERVER_ADMIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d40/c__comdef__user_8class_8php_source.html#l00027">c_comdef_user.class.php:27</a></div></div>
<div class="ttc" id="local__server_2index_8php_html_a2b7b18bf5bcad3f6bf916f34fa9e042f"><div class="ttname"><a href="../../dd/da0/local__server_2index_8php.html#a2b7b18bf5bcad3f6bf916f34fa9e042f">$lang_enum</a></div><div class="ttdeci">$lang_enum</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da0/local__server_2index_8php_source.html#l00023">index.php:23</a></div></div>
<div class="ttc" id="classc__comdef__server_html_a00dcaf66374f7850e53a3864b4854cfc"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html#a00dcaf66374f7850e53a3864b4854cfc">c_comdef_server\MakeServer</a></div><div class="ttdeci">static MakeServer()</div><div class="ttdoc">This is the factory for the server instantiation. It makes sure that only one instance exists...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00092">c_comdef_server.class.php:92</a></div></div>
<div class="ttc" id="classc__comdef__server_html"><div class="ttname"><a href="../../dd/d45/classc__comdef__server.html">c_comdef_server</a></div><div class="ttdoc">This class is the main server class. It instantiates a PDO database object, and is the starting point...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0c/c__comdef__server_8class_8php_source.html#l00047">c_comdef_server.class.php:47</a></div></div>
<div class="ttc" id="de_2data__transfer__strings_8php_html_a8d4a6a483c8064c6d30ef479e17d75d6"><div class="ttname"><a href="../../da/d64/de_2data__transfer__strings_8php.html#a8d4a6a483c8064c6d30ef479e17d75d6">$comdef_data_transfer_strings</a></div><div class="ttdeci">$comdef_data_transfer_strings</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d64/de_2data__transfer__strings_8php_source.html#l00022">data_transfer_strings.php:22</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a053a55425e264a264bdaef8222711745"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a053a55425e264a264bdaef8222711745">&#9670;&nbsp;</a></span>AddOneMeeting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AddOneMeeting </td>
          <td>(</td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$in_out_meeting_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_templates_array</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds one meeting to the database. </p>
<dl class="section return"><dt>Returns</dt><dd>a boolean. This is true if the meeting was successfully added. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_out_meeting_array</td><td>The meeting data, as an associative array. It must have the exact keys for the database table columns. No prompts, data type, etc. That will be supplied by the routine. Only a value. The 'id_bigint' field will be set to the new meeting ID. </td></tr>
    <tr><td class="paramname">$in_templates_array</td><td>This contains the key/value templates for the meeting data. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00120">120</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>

<p class="reference">References <a class="el" href="../../df/d42/contact_8php_source.html#l00227">$meeting_id</a>, <a class="el" href="../../df/d42/contact_8php_source.html#l00226">$ret</a>, <a class="el" href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00267">c_comdef_dbsingleton\preparedExec()</a>, and <a class="el" href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00231">c_comdef_dbsingleton\preparedQuery()</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        </div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="comment">// We break the input array into elements destined for the main table, and elements destined for the data table(s).</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        $in_meeting_array_main = array_intersect_key($in_out_meeting_array, $this-&gt;m_local_strings[<span class="stringliteral">&#39;key_strings&#39;</span>]);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        $in_meeting_array_other = array_diff_key($in_out_meeting_array, $this-&gt;m_local_strings[<span class="stringliteral">&#39;key_strings&#39;</span>]);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        </div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="comment">// OK, we&#39;ll be creating a PDO prepared query, so we break our main table data into keys, placeholders and values.</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        $keys = array();</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        $values = array();</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        $values_placeholders = array();</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">foreach</span> ($in_meeting_array_main as $key =&gt; $value) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            array_push($keys, $key);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            array_push($values, $value);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            array_push($values_placeholders, <span class="charliteral">&#39;?&#39;</span>);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        </div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="comment">// Now that we have the main table keys, placeholders and arrays, we create the INSERT query and add the meeting&#39;s main data.</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        $keys = <span class="stringliteral">&quot;(`&quot;</span>.implode(<span class="stringliteral">&quot;`,`&quot;</span>, $keys).<span class="stringliteral">&quot;`)&quot;</span>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        $values_placeholders = <span class="stringliteral">&quot;(&quot;</span>.implode(<span class="stringliteral">&quot;,&quot;</span>, $values_placeholders).<span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        $sql = <span class="stringliteral">&quot;INSERT INTO `&quot;</span>.$this-&gt;m_server-&gt;GetMeetingTableName_obj().<span class="stringliteral">&quot;_main` $keys VALUES $values_placeholders&quot;</span>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        </div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">try</span> <span class="comment">// Catch any thrown exceptions.</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            $result = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a703536f3e137679639f4687b45dd115c">c_comdef_dbsingleton::preparedExec</a>($sql, $values);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            </div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="comment">// If that was successful, we extract the ID for the meeting.</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <span class="keywordflow">if</span> ($result) {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                </div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                $sql = <span class="stringliteral">&quot;SELECT LAST_INSERT_ID()&quot;</span>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                $row2 = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql, array());</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                <span class="keywordflow">if</span> (is_array($row2) &amp;&amp; count($row2) == 1) {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                    <a class="code" href="../../df/d42/contact_8php.html#a49d147e63a58f14bbd7211f6cd474958">$meeting_id</a> = intval($row2[0][<span class="stringliteral">&#39;last_insert_id()&#39;</span>]);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    die(<span class="stringliteral">&quot;Can&#39;t get the meeting ID!&quot;</span>);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                </div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                $in_out_meeting_array[<span class="stringliteral">&#39;id_bigint&#39;</span>] = <a class="code" href="../../df/d42/contact_8php.html#a49d147e63a58f14bbd7211f6cd474958">$meeting_id</a>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                </div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                <span class="comment">// OK. We have now created the basic meeting info, and we have the ID necessary to create the key/value pairs for the data tables.</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                <span class="comment">// In 99% of the cases, we will only fill the _data table. However, we should check for long data, in case we need to use the _longdata table.</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                $data_values = null;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                $londata_values = null;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                </div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                <span class="comment">// Here, we simply extract the parts of the array that correspond to the data and longdata tables.</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                <span class="keywordflow">if</span> (isset($in_templates_array[<span class="stringliteral">&#39;data&#39;</span>]) &amp;&amp; is_array($in_templates_array[<span class="stringliteral">&#39;data&#39;</span>]) &amp;&amp; count($in_templates_array[<span class="stringliteral">&#39;data&#39;</span>])) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                    $data_values = array_intersect_key($in_out_meeting_array, $in_templates_array[<span class="stringliteral">&#39;data&#39;</span>]);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                </div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                <span class="keywordflow">if</span> (isset($in_templates_array[<span class="stringliteral">&#39;longdata&#39;</span>]) &amp;&amp; is_array($in_templates_array[<span class="stringliteral">&#39;longdata&#39;</span>]) &amp;&amp; count($in_templates_array[<span class="stringliteral">&#39;longdata&#39;</span>])) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                    $londata_values = array_intersect_key($in_out_meeting_array, $in_templates_array[<span class="stringliteral">&#39;longdata&#39;</span>]);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                </div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <span class="comment">// What we do here, is expand each of the input key/value pairs to have the characteristics assigned by the template for that key.</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                <span class="keywordflow">foreach</span> ($data_values as $key =&gt; &amp;$data_value) {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                    $val = $data_value; <span class="comment">// We replace a single value with an associative array, so save the value.</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                    <span class="keywordflow">if</span> (isset($val)) {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                        $data_value = array();</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                        $data_value[<span class="stringliteral">&#39;meetingid_bigint&#39;</span>] = <a class="code" href="../../df/d42/contact_8php.html#a49d147e63a58f14bbd7211f6cd474958">$meeting_id</a>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                        $data_value[<span class="stringliteral">&#39;key&#39;</span>] = $key;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                        $data_value[<span class="stringliteral">&#39;field_prompt&#39;</span>] = $in_templates_array[<span class="stringliteral">&#39;data&#39;</span>][$key][<span class="stringliteral">&#39;field_prompt&#39;</span>];</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                        $data_value[<span class="stringliteral">&#39;lang_enum&#39;</span>] = $in_templates_array[<span class="stringliteral">&#39;data&#39;</span>][$key][<span class="stringliteral">&#39;lang_enum&#39;</span>];</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                        $data_value[<span class="stringliteral">&#39;visibility&#39;</span>] = $in_templates_array[<span class="stringliteral">&#39;data&#39;</span>][$key][<span class="stringliteral">&#39;visibility&#39;</span>];</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                        <span class="keywordflow">if</span> (isset($in_templates_array[<span class="stringliteral">&#39;data&#39;</span>][$key][<span class="stringliteral">&#39;data_bigint&#39;</span>]) &amp;&amp; $in_templates_array[<span class="stringliteral">&#39;data&#39;</span>][$key][<span class="stringliteral">&#39;data_bigint&#39;</span>]) {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                            $data_value[<span class="stringliteral">&#39;data_bigint&#39;</span>] = intval($val);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                            $data_value[<span class="stringliteral">&#39;data_double&#39;</span>] = null;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                            $data_value[<span class="stringliteral">&#39;data_string&#39;</span>] = null;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                        } elseif (isset($in_templates_array[<span class="stringliteral">&#39;data&#39;</span>][$key][<span class="stringliteral">&#39;data_double&#39;</span>]) &amp;&amp; $in_templates_array[<span class="stringliteral">&#39;data&#39;</span>][$key][<span class="stringliteral">&#39;data_double&#39;</span>]) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                            $data_value[<span class="stringliteral">&#39;data_double&#39;</span>] = floatval($val);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                            $data_value[<span class="stringliteral">&#39;data_bigint&#39;</span>] = null;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                            $data_value[<span class="stringliteral">&#39;data_string&#39;</span>] = null;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                        } elseif (isset($in_templates_array[<span class="stringliteral">&#39;data&#39;</span>][$key][<span class="stringliteral">&#39;data_string&#39;</span>]) &amp;&amp; $in_templates_array[<span class="stringliteral">&#39;data&#39;</span>][$key][<span class="stringliteral">&#39;data_string&#39;</span>]) {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                            $data_value[<span class="stringliteral">&#39;data_string&#39;</span>] = $val;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                            $data_value[<span class="stringliteral">&#39;data_bigint&#39;</span>] = null;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                            $data_value[<span class="stringliteral">&#39;data_double&#39;</span>] = null;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                        }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                        $data_value = null;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                        unset($data_value);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                    }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                <span class="keywordflow">foreach</span> ($londata_values as $key =&gt; &amp;$londata_value) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    $val = $data_value; <span class="comment">// We replace a single value with an associative array, so save the value.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                    <span class="keywordflow">if</span> (isset($val)) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                        $londata_value[<span class="stringliteral">&#39;meetingid_bigint&#39;</span>] = <a class="code" href="../../df/d42/contact_8php.html#a49d147e63a58f14bbd7211f6cd474958">$meeting_id</a>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                        $londata_value[<span class="stringliteral">&#39;key&#39;</span>] = $key;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                        $londata_value[<span class="stringliteral">&#39;field_prompt&#39;</span>] = $in_templates_array[<span class="stringliteral">&#39;data&#39;</span>][$key][<span class="stringliteral">&#39;field_prompt&#39;</span>];</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                        $londata_value[<span class="stringliteral">&#39;lang_enum&#39;</span>] = $in_templates_array[<span class="stringliteral">&#39;data&#39;</span>][$key][<span class="stringliteral">&#39;lang_enum&#39;</span>];</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                        $londata_value[<span class="stringliteral">&#39;visibility&#39;</span>] = $in_templates_array[<span class="stringliteral">&#39;data&#39;</span>][$key][<span class="stringliteral">&#39;visibility&#39;</span>];</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                        <span class="keywordflow">if</span> ((isset($in_templates_array[<span class="stringliteral">&#39;longdata&#39;</span>][$key][<span class="stringliteral">&#39;data_longtext&#39;</span>]) &amp;&amp; $in_templates_array[<span class="stringliteral">&#39;longdata&#39;</span>][$key][<span class="stringliteral">&#39;data_longtext&#39;</span>])) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                            $londata_value[<span class="stringliteral">&#39;data_longtext&#39;</span>] = $val;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                            $londata_value[<span class="stringliteral">&#39;data_blob&#39;</span>] = null;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                        } elseif ((isset($in_templates_array[<span class="stringliteral">&#39;longdata&#39;</span>][$key][<span class="stringliteral">&#39;data_blob&#39;</span>]) &amp;&amp; $in_templates_array[<span class="stringliteral">&#39;longdata&#39;</span>][$key][<span class="stringliteral">&#39;data_blob&#39;</span>])) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                            $londata_value[<span class="stringliteral">&#39;data_blob&#39;</span>] = $val;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                            $londata_value[<span class="stringliteral">&#39;data_longtext&#39;</span>] = null;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                            $londata_value = null;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                        }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                        $londata_value = null;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                        unset($londata_value);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                    }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    </div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                <span class="comment">// OK. At this point, we have 2 arrays, one that corresponds to entries into the _data table, and the other into the _longdata table. Time to insert the data.</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                </div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                <span class="comment">// First, we do the data array.</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                <span class="keywordflow">if</span> (isset($data_values) &amp;&amp; is_array($data_values) &amp;&amp; count($data_values)) {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                    <span class="keywordflow">foreach</span> ($data_values as $value) {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                        <span class="keywordflow">if</span> (isset($value) &amp;&amp; is_array($value) &amp;&amp; count($value)) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                            $keys = array();</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                            $values = array();</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                            $values_placeholders = array();</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                        </div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                            <span class="keywordflow">foreach</span> ($value as $key =&gt; $val) {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                                array_push($keys, $key);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                                array_push($values, $val);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                                array_push($values_placeholders, <span class="charliteral">&#39;?&#39;</span>);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                            }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                    </div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                            <span class="keywordflow">if</span> (is_array($values) &amp;&amp; count($values)) {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                                <span class="comment">// Now that we have the main table keys, placeholders and arrays, we create the INSERT query and add the meeting&#39;s main data.</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                $keys = <span class="stringliteral">&quot;(`&quot;</span>.implode(<span class="stringliteral">&quot;`,`&quot;</span>, $keys).<span class="stringliteral">&quot;`)&quot;</span>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                                $values_placeholders = <span class="stringliteral">&quot;(&quot;</span>.implode(<span class="stringliteral">&quot;,&quot;</span>, $values_placeholders).<span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                                $sql = <span class="stringliteral">&quot;INSERT INTO `&quot;</span>.$this-&gt;m_server-&gt;GetMeetingTableName_obj().<span class="stringliteral">&quot;_data` $keys VALUES $values_placeholders&quot;</span>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                $result = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a703536f3e137679639f4687b45dd115c">c_comdef_dbsingleton::preparedExec</a>($sql, $values);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                            }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                        }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                    }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                }</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                </div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                <span class="comment">// Next, we do the longdata array.</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                <span class="keywordflow">if</span> (isset($londata_values) &amp;&amp; is_array($londata_values) &amp;&amp; count($londata_values)) {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                    <span class="keywordflow">foreach</span> ($londata_values as $value) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                        <span class="keywordflow">if</span> (isset($value) &amp;&amp; is_array($value) &amp;&amp; count($value)) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                            $keys = array();</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                            $values = array();</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                            $values_placeholders = array();</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                        </div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                            <span class="keywordflow">foreach</span> ($value as $key =&gt; $val) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                                array_push($keys, $key);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                                array_push($values, $val);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                array_push($values_placeholders, <span class="charliteral">&#39;?&#39;</span>);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                            }</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                            </div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                            <span class="keywordflow">if</span> (is_array($values) &amp;&amp; count($values)) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                                <span class="comment">// Now that we have the longdata table keys, placeholders and arrays, we create the INSERT query and add the meeting&#39;s main data.</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                                $keys = <span class="stringliteral">&quot;(`&quot;</span>.implode(<span class="stringliteral">&quot;`,`&quot;</span>, $keys).<span class="stringliteral">&quot;`)&quot;</span>;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                                $values_placeholders = <span class="stringliteral">&quot;(&quot;</span>.implode(<span class="stringliteral">&quot;,&quot;</span>, $values_placeholders).<span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                                $sql = <span class="stringliteral">&quot;INSERT INTO `&quot;</span>.$this-&gt;m_server-&gt;GetMeetingTableName_obj().<span class="stringliteral">&quot;_longdata` $keys VALUES $values_placeholders&quot;</span>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                                $result = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a703536f3e137679639f4687b45dd115c">c_comdef_dbsingleton::preparedExec</a>($sql, $values);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                            }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                        }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                    }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                die(<span class="stringliteral">&quot;Can&#39;t create a new meeting!&quot;</span>);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        } <span class="keywordflow">catch</span> (Exception $e) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            die(<span class="stringliteral">&#39;&lt;pre&gt;&#39;</span>.htmlspecialchars(print_r($e, <span class="keyword">true</span>)).<span class="stringliteral">&#39;&lt;/pre&gt;&#39;</span>);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        </div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div><div class="ttc" id="contact_8php_html_affd9e3eb0aad0a7ca42912cd925f148c"><div class="ttname"><a href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a></div><div class="ttdeci">$ret</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d42/contact_8php_source.html#l00226">contact.php:226</a></div></div>
<div class="ttc" id="contact_8php_html_a49d147e63a58f14bbd7211f6cd474958"><div class="ttname"><a href="../../df/d42/contact_8php.html#a49d147e63a58f14bbd7211f6cd474958">$meeting_id</a></div><div class="ttdeci">$meeting_id</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d42/contact_8php_source.html#l00227">contact.php:227</a></div></div>
<div class="ttc" id="classc__comdef__dbsingleton_html_a1bcb4b189c8184f00f4dae50d29723d3"><div class="ttname"><a href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton\preparedQuery</a></div><div class="ttdeci">static preparedQuery( $sql, $params=array(), $fetchKeyPair=false)</div><div class="ttdoc">Wrapper for preparing and executing a PDOStatement that returns a resultset e.g. SELECT SQL statement...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00231">c_comdef_dbsingleton.class.php:231</a></div></div>
<div class="ttc" id="classc__comdef__dbsingleton_html_a703536f3e137679639f4687b45dd115c"><div class="ttname"><a href="../../d0/df2/classc__comdef__dbsingleton.html#a703536f3e137679639f4687b45dd115c">c_comdef_dbsingleton\preparedExec</a></div><div class="ttdeci">static preparedExec( $sql, $params=array())</div><div class="ttdoc">Wrapper for preparing and executing a PDOStatement that does not return a resultset e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00267">c_comdef_dbsingleton.class.php:267</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aea74bd620d0f7c66cca0cf90c0bebfe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea74bd620d0f7c66cca0cf90c0bebfe8">&#9670;&nbsp;</a></span>bmlt_get_delimited_file_contents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bmlt_get_delimited_file_contents </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_default_filename</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens a tab- or comma-delimited file, and loads it into an associative array. </p>
<dl class="section return"><dt>Returns</dt><dd>an associative array with the file contents. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_default_filename</td><td>The default filename </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00061">61</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>

<p class="reference">References <a class="el" href="../../df/d42/contact_8php_source.html#l00226">$ret</a>, and <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00011">__FILE_DUMP_DEFAULT_FILENAME__</a>.</p>
<div class="fragment"><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keywordflow">if</span> (!$in_default_filename) {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            $in_default_filename = <a class="code" href="../../d6/d72/c__comdef__data__importer_8class_8php.html#aa62c05d45dcfd352ed3bf5840e028ec5">__FILE_DUMP_DEFAULT_FILENAME__</a>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        }</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordflow">if</span> (!file_exists($in_default_filename)) {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            $file = $in_default_filename.<span class="stringliteral">&quot;.tsv&quot;</span>;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="keywordflow">if</span> (!file_exists($file)) {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                $file = $in_default_filename.<span class="stringliteral">&quot;.txt&quot;</span>;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            }</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    </div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            <span class="keywordflow">if</span> (!file_exists($file)) {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                $file = $in_default_filename.<span class="stringliteral">&quot;.csv&quot;</span>;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            }</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            $file = in_default_filename;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    </div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">if</span> (file_exists($file)) {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            $keys = null;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            $file_handle = fopen($file, <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    </div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            <span class="keywordflow">if</span> ($file_handle) {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = array();</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                $delimiter = <span class="stringliteral">&quot;,&quot;</span>;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        </div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                $key_line = fgetcsv($file_handle, 1000, $delimiter);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        </div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                <span class="keywordflow">if</span> (!is_array($key_line) || !(count($key_line) &gt; 2)) {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                    $delimiter = <span class="stringliteral">&quot;\t&quot;</span>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                    rewind($file_handle);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                    $key_line = fgetcsv($file_handle, null, $delimiter);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                <span class="keywordflow">while</span> (($data = fgetcsv($file_handle, null, $delimiter) ) !== <span class="keyword">false</span>) {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                    $data = array_combine($key_line, $data);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                    array_push(<a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>, $data);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        </div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                fclose($handle);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div><div class="ttc" id="c__comdef__data__importer_8class_8php_html_aa62c05d45dcfd352ed3bf5840e028ec5"><div class="ttname"><a href="../../d6/d72/c__comdef__data__importer_8class_8php.html#aa62c05d45dcfd352ed3bf5840e028ec5">__FILE_DUMP_DEFAULT_FILENAME__</a></div><div class="ttdeci">const __FILE_DUMP_DEFAULT_FILENAME__</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00011">c_comdef_data_importer.class.php:11</a></div></div>
<div class="ttc" id="contact_8php_html_affd9e3eb0aad0a7ca42912cd925f148c"><div class="ttname"><a href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a></div><div class="ttdeci">$ret</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d42/contact_8php_source.html#l00226">contact.php:226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae7343ad5ea13957f486733f764e24ffc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7343ad5ea13957f486733f764e24ffc">&#9670;&nbsp;</a></span>BuildAddress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BuildAddress </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$row</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$row</td><td>A meeting data array. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00610">610</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    {</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        $address = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        </div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="keywordflow">if</span> (isset($row[<span class="stringliteral">&#39;_location_street_address&#39;</span>]) &amp;&amp; trim($row[<span class="stringliteral">&#39;_location_street_address&#39;</span>])) {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            $address .= trim($row[<span class="stringliteral">&#39;_location_street_address&#39;</span>]);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        }</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            </div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordflow">if</span> (isset($row[<span class="stringliteral">&#39;_location_city_subsection&#39;</span>]) &amp;&amp; trim($row[<span class="stringliteral">&#39;_location_city_subsection&#39;</span>])) {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            <span class="keywordflow">if</span> ($address) {</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                $address .= <span class="stringliteral">&#39;, &#39;</span>;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            $address .= ucwords(strtolower(trim($row[<span class="stringliteral">&#39;_location_city_subsection&#39;</span>])));</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            </div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <span class="keywordflow">if</span> (isset($row[<span class="stringliteral">&#39;_location_town&#39;</span>]) &amp;&amp; trim($row[<span class="stringliteral">&#39;_location_town&#39;</span>])) {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="keywordflow">if</span> ($address) {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                $address .= <span class="stringliteral">&#39;, &#39;</span>;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            }</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            $address .= ucwords(strtolower(trim($row[<span class="stringliteral">&#39;_location_town&#39;</span>])));</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            </div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keywordflow">if</span> (isset($row[<span class="stringliteral">&#39;location_province&#39;</span>]) &amp;&amp; trim($row[<span class="stringliteral">&#39;location_province&#39;</span>])) {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <span class="keywordflow">if</span> ($address) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                $address .= <span class="stringliteral">&#39;, &#39;</span>;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            }</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            $address .= trim($row[<span class="stringliteral">&#39;location_province&#39;</span>]);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        </div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="keywordflow">if</span> (isset($row[<span class="stringliteral">&#39;_location_zip&#39;</span>]) &amp;&amp; trim($row[<span class="stringliteral">&#39;_location_zip&#39;</span>])) {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            <span class="keywordflow">if</span> ($address) {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                $address .= <span class="charliteral">&#39; &#39;</span>;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            }</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            $address .= trim($row[<span class="stringliteral">&#39;_location_zip&#39;</span>]);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        }</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            </div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="keywordflow">if</span> (isset($row[<span class="stringliteral">&#39;_location_nation&#39;</span>]) &amp;&amp; trim($row[<span class="stringliteral">&#39;_location_nation&#39;</span>])) {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            <span class="keywordflow">if</span> ($address) {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                $address .= <span class="charliteral">&#39; &#39;</span>;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            $address .= trim($row[<span class="stringliteral">&#39;_location_nation&#39;</span>]);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        </div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="keywordflow">return</span> $address;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="ae4e3612125f74e427b507b0af27a6045"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4e3612125f74e427b507b0af27a6045">&#9670;&nbsp;</a></span>DeleteAllOldMeetings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DeleteAllOldMeetings </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_sb_array</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This deletes all meeting data, and changes (permanent delete) for all meeting data for the Service bodies passed in via the array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_sb_array</td><td>An array of Service body IDs. Only meetings in these IDs will be deleted </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00406">406</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>

<p class="reference">References <a class="el" href="../../df/d42/contact_8php_source.html#l00226">$ret</a>, <a class="el" href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00267">c_comdef_dbsingleton\preparedExec()</a>, and <a class="el" href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00231">c_comdef_dbsingleton\preparedQuery()</a>.</p>
<div class="fragment"><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="comment">// We don&#39;t do this relationally, because this is not always gonna be used for MySQL, and this is more flexible (and possibly faster).</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">if</span> (is_array($in_sb_array) &amp;&amp; count($in_sb_array)) {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            $subsql = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            $id_array = array ();</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            $values = array();</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <span class="keywordflow">foreach</span> ($in_sb_array as $id) {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                <span class="keywordflow">if</span> (intval($id)) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                    <span class="keywordflow">if</span> ($subsql) {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                        $subsql .= <span class="stringliteral">&quot; OR &quot;</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                    }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                    $subsql .= <span class="stringliteral">&quot;(&quot;</span>.$this-&gt;m_server-&gt;GetMeetingTableName_obj().<span class="stringliteral">&quot;_main.service_body_bigint=?)&quot;</span>;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                    array_push($values, $id);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            $subsql = <span class="stringliteral">&quot;($subsql)&quot;</span>;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            </div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                $sql = <span class="stringliteral">&quot;SELECT id_bigint FROM `&quot;</span>.$this-&gt;m_server-&gt;GetMeetingTableName_obj().<span class="stringliteral">&quot;_main` WHERE $subsql&quot;</span>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        </div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                $rows = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql, $values);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                </div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                <span class="keywordflow">if</span> (is_array($rows) &amp;&amp; count($rows)) {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                    <span class="keywordflow">foreach</span> ($rows as $row) {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                        $r = intval($row[<span class="stringliteral">&#39;id_bigint&#39;</span>]);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                        </div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                        <span class="keywordflow">if</span> ($r) {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                            array_push($id_array, $r);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                        }</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                    }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                </div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                <span class="keywordflow">if</span> (is_array($id_array) &amp;&amp; count($id_array)) {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    $sql = <span class="stringliteral">&quot;DELETE FROM `&quot;</span>.$this-&gt;m_server-&gt;GetMeetingTableName_obj().<span class="stringliteral">&quot;_main` WHERE $subsql&quot;</span>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            </div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                    <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a703536f3e137679639f4687b45dd115c">c_comdef_dbsingleton::preparedExec</a>($sql, $values);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        </div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                    <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> .= count($id_array).<span class="stringliteral">&quot; meetings were deleted.&lt;br /&gt;&quot;</span>;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                    </div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                    $data_count = 0;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                    $longdata_count = 0;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                    $change_count = 0;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                    <span class="keywordflow">foreach</span> ($id_array as $id) {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                        <span class="keywordflow">if</span> ($id &gt; 0) {  <span class="comment">// Don&#39;t delete the placeholders.</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                            $sql = <span class="stringliteral">&quot;DELETE FROM `&quot;</span>.$this-&gt;m_server-&gt;GetMeetingTableName_obj().<span class="stringliteral">&quot;_data` WHERE meetingid_bigint=?&quot;</span>;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                </div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                            <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a703536f3e137679639f4687b45dd115c">c_comdef_dbsingleton::preparedExec</a>($sql, array ( $id ));</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                            </div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                            $sql = <span class="stringliteral">&quot;DELETE FROM `&quot;</span>.$this-&gt;m_server-&gt;GetMeetingTableName_obj().<span class="stringliteral">&quot;_longdata` WHERE meetingid_bigint=?&quot;</span>;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                </div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                            <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a703536f3e137679639f4687b45dd115c">c_comdef_dbsingleton::preparedExec</a>($sql, array ( $id ));</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                            </div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                            $sql = <span class="stringliteral">&quot;DELETE FROM `&quot;</span>.$this-&gt;m_server-&gt;GetChangesTableName_obj().<span class="stringliteral">&quot;` WHERE object_class_string=&#39;c_comdef_meeting&#39; AND (before_id_bigint=? OR after_id_bigint=?)&quot;</span>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                </div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                            <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a703536f3e137679639f4687b45dd115c">c_comdef_dbsingleton::preparedExec</a>($sql, array ( $id, $id ));</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                        }</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                    }</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            } <span class="keywordflow">catch</span> (Exception $e) {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                die(<span class="stringliteral">&#39;&lt;pre&gt;&#39;</span>.htmlspecialchars(print_r($e, <span class="keyword">true</span>)).<span class="stringliteral">&#39;&lt;/pre&gt;&#39;</span>);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            }</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        }</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        </div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    }</div><div class="ttc" id="contact_8php_html_affd9e3eb0aad0a7ca42912cd925f148c"><div class="ttname"><a href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a></div><div class="ttdeci">$ret</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d42/contact_8php_source.html#l00226">contact.php:226</a></div></div>
<div class="ttc" id="classc__comdef__dbsingleton_html_a1bcb4b189c8184f00f4dae50d29723d3"><div class="ttname"><a href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton\preparedQuery</a></div><div class="ttdeci">static preparedQuery( $sql, $params=array(), $fetchKeyPair=false)</div><div class="ttdoc">Wrapper for preparing and executing a PDOStatement that returns a resultset e.g. SELECT SQL statement...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00231">c_comdef_dbsingleton.class.php:231</a></div></div>
<div class="ttc" id="classc__comdef__dbsingleton_html_a703536f3e137679639f4687b45dd115c"><div class="ttname"><a href="../../d0/df2/classc__comdef__dbsingleton.html#a703536f3e137679639f4687b45dd115c">c_comdef_dbsingleton\preparedExec</a></div><div class="ttdeci">static preparedExec( $sql, $params=array())</div><div class="ttdoc">Wrapper for preparing and executing a PDOStatement that does not return a resultset e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00267">c_comdef_dbsingleton.class.php:267</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b924a7b0dd1c5d53b04e8ab6d1562bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b924a7b0dd1c5d53b04e8ab6d1562bd">&#9670;&nbsp;</a></span>extract_service_bodies()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">extract_service_bodies </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_file_contents</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the Service bodies from the database, and returns an associative array that can be used to match them to World IDs, or to clear out previous data for those Service bodies. </p>
<dl class="section return"><dt>Returns</dt><dd>an array of associative arrays, containing the Service body data. Each array element represent one Service body that is available for meetings. All that Service body's BMLT data is available in the array element (which is an associative array). The Array element key is the World ID of the Service body, so it can be used to match up with imported data. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_file_contents</td><td>The parsed "raw" file contents. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00375">375</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>

<p class="reference">References <a class="el" href="../../df/d42/contact_8php_source.html#l00226">$ret</a>, and <a class="el" href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00231">c_comdef_dbsingleton\preparedQuery()</a>.</p>
<div class="fragment"><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        </div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="keywordflow">try</span> <span class="comment">// Catch any thrown exceptions.</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.$this-&gt;m_server-&gt;GetServiceBodiesTableName_obj().<span class="stringliteral">&quot;`&quot;</span>;    <span class="comment">// Get every Service body</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            $row_result = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql, array());</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">if</span> (is_array($row_result) &amp;&amp; count($row_result) &gt; 0) {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = array();</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                <span class="keywordflow">foreach</span> ($row_result as $row) {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                    <span class="keywordflow">if</span> (trim(strtoupper($row[<span class="stringliteral">&#39;worldid_mixed&#39;</span>]))) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>[trim(strtoupper($row[<span class="stringliteral">&#39;worldid_mixed&#39;</span>]))] = $row;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                    }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                }</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        } <span class="keywordflow">catch</span> (Exception $e) {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            die(<span class="stringliteral">&#39;&lt;pre&gt;&#39;</span>.htmlspecialchars(print_r($e, <span class="keyword">true</span>)).<span class="stringliteral">&#39;&lt;/pre&gt;&#39;</span>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        </div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    }</div><div class="ttc" id="contact_8php_html_affd9e3eb0aad0a7ca42912cd925f148c"><div class="ttname"><a href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a></div><div class="ttdeci">$ret</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d42/contact_8php_source.html#l00226">contact.php:226</a></div></div>
<div class="ttc" id="classc__comdef__dbsingleton_html_a1bcb4b189c8184f00f4dae50d29723d3"><div class="ttname"><a href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton\preparedQuery</a></div><div class="ttdeci">static preparedQuery( $sql, $params=array(), $fetchKeyPair=false)</div><div class="ttdoc">Wrapper for preparing and executing a PDOStatement that returns a resultset e.g. SELECT SQL statement...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00231">c_comdef_dbsingleton.class.php:231</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab6b012168b111a4d70fac75b133994dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6b012168b111a4d70fac75b133994dd">&#9670;&nbsp;</a></span>FetchTemplates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FetchTemplates </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetch the ID = 0 templates for the key/value pairs. </p>
<dl class="section return"><dt>Returns</dt><dd>an associative array, with two main sub-arrays: 'data' and 'longdata'. Each will contain an associative array with keys equal to the database keys, and the following fields:<ul>
<li>'field_prompt'</li>
<li>'lang_enum'</li>
<li>'visibility'</li>
<li>The 'data' array will only have one of these:<ul>
<li>'data_string'</li>
<li>'data_bigint'</li>
<li>'data_double'</li>
</ul>
</li>
<li>The 'longdata' array will only have one of these:<ul>
<li>'data_longtext'</li>
<li>'data_blob' </li>
</ul>
</li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00309">309</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>

<p class="reference">References <a class="el" href="../../df/d42/contact_8php_source.html#l00226">$ret</a>, and <a class="el" href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00231">c_comdef_dbsingleton\preparedQuery()</a>.</p>
<div class="fragment"><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        </div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        $retData = array();</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        $retLongData = array();</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        </div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">try</span> <span class="comment">// Catch any thrown exceptions.</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.$this-&gt;m_server-&gt;GetMeetingTableName_obj().<span class="stringliteral">&quot;_data` WHERE `meetingid_bigint` = 0&quot;</span>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            $row_result = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql, array());</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            </div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <span class="keywordflow">if</span> (is_array($row_result) &amp;&amp; count($row_result) &gt; 0) {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                <span class="keywordflow">foreach</span> ($row_result as $row) {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                    $retData[$row[<span class="stringliteral">&#39;key&#39;</span>]][<span class="stringliteral">&#39;field_prompt&#39;</span>] = $row[<span class="stringliteral">&#39;field_prompt&#39;</span>];</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                    $retData[$row[<span class="stringliteral">&#39;key&#39;</span>]][<span class="stringliteral">&#39;lang_enum&#39;</span>] = $row[<span class="stringliteral">&#39;lang_enum&#39;</span>];</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                    $retData[$row[<span class="stringliteral">&#39;key&#39;</span>]][<span class="stringliteral">&#39;visibility&#39;</span>] = $row[<span class="stringliteral">&#39;visibility&#39;</span>];</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                    $retData[$row[<span class="stringliteral">&#39;key&#39;</span>]][<span class="stringliteral">&#39;data_string&#39;</span>] = $row[<span class="stringliteral">&#39;data_string&#39;</span>];</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                    $retData[$row[<span class="stringliteral">&#39;key&#39;</span>]][<span class="stringliteral">&#39;data_bigint&#39;</span>] = $row[<span class="stringliteral">&#39;data_bigint&#39;</span>];</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                    $retData[$row[<span class="stringliteral">&#39;key&#39;</span>]][<span class="stringliteral">&#39;data_double&#39;</span>] = $row[<span class="stringliteral">&#39;data_double&#39;</span>];</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            </div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            $sql = <span class="stringliteral">&quot;SELECT * FROM `&quot;</span>.$this-&gt;m_server-&gt;GetMeetingTableName_obj().<span class="stringliteral">&quot;_longdata` WHERE `meetingid_bigint` = 0&quot;</span>;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            $row_result = <a class="code" href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton::preparedQuery</a>($sql, array());</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            </div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">if</span> (is_array($row_result) &amp;&amp; count($row_result) &gt; 0) {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                <span class="keywordflow">foreach</span> ($row_result as $row) {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                    $retLongData[$row[<span class="stringliteral">&#39;key&#39;</span>]][<span class="stringliteral">&#39;field_prompt&#39;</span>] = $row[<span class="stringliteral">&#39;field_prompt&#39;</span>];</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                    $retLongData[$row[<span class="stringliteral">&#39;key&#39;</span>]][<span class="stringliteral">&#39;lang_enum&#39;</span>] = $row[<span class="stringliteral">&#39;lang_enum&#39;</span>];</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                    $retLongData[$row[<span class="stringliteral">&#39;key&#39;</span>]][<span class="stringliteral">&#39;visibility&#39;</span>] = $row[<span class="stringliteral">&#39;visibility&#39;</span>];</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                    <span class="keywordflow">if</span> (array_key_exists($row, <span class="stringliteral">&#39;data_longtext&#39;</span>)) {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                        $retLongData[$row[<span class="stringliteral">&#39;key&#39;</span>]][<span class="stringliteral">&#39;data_longtext&#39;</span>] = $row[<span class="stringliteral">&#39;data_longtext&#39;</span>];</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                    } elseif (array_key_exists($row, <span class="stringliteral">&#39;data_blob&#39;</span>)) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                        $retLongData[$row[<span class="stringliteral">&#39;key&#39;</span>]][<span class="stringliteral">&#39;data_blob&#39;</span>] = $row[<span class="stringliteral">&#39;data_blob&#39;</span>];</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                    }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            }</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        } <span class="keywordflow">catch</span> (Exception $e) {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            die(<span class="stringliteral">&#39;&lt;pre&gt;&#39;</span>.htmlspecialchars(print_r($e, <span class="keyword">true</span>)).<span class="stringliteral">&#39;&lt;/pre&gt;&#39;</span>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        }</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        </div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">if</span> (is_array($retData) &amp;&amp; count($retData)) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>[<span class="stringliteral">&#39;data&#39;</span>] = $retData;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        </div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">if</span> (is_array($retLongData) &amp;&amp; count($retLongData)) {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>[<span class="stringliteral">&#39;longdata&#39;</span>] = $retLongData;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        </div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div><div class="ttc" id="contact_8php_html_affd9e3eb0aad0a7ca42912cd925f148c"><div class="ttname"><a href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a></div><div class="ttdeci">$ret</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d42/contact_8php_source.html#l00226">contact.php:226</a></div></div>
<div class="ttc" id="classc__comdef__dbsingleton_html_a1bcb4b189c8184f00f4dae50d29723d3"><div class="ttname"><a href="../../d0/df2/classc__comdef__dbsingleton.html#a1bcb4b189c8184f00f4dae50d29723d3">c_comdef_dbsingleton\preparedQuery</a></div><div class="ttdeci">static preparedQuery( $sql, $params=array(), $fetchKeyPair=false)</div><div class="ttdoc">Wrapper for preparing and executing a PDOStatement that returns a resultset e.g. SELECT SQL statement...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9e/c__comdef__dbsingleton_8class_8php_source.html#l00231">c_comdef_dbsingleton.class.php:231</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adc65e716c2617b5821dd094f00fe35f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc65e716c2617b5821dd094f00fe35f7">&#9670;&nbsp;</a></span>format_sorter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">format_sorter </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00708">708</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    {</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">if</span> ($a == $b) {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            <span class="keywordflow">return</span> ( $a &lt; $b ) ? -1 : 1;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        }</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a52c8d60517bfa0e5c30a419d92be6c16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52c8d60517bfa0e5c30a419d92be6c16">&#9670;&nbsp;</a></span>func_convert_from_english_full_weekday()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">func_convert_from_english_full_weekday </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_weekday</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts an English full-day ('Sunday', 'Monday', etc.) to a BMLT number (1-7). Case counts. </p>
<dl class="section return"><dt>Returns</dt><dd>an integer. 1-7 (Sun-Sat), or null, if the day was not found. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_weekday</td><td>The day of the week, spelled out, in English ('Sunday' -&gt; 'Saturday'). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00750">750</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>

<p class="reference">References <a class="el" href="../../df/d42/contact_8php_source.html#l00226">$ret</a>.</p>
<div class="fragment"><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    {</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        </div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = array_search($in_weekday, $this-&gt;m_local_strings[<span class="stringliteral">&#39;days&#39;</span>]);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        </div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> !== <span class="keyword">false</span>) {</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = min(6, max(0, intval(<a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>)));</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        }</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            </div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    }</div><div class="ttc" id="contact_8php_html_affd9e3eb0aad0a7ca42912cd925f148c"><div class="ttname"><a href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a></div><div class="ttdeci">$ret</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d42/contact_8php_source.html#l00226">contact.php:226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa04a26ac9123764a67ebdeb2f86a068"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa04a26ac9123764a67ebdeb2f86a068">&#9670;&nbsp;</a></span>func_start_time_from_simple_military()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">func_start_time_from_simple_military </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_military_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts an integer time in simple military format to an SQL-format time (HH:MM:SS) as a string. </p>
<dl class="section return"><dt>Returns</dt><dd>a string, with the time as full military. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_military_time</td><td>The military time as an integer (100s are hours 0000 -&gt; 2359). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00771">771</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        $time = abs(intval($in_military_time));</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        $hours = min(23, $time / 100);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        $minutes = min(59, ($time - (intval($time / 100) * 100)));</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        </div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="keywordflow">return</span> sprintf(<span class="stringliteral">&quot;%d:%02d:00&quot;</span>, $hours, $minutes);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a5bded3a22c3d8a55de3202e3a054ccab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bded3a22c3d8a55de3202e3a054ccab">&#9670;&nbsp;</a></span>GeocodeAddress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GeocodeAddress </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_gkey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_region</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given an address string, return a geocode. </p>
<dl class="section return"><dt>Returns</dt><dd>an array of string. The contents are as follows:<ul>
<li>These will appear in all results:<ul>
<li>'original' The original address string</li>
<li>'google_key' The Google API key</li>
</ul>
</li>
<li>This may be set if the call was not complete. It is an integer:<ul>
<li>'status' The numerical status code for the failure.</li>
</ul>
</li>
<li>These three fields will be in every reply:<ul>
<li>'accuracy' This is the accuracy of the reply. It is an integer, 0-10.</li>
<li>'long' The longitude, in degrees. This is a floating-point number.</li>
<li>'lat' The latitude, in degrees. This is a floating-point number.</li>
</ul>
</li>
<li>These fields will be in most replies, depending upon what the Geocoder finds. They are all strings:<ul>
<li>'nation' The nation. This should be a two-letter code.</li>
<li>'state' The state or province name.</li>
<li>'county' The county or shire name.</li>
<li>'town' The municipality, town or city.</li>
<li>'borough' The incorporated city subsection.</li>
<li>'street' The street address.</li>
<li>'zip' The postal or zip code. </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_address</td><td>The address, in a single string, to be sent to the geocoder. </td></tr>
    <tr><td class="paramname">$in_gkey</td><td>The Google API key. </td></tr>
    <tr><td class="paramname">$in_region</td><td>If there is a nation region bias, it is entered here. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00516">516</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>

<p class="reference">References <a class="el" href="../../df/d42/contact_8php_source.html#l00226">$ret</a>, <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00737">microtime_float()</a>, and <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00584">xml_parser_parse_xml()</a>.</p>
<div class="fragment"><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = array(<span class="stringliteral">&#39;original&#39;</span> =&gt; $in_address,<span class="stringliteral">&#39;google_key&#39;</span> =&gt; $in_gkey);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        $status = null;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        $uri = <span class="stringliteral">&#39;http://maps.googleapis.com/maps/api/geocode/xml?address=&#39;</span>.urlencode($in_address).<span class="stringliteral">&#39;&amp;sensor=false&#39;</span>;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        </div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">if</span> ($in_region) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            $uri .= <span class="stringliteral">&#39;&amp;region=&#39;</span>.strtolower(trim($in_region));</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        </div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">do</span> {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            $retry = <span class="keyword">false</span>;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        </div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            $xml = simplexml_load_file($uri);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            $status = $xml-&gt;status;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            $result = $xml-&gt;result;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            </div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <span class="keywordflow">if</span> ($xml-&gt;status == <span class="stringliteral">&#39;OK&#39;</span>) {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                $retry = <span class="keyword">false</span>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = <a class="code" href="../../dc/d0a/classc__comdef__data__importer.html#a1ea29697892f35a67a33f1eaa9e0f1df">xml_parser_parse_xml</a>($xml-&gt;result);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            } elseif (!$retry) {</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                $retry = <span class="keyword">true</span>;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                $t = <a class="code" href="../../dc/d0a/classc__comdef__data__importer.html#a6b5adb70a7aed1d4f6cda2ffbca36d6b">microtime_float</a>() + 2; <span class="comment">// Two second delay.</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                <span class="keywordflow">while</span> (<a class="code" href="../../dc/d0a/classc__comdef__data__importer.html#a6b5adb70a7aed1d4f6cda2ffbca36d6b">microtime_float</a>() &lt;= $t) {</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                };   <span class="comment">// Real, REAL basic delay, because Google doesn&#39;t like &#39;bots.</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            }</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        } <span class="keywordflow">while</span> ($retry);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    </div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    }</div><div class="ttc" id="contact_8php_html_affd9e3eb0aad0a7ca42912cd925f148c"><div class="ttname"><a href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a></div><div class="ttdeci">$ret</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d42/contact_8php_source.html#l00226">contact.php:226</a></div></div>
<div class="ttc" id="classc__comdef__data__importer_html_a6b5adb70a7aed1d4f6cda2ffbca36d6b"><div class="ttname"><a href="../../dc/d0a/classc__comdef__data__importer.html#a6b5adb70a7aed1d4f6cda2ffbca36d6b">c_comdef_data_importer\microtime_float</a></div><div class="ttdeci">microtime_float()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00737">c_comdef_data_importer.class.php:737</a></div></div>
<div class="ttc" id="classc__comdef__data__importer_html_a1ea29697892f35a67a33f1eaa9e0f1df"><div class="ttname"><a href="../../dc/d0a/classc__comdef__data__importer.html#a1ea29697892f35a67a33f1eaa9e0f1df">c_comdef_data_importer\xml_parser_parse_xml</a></div><div class="ttdeci">xml_parser_parse_xml( $in_xml)</div><div class="ttdoc">A basic function to parse the XML reply from Google Geocode, and return usable fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00584">c_comdef_data_importer.class.php:584</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b5adb70a7aed1d4f6cda2ffbca36d6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b5adb70a7aed1d4f6cda2ffbca36d6b">&#9670;&nbsp;</a></span>microtime_float()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">microtime_float </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00737">737</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00516">GeocodeAddress()</a>.</p>
<div class="fragment"><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        list($usec, $sec) = explode(<span class="stringliteral">&quot; &quot;</span>, microtime());</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keywordflow">return</span> ((<span class="keywordtype">float</span>)$usec + (<span class="keywordtype">float</span>)$sec);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="af6be609888562e0a20417f2c7a996662"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6be609888562e0a20417f2c7a996662">&#9670;&nbsp;</a></span>translate_format_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">translate_format_code </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00722">722</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        global $format_array;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="keywordflow">if</span> (key_exists($in_code, $format_array)) {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            <span class="keywordflow">return</span> $format_array[$in_code];</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        }</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a4dbf3facdc542b38d8f0f84ac942eca1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dbf3facdc542b38d8f0f84ac942eca1">&#9670;&nbsp;</a></span>ValidEmailAddress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ValidEmailAddress </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_test_address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function validates email addresses. The input can be a single email address, or a series of comma-delimited addresses. </p>
<p>If any of the addresses fails a simple test (must have an "@," and at least one period (.) in the second part), the function returns false.</p>
<p>$g_validation_error This contains a "log" of the errors, as an array.</p>
<dl class="section return"><dt>Returns</dt><dd>true, if the email is valid, false, otherwise. </dd></dl>
<p>&lt; This contains an array of strings, that "log" bad email addresses. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_test_address</td><td>Either a single email address, or a list of them, comma-separated. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00671">671</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        $valid = <span class="keyword">false</span>;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        </div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keywordflow">if</span> ($in_test_address) {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            global $g_validation_error; <span class="comment">///&lt; This contains an array of strings, that &quot;log&quot; bad email addresses.</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment"></span>            $g_validation_error = array();</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            $addr_array = explode(<span class="stringliteral">&quot;,&quot;</span>, $in_test_address);</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            <span class="comment">// Start off optimistic.</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            $valid = <span class="keyword">true</span>;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            </div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            <span class="comment">// If we have more than one address, we iterate through each one.</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            <span class="keywordflow">foreach</span> ($addr_array as $addr_elem) {</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                <span class="comment">// This splits any name/address pair (ex: &quot;Jack Schidt&quot; &lt;jsh@spaz.com&gt;)</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                $addr_temp = preg_split(<span class="stringliteral">&quot;/ &lt;/&quot;</span>, $addr_elem);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                <span class="keywordflow">if</span> (count($addr_temp) &gt; 1) { <span class="comment">// We also want to trim off address brackets.</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                    $addr_elem = trim($addr_temp[1], <span class="stringliteral">&quot;&lt;&gt;&quot;</span>);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                    $addr_elem = trim($addr_temp[0], <span class="stringliteral">&quot;&lt;&gt;&quot;</span>);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                }</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                $regexp = <span class="stringliteral">&quot;/^([_a-zA-Z0-9-]+)(\.[_a-zA-Z0-9-]+)*@([a-zA-Z0-9-]+)(\.[a-zA-Z0-9-]+)*(\.[a-zA-Z]{2,4})$/&quot;</span>;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                <span class="keywordflow">if</span> (!preg_match($regexp, $addr_elem)) {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                    array_push($g_validation_error, <span class="stringliteral">&#39;The address&#39;</span>.<span class="stringliteral">&quot; &#39;$addr_elem&#39; &quot;</span>.<span class="stringliteral">&#39;is not correct.&#39;</span>);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                    $valid = <span class="keyword">false</span>;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                }</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        </div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="keywordflow">return</span> $valid;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a1ea29697892f35a67a33f1eaa9e0f1df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ea29697892f35a67a33f1eaa9e0f1df">&#9670;&nbsp;</a></span>xml_parser_parse_xml()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">xml_parser_parse_xml </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_xml</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A basic function to parse the XML reply from Google Geocode, and return usable fields. </p>
<dl class="section return"><dt>Returns</dt><dd>an array of string. The contents are as follows:<ul>
<li>These three fields will be in every reply:<ul>
<li>'accuracy' This is the accuracy of the reply. It is an integer, 0-10.</li>
<li>'long' The longitude, in degrees. This is a floating-point number.</li>
<li>'lat' The latitude, in degrees. This is a floating-point number.</li>
</ul>
</li>
<li>These fields will be in most replies, depending upon what the Geocoder finds. They are all strings:<ul>
<li>'nation' The nation. This should be a two-letter code.</li>
<li>'state' The state or province name.</li>
<li>'county' The county or shire name.</li>
<li>'town' The municipality, town or city.</li>
<li>'borough' The incorporated city subsection.</li>
<li>'street' The street address.</li>
<li>'zip' The postal or zip code. </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_xml</td><td>The XML data, as a <a href="http://php.net/manual/en/book.simplexml.php">SimpleXML</a> object. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00584">584</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>

<p class="reference">References <a class="el" href="../../df/d42/contact_8php_source.html#l00226">$ret</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00516">GeocodeAddress()</a>.</p>
<div class="fragment"><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="comment">// phpcs:enable PSR1.Methods.CamelCapsMethodName.NotCamelCaps</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> = null;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    </div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">if</span> (isset($in_xml-&gt;geometry) &amp;&amp; isset($in_xml-&gt;geometry-&gt;location) &amp;&amp; isset($in_xml-&gt;geometry-&gt;location-&gt;lng) &amp;&amp; isset($in_xml-&gt;geometry-&gt;location-&gt;lat)) {</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> [<span class="stringliteral">&#39;long&#39;</span>] = floatval($in_xml-&gt;geometry-&gt;location-&gt;lng);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> [<span class="stringliteral">&#39;lat&#39;</span>] = floatval($in_xml-&gt;geometry-&gt;location-&gt;lat);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        }</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> [<span class="stringliteral">&#39;nation&#39;</span>] = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> [<span class="stringliteral">&#39;state&#39;</span>] = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> [<span class="stringliteral">&#39;county&#39;</span>] = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> [<span class="stringliteral">&#39;town&#39;</span>] = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> [<span class="stringliteral">&#39;borough&#39;</span>] = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> [<span class="stringliteral">&#39;street&#39;</span>] = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a> [<span class="stringliteral">&#39;zip&#39;</span>] = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    </div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a>;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    }</div><div class="ttc" id="contact_8php_html_affd9e3eb0aad0a7ca42912cd925f148c"><div class="ttname"><a href="../../df/d42/contact_8php.html#affd9e3eb0aad0a7ca42912cd925f148c">$ret</a></div><div class="ttdeci">$ret</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d42/contact_8php_source.html#l00226">contact.php:226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a69cdea8f9e7abfdcf9791b9d66e6008a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69cdea8f9e7abfdcf9791b9d66e6008a">&#9670;&nbsp;</a></span>$m_local_strings</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$m_local_strings</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00031">31</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>

</div>
</div>
<a id="abedd9465fca9e71fc5ac571f580fac2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abedd9465fca9e71fc5ac571f580fac2c">&#9670;&nbsp;</a></span>$m_server</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$m_server</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html#l00030">30</a> of file <a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/Volumes/Development/webroot/web_projects/BMLT-Root-Server/main_server/local_server/server_admin/<a class="el" href="../../d6/d72/c__comdef__data__importer_8class_8php_source.html">c_comdef_data_importer.class.php</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Aug 6 2019 07:01:56 for BMLT Root Server by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
